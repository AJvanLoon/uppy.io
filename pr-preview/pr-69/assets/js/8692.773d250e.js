/*! For license information please see 8692.773d250e.js.LICENSE.txt */
(self.webpackChunkuppy_io=self.webpackChunkuppy_io||[]).push([[8692],{3612:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var r=i(7294),n=i(6010),o=i(5281),s=i(5999);const a={admonition:"admonition_LlT9",admonitionHeading:"admonitionHeading_tbUL",admonitionIcon:"admonitionIcon_kALy",admonitionContent:"admonitionContent_S0QG"};const l={note:{infimaClassName:"secondary",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:r.createElement(s.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:r.createElement(s.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 12 16"},r.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:r.createElement(s.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:r.createElement(s.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return r.createElement("svg",{viewBox:"0 0 16 16"},r.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:r.createElement(s.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},h={secondary:"note",important:"info",success:"tip",warning:"danger"};function c(t){const{mdxAdmonitionTitle:e,rest:i}=function(t){const e=r.Children.toArray(t),i=e.find((t=>r.isValidElement(t)&&"mdxAdmonitionTitle"===t.props?.mdxType)),n=r.createElement(r.Fragment,null,e.filter((t=>t!==i)));return{mdxAdmonitionTitle:i,rest:n}}(t.children);return{...t,title:t.title??e,children:i}}function u(t){const{children:e,type:i,title:s,icon:u}=c(t),p=function(t){const e=h[t]??t,i=l[e];return i||(console.warn(`No admonition config found for admonition type "${e}". Using Info as fallback.`),l.info)}(i),d=s??p.label,{iconComponent:f}=p,m=u??r.createElement(f,null);return r.createElement("div",{className:(0,n.Z)(o.k.common.admonition,o.k.common.admonitionType(t.type),"alert",`alert--${p.infimaClassName}`,a.admonition)},r.createElement("div",{className:a.admonitionHeading},r.createElement("span",{className:a.admonitionIcon},m),d),r.createElement("div",{className:a.admonitionContent},e))}},3129:function(t){t.exports=function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach((function(e){n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t){return l(t)||h(t)||c(t)||p()}function l(t){if(Array.isArray(t))return u(t)}function h(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t,e){if(t){if("string"==typeof t)return u(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var d="undefined"!=typeof window&&void 0!==window.document,f=d?window:{},m=!(!d||!f.document.documentElement)&&"ontouchstart"in f.document.documentElement,g=!!d&&"PointerEvent"in f,v="cropper",y="all",b="crop",w="move",S="zoom",P="e",x="w",C="s",A="n",R="ne",_="nw",k="se",O="sw",E="".concat(v,"-crop"),U="".concat(v,"-disabled"),M="".concat(v,"-hidden"),z="".concat(v,"-hide"),T="".concat(v,"-invisible"),D="".concat(v,"-modal"),I="".concat(v,"-move"),N="".concat(v,"Action"),F="".concat(v,"Preview"),B="crop",H="move",j="none",L="crop",q="cropend",V="cropmove",W="cropstart",K="dblclick",Y=m?"touchstart":"mousedown",X=m?"touchmove":"mousemove",Z=m?"touchend touchcancel":"mouseup",$=g?"pointerdown":Y,Q=g?"pointermove":X,G=g?"pointerup pointercancel":Z,J="ready",tt="resize",et="wheel",it="zoom",rt="image/jpeg",nt=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,ot=/^data:/,st=/^data:image\/jpeg;base64,/,at=/^img|canvas$/i,lt={viewMode:0,dragMode:B,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},ht='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',ct=Number.isNaN||f.isNaN;function ut(t){return"number"==typeof t&&!ct(t)}var pt=function(t){return t>0&&t<1/0};function dt(t){return void 0===t}function ft(e){return"object"===t(e)&&null!==e}var mt=Object.prototype.hasOwnProperty;function gt(t){if(!ft(t))return!1;try{var e=t.constructor,i=e.prototype;return e&&i&&mt.call(i,"isPrototypeOf")}catch(r){return!1}}function vt(t){return"function"==typeof t}var yt=Array.prototype.slice;function bt(t){return Array.from?Array.from(t):yt.call(t)}function wt(t,e){return t&&vt(e)&&(Array.isArray(t)||ut(t.length)?bt(t).forEach((function(i,r){e.call(t,i,r,t)})):ft(t)&&Object.keys(t).forEach((function(i){e.call(t,t[i],i,t)}))),t}var St=Object.assign||function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];return ft(t)&&i.length>0&&i.forEach((function(e){ft(e)&&Object.keys(e).forEach((function(i){t[i]=e[i]}))})),t},Pt=/\.\d*(?:0|9){12}\d*$/;function xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return Pt.test(t)?Math.round(t*e)/e:t}var Ct=/^width|height|left|top|marginLeft|marginTop$/;function At(t,e){var i=t.style;wt(e,(function(t,e){Ct.test(e)&&ut(t)&&(t="".concat(t,"px")),i[e]=t}))}function Rt(t,e){return t.classList?t.classList.contains(e):t.className.indexOf(e)>-1}function _t(t,e){if(e)if(ut(t.length))wt(t,(function(t){_t(t,e)}));else if(t.classList)t.classList.add(e);else{var i=t.className.trim();i?i.indexOf(e)<0&&(t.className="".concat(i," ").concat(e)):t.className=e}}function kt(t,e){e&&(ut(t.length)?wt(t,(function(t){kt(t,e)})):t.classList?t.classList.remove(e):t.className.indexOf(e)>=0&&(t.className=t.className.replace(e,"")))}function Ot(t,e,i){e&&(ut(t.length)?wt(t,(function(t){Ot(t,e,i)})):i?_t(t,e):kt(t,e))}var Et=/([a-z\d])([A-Z])/g;function Ut(t){return t.replace(Et,"$1-$2").toLowerCase()}function Mt(t,e){return ft(t[e])?t[e]:t.dataset?t.dataset[e]:t.getAttribute("data-".concat(Ut(e)))}function zt(t,e,i){ft(i)?t[e]=i:t.dataset?t.dataset[e]=i:t.setAttribute("data-".concat(Ut(e)),i)}function Tt(t,e){if(ft(t[e]))try{delete t[e]}catch(i){t[e]=void 0}else if(t.dataset)try{delete t.dataset[e]}catch(i){t.dataset[e]=void 0}else t.removeAttribute("data-".concat(Ut(e)))}var Dt=/\s\s*/,It=function(){var t=!1;if(d){var e=!1,i=function(){},r=Object.defineProperty({},"once",{get:function(){return t=!0,e},set:function(t){e=t}});f.addEventListener("test",i,r),f.removeEventListener("test",i,r)}return t}();function Nt(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(Dt).forEach((function(e){if(!It){var o=t.listeners;o&&o[e]&&o[e][i]&&(n=o[e][i],delete o[e][i],0===Object.keys(o[e]).length&&delete o[e],0===Object.keys(o).length&&delete t.listeners)}t.removeEventListener(e,n,r)}))}function Ft(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=i;e.trim().split(Dt).forEach((function(e){if(r.once&&!It){var o=t.listeners,s=void 0===o?{}:o;n=function(){delete s[e][i],t.removeEventListener(e,n,r);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];i.apply(t,a)},s[e]||(s[e]={}),s[e][i]&&t.removeEventListener(e,s[e][i],r),s[e][i]=n,t.listeners=s}t.addEventListener(e,n,r)}))}function Bt(t,e,i){var r;return vt(Event)&&vt(CustomEvent)?r=new CustomEvent(e,{detail:i,bubbles:!0,cancelable:!0}):(r=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,i),t.dispatchEvent(r)}function Ht(t){var e=t.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var jt=f.location,Lt=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function qt(t){var e=t.match(Lt);return null!==e&&(e[1]!==jt.protocol||e[2]!==jt.hostname||e[3]!==jt.port)}function Vt(t){var e="timestamp=".concat((new Date).getTime());return t+(-1===t.indexOf("?")?"?":"&")+e}function Wt(t){var e=t.rotate,i=t.scaleX,r=t.scaleY,n=t.translateX,o=t.translateY,s=[];ut(n)&&0!==n&&s.push("translateX(".concat(n,"px)")),ut(o)&&0!==o&&s.push("translateY(".concat(o,"px)")),ut(e)&&0!==e&&s.push("rotate(".concat(e,"deg)")),ut(i)&&1!==i&&s.push("scaleX(".concat(i,")")),ut(r)&&1!==r&&s.push("scaleY(".concat(r,")"));var a=s.length?s.join(" "):"none";return{WebkitTransform:a,msTransform:a,transform:a}}function Kt(t){var e=s({},t),i=[];return wt(t,(function(t,r){delete e[r],wt(e,(function(e){var r=Math.abs(t.startX-e.startX),n=Math.abs(t.startY-e.startY),o=Math.abs(t.endX-e.endX),s=Math.abs(t.endY-e.endY),a=Math.sqrt(r*r+n*n),l=(Math.sqrt(o*o+s*s)-a)/a;i.push(l)}))})),i.sort((function(t,e){return Math.abs(t)<Math.abs(e)})),i[0]}function Yt(t,e){var i=t.pageX,r=t.pageY,n={endX:i,endY:r};return e?n:s({startX:i,startY:r},n)}function Xt(t){var e=0,i=0,r=0;return wt(t,(function(t){var n=t.startX,o=t.startY;e+=n,i+=o,r+=1})),{pageX:e/=r,pageY:i/=r}}function Zt(t){var e=t.aspectRatio,i=t.height,r=t.width,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"contain",o=pt(r),s=pt(i);if(o&&s){var a=i*e;"contain"===n&&a>r||"cover"===n&&a<r?i=r/e:r=i*e}else o?i=r/e:s&&(r=i*e);return{width:r,height:i}}function $t(t){var e=t.width,i=t.height,r=t.degree;if(90==(r=Math.abs(r)%180))return{width:i,height:e};var n=r%90*Math.PI/180,o=Math.sin(n),s=Math.cos(n),a=e*s+i*o,l=e*o+i*s;return r>90?{width:l,height:a}:{width:a,height:l}}function Qt(t,e,i,r){var n=e.aspectRatio,o=e.naturalWidth,s=e.naturalHeight,l=e.rotate,h=void 0===l?0:l,c=e.scaleX,u=void 0===c?1:c,p=e.scaleY,d=void 0===p?1:p,f=i.aspectRatio,m=i.naturalWidth,g=i.naturalHeight,v=r.fillColor,y=void 0===v?"transparent":v,b=r.imageSmoothingEnabled,w=void 0===b||b,S=r.imageSmoothingQuality,P=void 0===S?"low":S,x=r.maxWidth,C=void 0===x?1/0:x,A=r.maxHeight,R=void 0===A?1/0:A,_=r.minWidth,k=void 0===_?0:_,O=r.minHeight,E=void 0===O?0:O,U=document.createElement("canvas"),M=U.getContext("2d"),z=Zt({aspectRatio:f,width:C,height:R}),T=Zt({aspectRatio:f,width:k,height:E},"cover"),D=Math.min(z.width,Math.max(T.width,m)),I=Math.min(z.height,Math.max(T.height,g)),N=Zt({aspectRatio:n,width:C,height:R}),F=Zt({aspectRatio:n,width:k,height:E},"cover"),B=Math.min(N.width,Math.max(F.width,o)),H=Math.min(N.height,Math.max(F.height,s)),j=[-B/2,-H/2,B,H];return U.width=xt(D),U.height=xt(I),M.fillStyle=y,M.fillRect(0,0,D,I),M.save(),M.translate(D/2,I/2),M.rotate(h*Math.PI/180),M.scale(u,d),M.imageSmoothingEnabled=w,M.imageSmoothingQuality=P,M.drawImage.apply(M,[t].concat(a(j.map((function(t){return Math.floor(xt(t))}))))),M.restore(),U}var Gt=String.fromCharCode;function Jt(t,e,i){var r="";i+=e;for(var n=e;n<i;n+=1)r+=Gt(t.getUint8(n));return r}var te=/^data:.*,/;function ee(t){var e=t.replace(te,""),i=atob(e),r=new ArrayBuffer(i.length),n=new Uint8Array(r);return wt(n,(function(t,e){n[e]=i.charCodeAt(e)})),r}function ie(t,e){for(var i=[],r=8192,n=new Uint8Array(t);n.length>0;)i.push(Gt.apply(null,bt(n.subarray(0,r)))),n=n.subarray(r);return"data:".concat(e,";base64,").concat(btoa(i.join("")))}function re(t){var e,i=new DataView(t);try{var r,n,o;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var s=i.byteLength,a=2;a+1<s;){if(255===i.getUint8(a)&&225===i.getUint8(a+1)){n=a;break}a+=1}if(n){var l=n+10;if("Exif"===Jt(i,n+4,4)){var h=i.getUint16(l);if(((r=18761===h)||19789===h)&&42===i.getUint16(l+2,r)){var c=i.getUint32(l+4,r);c>=8&&(o=l+c)}}}if(o){var u,p,d=i.getUint16(o,r);for(p=0;p<d;p+=1)if(u=o+12*p+2,274===i.getUint16(u,r)){u+=8,e=i.getUint16(u,r),i.setUint16(u,1,r);break}}}catch(f){e=1}return e}function ne(t){var e=0,i=1,r=1;switch(t){case 2:i=-1;break;case 3:e=-180;break;case 4:r=-1;break;case 5:e=90,r=-1;break;case 6:e=90;break;case 7:e=90,i=-1;break;case 8:e=-90}return{rotate:e,scaleX:i,scaleY:r}}var oe={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var t=this.element,e=this.options,i=this.container,r=this.cropper;_t(r,M),kt(t,M);var n={width:Math.max(i.offsetWidth,Number(e.minContainerWidth)||200),height:Math.max(i.offsetHeight,Number(e.minContainerHeight)||100)};this.containerData=n,At(r,{width:n.width,height:n.height}),_t(t,M),kt(r,M)},initCanvas:function(){var t=this.containerData,e=this.imageData,i=this.options.viewMode,r=Math.abs(e.rotate)%180==90,n=r?e.naturalHeight:e.naturalWidth,o=r?e.naturalWidth:e.naturalHeight,s=n/o,a=t.width,l=t.height;t.height*s>t.width?3===i?a=t.height*s:l=t.width/s:3===i?l=t.width/s:a=t.height*s;var h={aspectRatio:s,naturalWidth:n,naturalHeight:o,width:a,height:l};h.left=(t.width-a)/2,h.top=(t.height-l)/2,h.oldLeft=h.left,h.oldTop=h.top,this.canvasData=h,this.limited=1===i||2===i,this.limitCanvas(!0,!0),this.initialImageData=St({},e),this.initialCanvasData=St({},h)},limitCanvas:function(t,e){var i=this.options,r=this.containerData,n=this.canvasData,o=this.cropBoxData,s=i.viewMode,a=n.aspectRatio,l=this.cropped&&o;if(t){var h=Number(i.minCanvasWidth)||0,c=Number(i.minCanvasHeight)||0;s>1?(h=Math.max(h,r.width),c=Math.max(c,r.height),3===s&&(c*a>h?h=c*a:c=h/a)):s>0&&(h?h=Math.max(h,l?o.width:0):c?c=Math.max(c,l?o.height:0):l&&(h=o.width,(c=o.height)*a>h?h=c*a:c=h/a));var u=Zt({aspectRatio:a,width:h,height:c});h=u.width,c=u.height,n.minWidth=h,n.minHeight=c,n.maxWidth=1/0,n.maxHeight=1/0}if(e)if(s>(l?0:1)){var p=r.width-n.width,d=r.height-n.height;n.minLeft=Math.min(0,p),n.minTop=Math.min(0,d),n.maxLeft=Math.max(0,p),n.maxTop=Math.max(0,d),l&&this.limited&&(n.minLeft=Math.min(o.left,o.left+(o.width-n.width)),n.minTop=Math.min(o.top,o.top+(o.height-n.height)),n.maxLeft=o.left,n.maxTop=o.top,2===s&&(n.width>=r.width&&(n.minLeft=Math.min(0,p),n.maxLeft=Math.max(0,p)),n.height>=r.height&&(n.minTop=Math.min(0,d),n.maxTop=Math.max(0,d))))}else n.minLeft=-n.width,n.minTop=-n.height,n.maxLeft=r.width,n.maxTop=r.height},renderCanvas:function(t,e){var i=this.canvasData,r=this.imageData;if(e){var n=$t({width:r.naturalWidth*Math.abs(r.scaleX||1),height:r.naturalHeight*Math.abs(r.scaleY||1),degree:r.rotate||0}),o=n.width,s=n.height,a=i.width*(o/i.naturalWidth),l=i.height*(s/i.naturalHeight);i.left-=(a-i.width)/2,i.top-=(l-i.height)/2,i.width=a,i.height=l,i.aspectRatio=o/s,i.naturalWidth=o,i.naturalHeight=s,this.limitCanvas(!0,!1)}(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCanvas(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,At(this.canvas,St({width:i.width,height:i.height},Wt({translateX:i.left,translateY:i.top}))),this.renderImage(t),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(t){var e=this.canvasData,i=this.imageData,r=i.naturalWidth*(e.width/e.naturalWidth),n=i.naturalHeight*(e.height/e.naturalHeight);St(i,{width:r,height:n,left:(e.width-r)/2,top:(e.height-n)/2}),At(this.image,St({width:i.width,height:i.height},Wt(St({translateX:i.left,translateY:i.top},i)))),t&&this.output()},initCropBox:function(){var t=this.options,e=this.canvasData,i=t.aspectRatio||t.initialAspectRatio,r=Number(t.autoCropArea)||.8,n={width:e.width,height:e.height};i&&(e.height*i>e.width?n.height=n.width/i:n.width=n.height*i),this.cropBoxData=n,this.limitCropBox(!0,!0),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),n.width=Math.max(n.minWidth,n.width*r),n.height=Math.max(n.minHeight,n.height*r),n.left=e.left+(e.width-n.width)/2,n.top=e.top+(e.height-n.height)/2,n.oldLeft=n.left,n.oldTop=n.top,this.initialCropBoxData=St({},n)},limitCropBox:function(t,e){var i=this.options,r=this.containerData,n=this.canvasData,o=this.cropBoxData,s=this.limited,a=i.aspectRatio;if(t){var l=Number(i.minCropBoxWidth)||0,h=Number(i.minCropBoxHeight)||0,c=s?Math.min(r.width,n.width,n.width+n.left,r.width-n.left):r.width,u=s?Math.min(r.height,n.height,n.height+n.top,r.height-n.top):r.height;l=Math.min(l,r.width),h=Math.min(h,r.height),a&&(l&&h?h*a>l?h=l/a:l=h*a:l?h=l/a:h&&(l=h*a),u*a>c?u=c/a:c=u*a),o.minWidth=Math.min(l,c),o.minHeight=Math.min(h,u),o.maxWidth=c,o.maxHeight=u}e&&(s?(o.minLeft=Math.max(0,n.left),o.minTop=Math.max(0,n.top),o.maxLeft=Math.min(r.width,n.left+n.width)-o.width,o.maxTop=Math.min(r.height,n.top+n.height)-o.height):(o.minLeft=0,o.minTop=0,o.maxLeft=r.width-o.width,o.maxTop=r.height-o.height))},renderCropBox:function(){var t=this.options,e=this.containerData,i=this.cropBoxData;(i.width>i.maxWidth||i.width<i.minWidth)&&(i.left=i.oldLeft),(i.height>i.maxHeight||i.height<i.minHeight)&&(i.top=i.oldTop),i.width=Math.min(Math.max(i.width,i.minWidth),i.maxWidth),i.height=Math.min(Math.max(i.height,i.minHeight),i.maxHeight),this.limitCropBox(!1,!0),i.left=Math.min(Math.max(i.left,i.minLeft),i.maxLeft),i.top=Math.min(Math.max(i.top,i.minTop),i.maxTop),i.oldLeft=i.left,i.oldTop=i.top,t.movable&&t.cropBoxMovable&&zt(this.face,N,i.width>=e.width&&i.height>=e.height?w:y),At(this.cropBox,St({width:i.width,height:i.height},Wt({translateX:i.left,translateY:i.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Bt(this.element,L,this.getData())}},se={initPreview:function(){var t=this.element,e=this.crossOrigin,i=this.options.preview,r=e?this.crossOriginUrl:this.url,n=t.alt||"The image to preview",o=document.createElement("img");if(e&&(o.crossOrigin=e),o.src=r,o.alt=n,this.viewBox.appendChild(o),this.viewBoxImage=o,i){var s=i;"string"==typeof i?s=t.ownerDocument.querySelectorAll(i):i.querySelector&&(s=[i]),this.previews=s,wt(s,(function(t){var i=document.createElement("img");zt(t,F,{width:t.offsetWidth,height:t.offsetHeight,html:t.innerHTML}),e&&(i.crossOrigin=e),i.src=r,i.alt=n,i.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',t.innerHTML="",t.appendChild(i)}))}},resetPreview:function(){wt(this.previews,(function(t){var e=Mt(t,F);At(t,{width:e.width,height:e.height}),t.innerHTML=e.html,Tt(t,F)}))},preview:function(){var t=this.imageData,e=this.canvasData,i=this.cropBoxData,r=i.width,n=i.height,o=t.width,s=t.height,a=i.left-e.left-t.left,l=i.top-e.top-t.top;this.cropped&&!this.disabled&&(At(this.viewBoxImage,St({width:o,height:s},Wt(St({translateX:-a,translateY:-l},t)))),wt(this.previews,(function(e){var i=Mt(e,F),h=i.width,c=i.height,u=h,p=c,d=1;r&&(p=n*(d=h/r)),n&&p>c&&(u=r*(d=c/n),p=c),At(e,{width:u,height:p}),At(e.getElementsByTagName("img")[0],St({width:o*d,height:s*d},Wt(St({translateX:-a*d,translateY:-l*d},t))))})))}},ae={bind:function(){var t=this.element,e=this.options,i=this.cropper;vt(e.cropstart)&&Ft(t,W,e.cropstart),vt(e.cropmove)&&Ft(t,V,e.cropmove),vt(e.cropend)&&Ft(t,q,e.cropend),vt(e.crop)&&Ft(t,L,e.crop),vt(e.zoom)&&Ft(t,it,e.zoom),Ft(i,$,this.onCropStart=this.cropStart.bind(this)),e.zoomable&&e.zoomOnWheel&&Ft(i,et,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Ft(i,K,this.onDblclick=this.dblclick.bind(this)),Ft(t.ownerDocument,Q,this.onCropMove=this.cropMove.bind(this)),Ft(t.ownerDocument,G,this.onCropEnd=this.cropEnd.bind(this)),e.responsive&&Ft(window,tt,this.onResize=this.resize.bind(this))},unbind:function(){var t=this.element,e=this.options,i=this.cropper;vt(e.cropstart)&&Nt(t,W,e.cropstart),vt(e.cropmove)&&Nt(t,V,e.cropmove),vt(e.cropend)&&Nt(t,q,e.cropend),vt(e.crop)&&Nt(t,L,e.crop),vt(e.zoom)&&Nt(t,it,e.zoom),Nt(i,$,this.onCropStart),e.zoomable&&e.zoomOnWheel&&Nt(i,et,this.onWheel,{passive:!1,capture:!0}),e.toggleDragModeOnDblclick&&Nt(i,K,this.onDblclick),Nt(t.ownerDocument,Q,this.onCropMove),Nt(t.ownerDocument,G,this.onCropEnd),e.responsive&&Nt(window,tt,this.onResize)}},le={resize:function(){if(!this.disabled){var t,e,i=this.options,r=this.container,n=this.containerData,o=r.offsetWidth/n.width;1===o&&r.offsetHeight===n.height||(i.restore&&(t=this.getCanvasData(),e=this.getCropBoxData()),this.render(),i.restore&&(this.setCanvasData(wt(t,(function(e,i){t[i]=e*o}))),this.setCropBoxData(wt(e,(function(t,i){e[i]=t*o})))))}},dblclick:function(){this.disabled||this.options.dragMode===j||this.setDragMode(Rt(this.dragBox,E)?H:B)},wheel:function(t){var e=this,i=Number(this.options.wheelZoomRatio)||.1,r=1;this.disabled||(t.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout((function(){e.wheeling=!1}),50),t.deltaY?r=t.deltaY>0?1:-1:t.wheelDelta?r=-t.wheelDelta/120:t.detail&&(r=t.detail>0?1:-1),this.zoom(-r*i,t)))},cropStart:function(t){var e=t.buttons,i=t.button;if(!(this.disabled||("mousedown"===t.type||"pointerdown"===t.type&&"mouse"===t.pointerType)&&(ut(e)&&1!==e||ut(i)&&0!==i||t.ctrlKey))){var r,n=this.options,o=this.pointers;t.changedTouches?wt(t.changedTouches,(function(t){o[t.identifier]=Yt(t)})):o[t.pointerId||0]=Yt(t),r=Object.keys(o).length>1&&n.zoomable&&n.zoomOnTouch?S:Mt(t.target,N),nt.test(r)&&!1!==Bt(this.element,W,{originalEvent:t,action:r})&&(t.preventDefault(),this.action=r,this.cropping=!1,r===b&&(this.cropping=!0,_t(this.dragBox,D)))}},cropMove:function(t){var e=this.action;if(!this.disabled&&e){var i=this.pointers;t.preventDefault(),!1!==Bt(this.element,V,{originalEvent:t,action:e})&&(t.changedTouches?wt(t.changedTouches,(function(t){St(i[t.identifier]||{},Yt(t,!0))})):St(i[t.pointerId||0]||{},Yt(t,!0)),this.change(t))}},cropEnd:function(t){if(!this.disabled){var e=this.action,i=this.pointers;t.changedTouches?wt(t.changedTouches,(function(t){delete i[t.identifier]})):delete i[t.pointerId||0],e&&(t.preventDefault(),Object.keys(i).length||(this.action=""),this.cropping&&(this.cropping=!1,Ot(this.dragBox,D,this.cropped&&this.options.modal)),Bt(this.element,q,{originalEvent:t,action:e}))}}},he={change:function(t){var e,i=this.options,r=this.canvasData,n=this.containerData,o=this.cropBoxData,s=this.pointers,a=this.action,l=i.aspectRatio,h=o.left,c=o.top,u=o.width,p=o.height,d=h+u,f=c+p,m=0,g=0,v=n.width,E=n.height,U=!0;!l&&t.shiftKey&&(l=u&&p?u/p:1),this.limited&&(m=o.minLeft,g=o.minTop,v=m+Math.min(n.width,r.width,r.left+r.width),E=g+Math.min(n.height,r.height,r.top+r.height));var z=s[Object.keys(s)[0]],T={x:z.endX-z.startX,y:z.endY-z.startY},D=function(t){switch(t){case P:d+T.x>v&&(T.x=v-d);break;case x:h+T.x<m&&(T.x=m-h);break;case A:c+T.y<g&&(T.y=g-c);break;case C:f+T.y>E&&(T.y=E-f)}};switch(a){case y:h+=T.x,c+=T.y;break;case P:if(T.x>=0&&(d>=v||l&&(c<=g||f>=E))){U=!1;break}D(P),(u+=T.x)<0&&(a=x,h-=u=-u),l&&(p=u/l,c+=(o.height-p)/2);break;case A:if(T.y<=0&&(c<=g||l&&(h<=m||d>=v))){U=!1;break}D(A),p-=T.y,c+=T.y,p<0&&(a=C,c-=p=-p),l&&(u=p*l,h+=(o.width-u)/2);break;case x:if(T.x<=0&&(h<=m||l&&(c<=g||f>=E))){U=!1;break}D(x),u-=T.x,h+=T.x,u<0&&(a=P,h-=u=-u),l&&(p=u/l,c+=(o.height-p)/2);break;case C:if(T.y>=0&&(f>=E||l&&(h<=m||d>=v))){U=!1;break}D(C),(p+=T.y)<0&&(a=A,c-=p=-p),l&&(u=p*l,h+=(o.width-u)/2);break;case R:if(l){if(T.y<=0&&(c<=g||d>=v)){U=!1;break}D(A),p-=T.y,c+=T.y,u=p*l}else D(A),D(P),T.x>=0?d<v?u+=T.x:T.y<=0&&c<=g&&(U=!1):u+=T.x,T.y<=0?c>g&&(p-=T.y,c+=T.y):(p-=T.y,c+=T.y);u<0&&p<0?(a=O,c-=p=-p,h-=u=-u):u<0?(a=_,h-=u=-u):p<0&&(a=k,c-=p=-p);break;case _:if(l){if(T.y<=0&&(c<=g||h<=m)){U=!1;break}D(A),p-=T.y,c+=T.y,u=p*l,h+=o.width-u}else D(A),D(x),T.x<=0?h>m?(u-=T.x,h+=T.x):T.y<=0&&c<=g&&(U=!1):(u-=T.x,h+=T.x),T.y<=0?c>g&&(p-=T.y,c+=T.y):(p-=T.y,c+=T.y);u<0&&p<0?(a=k,c-=p=-p,h-=u=-u):u<0?(a=R,h-=u=-u):p<0&&(a=O,c-=p=-p);break;case O:if(l){if(T.x<=0&&(h<=m||f>=E)){U=!1;break}D(x),u-=T.x,h+=T.x,p=u/l}else D(C),D(x),T.x<=0?h>m?(u-=T.x,h+=T.x):T.y>=0&&f>=E&&(U=!1):(u-=T.x,h+=T.x),T.y>=0?f<E&&(p+=T.y):p+=T.y;u<0&&p<0?(a=R,c-=p=-p,h-=u=-u):u<0?(a=k,h-=u=-u):p<0&&(a=_,c-=p=-p);break;case k:if(l){if(T.x>=0&&(d>=v||f>=E)){U=!1;break}D(P),p=(u+=T.x)/l}else D(C),D(P),T.x>=0?d<v?u+=T.x:T.y>=0&&f>=E&&(U=!1):u+=T.x,T.y>=0?f<E&&(p+=T.y):p+=T.y;u<0&&p<0?(a=_,c-=p=-p,h-=u=-u):u<0?(a=O,h-=u=-u):p<0&&(a=R,c-=p=-p);break;case w:this.move(T.x,T.y),U=!1;break;case S:this.zoom(Kt(s),t),U=!1;break;case b:if(!T.x||!T.y){U=!1;break}e=Ht(this.cropper),h=z.startX-e.left,c=z.startY-e.top,u=o.minWidth,p=o.minHeight,T.x>0?a=T.y>0?k:R:T.x<0&&(h-=u,a=T.y>0?O:_),T.y<0&&(c-=p),this.cropped||(kt(this.cropBox,M),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0))}U&&(o.width=u,o.height=p,o.left=h,o.top=c,this.action=a,this.renderCropBox()),wt(s,(function(t){t.startX=t.endX,t.startY=t.endY}))}},ce={crop:function(){return!this.ready||this.cropped||this.disabled||(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&_t(this.dragBox,D),kt(this.cropBox,M),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=St({},this.initialImageData),this.canvasData=St({},this.initialCanvasData),this.cropBoxData=St({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(St(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),kt(this.dragBox,D),_t(this.cropBox,M)),this},replace:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.disabled&&t&&(this.isImg&&(this.element.src=t),e?(this.url=t,this.image.src=t,this.ready&&(this.viewBoxImage.src=t,wt(this.previews,(function(e){e.getElementsByTagName("img")[0].src=t})))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(t))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,kt(this.cropper,U)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,_t(this.cropper,U)),this},destroy:function(){var t=this.element;return t[v]?(t[v]=void 0,this.isImg&&this.replaced&&(t.src=this.originalUrl),this.uncreate(),this):this},move:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,r=i.left,n=i.top;return this.moveTo(dt(t)?t:r+Number(t),dt(e)?e:n+Number(e))},moveTo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.canvasData,r=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.movable&&(ut(t)&&(i.left=t,r=!0),ut(e)&&(i.top=e,r=!0),r&&this.renderCanvas(!0)),this},zoom:function(t,e){var i=this.canvasData;return t=(t=Number(t))<0?1/(1-t):1+t,this.zoomTo(i.width*t/i.naturalWidth,null,e)},zoomTo:function(t,e,i){var r=this.options,n=this.canvasData,o=n.width,s=n.height,a=n.naturalWidth,l=n.naturalHeight;if((t=Number(t))>=0&&this.ready&&!this.disabled&&r.zoomable){var h=a*t,c=l*t;if(!1===Bt(this.element,it,{ratio:t,oldRatio:o/a,originalEvent:i}))return this;if(i){var u=this.pointers,p=Ht(this.cropper),d=u&&Object.keys(u).length?Xt(u):{pageX:i.pageX,pageY:i.pageY};n.left-=(h-o)*((d.pageX-p.left-n.left)/o),n.top-=(c-s)*((d.pageY-p.top-n.top)/s)}else gt(e)&&ut(e.x)&&ut(e.y)?(n.left-=(h-o)*((e.x-n.left)/o),n.top-=(c-s)*((e.y-n.top)/s)):(n.left-=(h-o)/2,n.top-=(c-s)/2);n.width=h,n.height=c,this.renderCanvas(!0)}return this},rotate:function(t){return this.rotateTo((this.imageData.rotate||0)+Number(t))},rotateTo:function(t){return ut(t=Number(t))&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=t%360,this.renderCanvas(!0,!0)),this},scaleX:function(t){var e=this.imageData.scaleY;return this.scale(t,ut(e)?e:1)},scaleY:function(t){var e=this.imageData.scaleX;return this.scale(ut(e)?e:1,t)},scale:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,i=this.imageData,r=!1;return t=Number(t),e=Number(e),this.ready&&!this.disabled&&this.options.scalable&&(ut(t)&&(i.scaleX=t,r=!0),ut(e)&&(i.scaleY=e,r=!0),r&&this.renderCanvas(!0,!0)),this},getData:function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.options,r=this.imageData,n=this.canvasData,o=this.cropBoxData;if(this.ready&&this.cropped){t={x:o.left-n.left,y:o.top-n.top,width:o.width,height:o.height};var s=r.width/r.naturalWidth;if(wt(t,(function(e,i){t[i]=e/s})),e){var a=Math.round(t.y+t.height),l=Math.round(t.x+t.width);t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=l-t.x,t.height=a-t.y}}else t={x:0,y:0,width:0,height:0};return i.rotatable&&(t.rotate=r.rotate||0),i.scalable&&(t.scaleX=r.scaleX||1,t.scaleY=r.scaleY||1),t},setData:function(t){var e=this.options,i=this.imageData,r=this.canvasData,n={};if(this.ready&&!this.disabled&&gt(t)){var o=!1;e.rotatable&&ut(t.rotate)&&t.rotate!==i.rotate&&(i.rotate=t.rotate,o=!0),e.scalable&&(ut(t.scaleX)&&t.scaleX!==i.scaleX&&(i.scaleX=t.scaleX,o=!0),ut(t.scaleY)&&t.scaleY!==i.scaleY&&(i.scaleY=t.scaleY,o=!0)),o&&this.renderCanvas(!0,!0);var s=i.width/i.naturalWidth;ut(t.x)&&(n.left=t.x*s+r.left),ut(t.y)&&(n.top=t.y*s+r.top),ut(t.width)&&(n.width=t.width*s),ut(t.height)&&(n.height=t.height*s),this.setCropBoxData(n)}return this},getContainerData:function(){return this.ready?St({},this.containerData):{}},getImageData:function(){return this.sized?St({},this.imageData):{}},getCanvasData:function(){var t=this.canvasData,e={};return this.ready&&wt(["left","top","width","height","naturalWidth","naturalHeight"],(function(i){e[i]=t[i]})),e},setCanvasData:function(t){var e=this.canvasData,i=e.aspectRatio;return this.ready&&!this.disabled&&gt(t)&&(ut(t.left)&&(e.left=t.left),ut(t.top)&&(e.top=t.top),ut(t.width)?(e.width=t.width,e.height=t.width/i):ut(t.height)&&(e.height=t.height,e.width=t.height*i),this.renderCanvas(!0)),this},getCropBoxData:function(){var t,e=this.cropBoxData;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(t){var e,i,r=this.cropBoxData,n=this.options.aspectRatio;return this.ready&&this.cropped&&!this.disabled&&gt(t)&&(ut(t.left)&&(r.left=t.left),ut(t.top)&&(r.top=t.top),ut(t.width)&&t.width!==r.width&&(e=!0,r.width=t.width),ut(t.height)&&t.height!==r.height&&(i=!0,r.height=t.height),n&&(e?r.height=r.width/n:i&&(r.width=r.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var e=this.canvasData,i=Qt(this.image,this.imageData,e,t);if(!this.cropped)return i;var r=this.getData(),n=r.x,o=r.y,s=r.width,l=r.height,h=i.width/Math.floor(e.naturalWidth);1!==h&&(n*=h,o*=h,s*=h,l*=h);var c=s/l,u=Zt({aspectRatio:c,width:t.maxWidth||1/0,height:t.maxHeight||1/0}),p=Zt({aspectRatio:c,width:t.minWidth||0,height:t.minHeight||0},"cover"),d=Zt({aspectRatio:c,width:t.width||(1!==h?i.width:s),height:t.height||(1!==h?i.height:l)}),f=d.width,m=d.height;f=Math.min(u.width,Math.max(p.width,f)),m=Math.min(u.height,Math.max(p.height,m));var g=document.createElement("canvas"),v=g.getContext("2d");g.width=xt(f),g.height=xt(m),v.fillStyle=t.fillColor||"transparent",v.fillRect(0,0,f,m);var y=t.imageSmoothingEnabled,b=void 0===y||y,w=t.imageSmoothingQuality;v.imageSmoothingEnabled=b,w&&(v.imageSmoothingQuality=w);var S,P,x,C,A,R,_=i.width,k=i.height,O=n,E=o;O<=-s||O>_?(O=0,S=0,x=0,A=0):O<=0?(x=-O,O=0,A=S=Math.min(_,s+O)):O<=_&&(x=0,A=S=Math.min(s,_-O)),S<=0||E<=-l||E>k?(E=0,P=0,C=0,R=0):E<=0?(C=-E,E=0,R=P=Math.min(k,l+E)):E<=k&&(C=0,R=P=Math.min(l,k-E));var U=[O,E,S,P];if(A>0&&R>0){var M=f/s;U.push(x*M,C*M,A*M,R*M)}return v.drawImage.apply(v,[i].concat(a(U.map((function(t){return Math.floor(xt(t))}))))),g},setAspectRatio:function(t){var e=this.options;return this.disabled||dt(t)||(e.aspectRatio=Math.max(0,t)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(t){var e=this.options,i=this.dragBox,r=this.face;if(this.ready&&!this.disabled){var n=t===B,o=e.movable&&t===H;t=n||o?t:j,e.dragMode=t,zt(i,N,t),Ot(i,E,n),Ot(i,I,o),e.cropBoxMovable||(zt(r,N,t),Ot(r,E,n),Ot(r,I,o))}return this}},ue=f.Cropper,pe=function(){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e(this,t),!i||!at.test(i.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=i,this.options=St({},lt,gt(r)&&r),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return r(t,[{key:"init",value:function(){var t,e=this.element,i=e.tagName.toLowerCase();if(!e[v]){if(e[v]=this,"img"===i){if(this.isImg=!0,t=e.getAttribute("src")||"",this.originalUrl=t,!t)return;t=e.src}else"canvas"===i&&window.HTMLCanvasElement&&(t=e.toDataURL());this.load(t)}}},{key:"load",value:function(t){var e=this;if(t){this.url=t,this.imageData={};var i=this.element,r=this.options;if(r.rotatable||r.scalable||(r.checkOrientation=!1),r.checkOrientation&&window.ArrayBuffer)if(ot.test(t))st.test(t)?this.read(ee(t)):this.clone();else{var n=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=n,n.onabort=o,n.onerror=o,n.ontimeout=o,n.onprogress=function(){n.getResponseHeader("content-type")!==rt&&n.abort()},n.onload=function(){e.read(n.response)},n.onloadend=function(){e.reloading=!1,e.xhr=null},r.checkCrossOrigin&&qt(t)&&i.crossOrigin&&(t=Vt(t)),n.open("GET",t),n.responseType="arraybuffer",n.withCredentials="use-credentials"===i.crossOrigin,n.send()}else this.clone()}}},{key:"read",value:function(t){var e=this.options,i=this.imageData,r=re(t),n=0,o=1,s=1;if(r>1){this.url=ie(t,rt);var a=ne(r);n=a.rotate,o=a.scaleX,s=a.scaleY}e.rotatable&&(i.rotate=n),e.scalable&&(i.scaleX=o,i.scaleY=s),this.clone()}},{key:"clone",value:function(){var t=this.element,e=this.url,i=t.crossOrigin,r=e;this.options.checkCrossOrigin&&qt(e)&&(i||(i="anonymous"),r=Vt(e)),this.crossOrigin=i,this.crossOriginUrl=r;var n=document.createElement("img");i&&(n.crossOrigin=i),n.src=r||e,n.alt=t.alt||"The image to crop",this.image=n,n.onload=this.start.bind(this),n.onerror=this.stop.bind(this),_t(n,z),t.parentNode.insertBefore(n,t.nextSibling)}},{key:"start",value:function(){var t=this,e=this.image;e.onload=null,e.onerror=null,this.sizing=!0;var i=f.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(f.navigator.userAgent),r=function(e,i){St(t.imageData,{naturalWidth:e,naturalHeight:i,aspectRatio:e/i}),t.sizing=!1,t.sized=!0,t.build()};if(!e.naturalWidth||i){var n=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=n,n.onload=function(){r(n.width,n.height),i||o.removeChild(n)},n.src=e.src,i||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(n))}else r(e.naturalWidth,e.naturalHeight)}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(this.sized&&!this.ready){var t=this.element,e=this.options,i=this.image,r=t.parentNode,n=document.createElement("div");n.innerHTML=ht;var o=n.querySelector(".".concat(v,"-container")),s=o.querySelector(".".concat(v,"-canvas")),a=o.querySelector(".".concat(v,"-drag-box")),l=o.querySelector(".".concat(v,"-crop-box")),h=l.querySelector(".".concat(v,"-face"));this.container=r,this.cropper=o,this.canvas=s,this.dragBox=a,this.cropBox=l,this.viewBox=o.querySelector(".".concat(v,"-view-box")),this.face=h,s.appendChild(i),_t(t,M),r.insertBefore(o,t.nextSibling),this.isImg||kt(i,z),this.initPreview(),this.bind(),e.initialAspectRatio=Math.max(0,e.initialAspectRatio)||NaN,e.aspectRatio=Math.max(0,e.aspectRatio)||NaN,e.viewMode=Math.max(0,Math.min(3,Math.round(e.viewMode)))||0,_t(l,M),e.guides||_t(l.getElementsByClassName("".concat(v,"-dashed")),M),e.center||_t(l.getElementsByClassName("".concat(v,"-center")),M),e.background&&_t(o,"".concat(v,"-bg")),e.highlight||_t(h,T),e.cropBoxMovable&&(_t(h,I),zt(h,N,y)),e.cropBoxResizable||(_t(l.getElementsByClassName("".concat(v,"-line")),M),_t(l.getElementsByClassName("".concat(v,"-point")),M)),this.render(),this.ready=!0,this.setDragMode(e.dragMode),e.autoCrop&&this.crop(),this.setData(e.data),vt(e.ready)&&Ft(t,J,e.ready,{once:!0}),Bt(t,J)}}},{key:"unbuild",value:function(){this.ready&&(this.ready=!1,this.unbind(),this.resetPreview(),this.cropper.parentNode.removeChild(this.cropper),kt(this.element,M))}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=ue,t}},{key:"setDefaults",value:function(t){St(lt,gt(t)&&t)}}]),t}();return St(pe.prototype,oe,se,ae,le,he,ce),pe}()},7129:(t,e)=>{"use strict";var i=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return null}}function n(t){try{return encodeURIComponent(t)}catch(e){return null}}e.stringify=function(t,e){e=e||"";var r,o,s=[];for(o in"string"!=typeof e&&(e="?"),t)if(i.call(t,o)){if((r=t[o])||null!=r&&!isNaN(r)||(r=""),o=n(o),r=n(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?e+s.join("&"):""},e.parse=function(t){for(var e,i=/([^=?#&]+)=?([^&]*)/g,n={};e=i.exec(t);){var o=r(e[1]),s=r(e[2]);null===o||null===s||o in n||(n[o]=s)}return n}},7851:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},4564:(t,e,i)=>{"use strict";var r=i(7851),n=i(7129),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function u(t){return(t||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(t,e){return m(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function f(t){var e,r=("undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{}).location||{},n={},o=typeof(t=t||r);if("blob:"===t.protocol)n=new v(unescape(t.pathname),{});else if("string"===o)for(e in n=new v(t,{}),d)delete n[e];else if("object"===o){for(e in t)e in d||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=a.test(t.href))}return n}function m(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function g(t,e){t=(t=u(t)).replace(s,""),e=e||{};var i,r=h.exec(t),n=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],l=0;return o?a?(i=r[2]+r[3]+r[4],l=r[2].length+r[3].length):(i=r[2]+r[4],l=r[2].length):a?(i=r[3]+r[4],l=r[3].length):i=r[4],"file:"===n?l>=2&&(i=i.slice(2)):m(n)?i=r[4]:n?o&&(i=i.slice(2)):l>=2&&m(e.protocol)&&(i=r[4]),{protocol:n,slashes:o||m(n),slashesCount:l,rest:i}}function v(t,e,i){if(t=(t=u(t)).replace(s,""),!(this instanceof v))return new v(t,e,i);var o,a,l,h,d,y,b=p.slice(),w=typeof e,S=this,P=0;for("object"!==w&&"string"!==w&&(i=e,e=null),i&&"function"!=typeof i&&(i=n.parse),o=!(a=g(t||"",e=f(e))).protocol&&!a.slashes,S.slashes=a.slashes||o&&e.slashes,S.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||c.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!m(S.protocol)))&&(b[3]=[/(.*)/,"pathname"]);P<b.length;P++)"function"!=typeof(h=b[P])?(l=h[0],y=h[1],l!=l?S[y]=t:"string"==typeof l?~(d="@"===l?t.lastIndexOf(l):t.indexOf(l))&&("number"==typeof h[2]?(S[y]=t.slice(0,d),t=t.slice(d+h[2])):(S[y]=t.slice(d),t=t.slice(0,d))):(d=l.exec(t))&&(S[y]=d[1],t=t.slice(0,d.index)),S[y]=S[y]||o&&h[3]&&e[y]||"",h[4]&&(S[y]=S[y].toLowerCase())):t=h(t,S);i&&(S.query=i(S.query)),o&&e.slashes&&"/"!==S.pathname.charAt(0)&&(""!==S.pathname||""!==e.pathname)&&(S.pathname=function(t,e){if(""===t)return e;for(var i=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=i.length,n=i[r-1],o=!1,s=0;r--;)"."===i[r]?i.splice(r,1):".."===i[r]?(i.splice(r,1),s++):s&&(0===r&&(o=!0),i.splice(r,1),s--);return o&&i.unshift(""),"."!==n&&".."!==n||i.push(""),i.join("/")}(S.pathname,e.pathname)),"/"!==S.pathname.charAt(0)&&m(S.protocol)&&(S.pathname="/"+S.pathname),r(S.port,S.protocol)||(S.host=S.hostname,S.port=""),S.username=S.password="",S.auth&&(~(d=S.auth.indexOf(":"))?(S.username=S.auth.slice(0,d),S.username=encodeURIComponent(decodeURIComponent(S.username)),S.password=S.auth.slice(d+1),S.password=encodeURIComponent(decodeURIComponent(S.password))):S.username=encodeURIComponent(decodeURIComponent(S.auth)),S.auth=S.password?S.username+":"+S.password:S.username),S.origin="file:"!==S.protocol&&m(S.protocol)&&S.host?S.protocol+"//"+S.host:"null",S.href=S.toString()}v.prototype={set:function(t,e,i){var o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(i||n.parse)(e)),o[t]=e;break;case"port":o[t]=e,r(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,l.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!i;break;case"pathname":case"hash":if(e){var s="pathname"===t?"/":"#";o[t]=e.charAt(0)!==s?s+e:e}else o[t]=e;break;case"username":case"password":o[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(o.username=e.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=e.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(e))}for(var h=0;h<p.length;h++){var c=p[h];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(t){t&&"function"==typeof t||(t=n.stringify);var e,i=this,r=i.host,o=i.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(i.protocol&&i.slashes||m(i.protocol)?"//":"");return i.username?(s+=i.username,i.password&&(s+=":"+i.password),s+="@"):i.password?(s+=":"+i.password,s+="@"):"file:"!==i.protocol&&m(i.protocol)&&!r&&"/"!==i.pathname&&(s+="@"),(":"===r[r.length-1]||l.test(i.hostname)&&!i.port)&&(r+=":"),s+=r+i.pathname,(e="object"==typeof i.query?t(i.query):i.query)&&(s+="?"!==e.charAt(0)?"?"+e:e),i.hash&&(s+=i.hash),s}},v.extractProtocol=g,v.location=f,v.trimLeft=u,v.qs=n,t.exports=v},6682:(t,e,i)=>{"use strict";i.d(e,{Z:()=>ht});var r=i(6400),n=i(7709),o=i(7817);var s,a,l,h,c=0,u=[],p=[],d=r.YM.__b,f=r.YM.__r,m=r.YM.diffed,g=r.YM.__c,v=r.YM.unmount;function y(t,e){r.YM.__h&&r.YM.__h(a,t,c||e),c=0;var i=a.__H||(a.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({__V:p}),i.__[t]}function b(t,e){var i=y(s++,3);!r.YM.__s&&_(i.__H,e)&&(i.__=t,i.i=e,a.__H.__h.push(i))}function w(t){return c=5,S((function(){return{current:t}}),[])}function S(t,e){var i=y(s++,7);return _(i.__H,e)?(i.__V=t(),i.i=e,i.__h=t,i.__V):i.__}function P(){for(var t;t=u.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(A),t.__H.__h.forEach(R),t.__H.__h=[]}catch(a){t.__H.__h=[],r.YM.__e(a,t.__v)}}r.YM.__b=function(t){a=null,d&&d(t)},r.YM.__r=function(t){f&&f(t),s=0;var e=(a=t.__c).__H;e&&(l===a?(e.__h=[],a.__h=[],e.__.forEach((function(t){t.__N&&(t.__=t.__N),t.__V=p,t.__N=t.i=void 0}))):(e.__h.forEach(A),e.__h.forEach(R),e.__h=[])),l=a},r.YM.diffed=function(t){m&&m(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(1!==u.push(e)&&h===r.YM.requestAnimationFrame||((h=r.YM.requestAnimationFrame)||C)(P)),e.__H.__.forEach((function(t){t.i&&(t.__H=t.i),t.__V!==p&&(t.__=t.__V),t.i=void 0,t.__V=p}))),l=a=null},r.YM.__c=function(t,e){e.some((function(t){try{t.__h.forEach(A),t.__h=t.__h.filter((function(t){return!t.__||R(t)}))}catch(l){e.some((function(t){t.__h&&(t.__h=[])})),e=[],r.YM.__e(l,t.__v)}})),g&&g(t,e)},r.YM.unmount=function(t){v&&v(t);var e,i=t.__c;i&&i.__H&&(i.__H.__.forEach((function(t){try{A(t)}catch(t){e=t}})),i.__H=void 0,e&&r.YM.__e(e,i.__v))};var x="function"==typeof requestAnimationFrame;function C(t){var e,i=function(){clearTimeout(r),x&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(i,100);x&&(e=requestAnimationFrame(i))}function A(t){var e=a,i=t.__c;"function"==typeof i&&(t.__c=void 0,i()),a=e}function R(t){var e=a;t.__c=t.__(),a=e}function _(t,e){return!t||t.length!==e.length||e.some((function(e,i){return e!==t[i]}))}function k(t){let{recording:e,onStartRecording:i,onStopRecording:n,i18n:o}=t;return e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:o("stopAudioRecording"),"aria-label":o("stopAudioRecording"),onClick:n,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:o("startAudioRecording"),"aria-label":o("startAudioRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14px",height:"20px",viewBox:"0 0 14 20"},(0,r.h)("path",{d:"M7 14c2.21 0 4-1.71 4-3.818V3.818C11 1.71 9.21 0 7 0S3 1.71 3 3.818v6.364C3 12.29 4.79 14 7 14zm6.364-7h-.637a.643.643 0 0 0-.636.65V9.6c0 3.039-2.565 5.477-5.6 5.175-2.645-.264-4.582-2.692-4.582-5.407V7.65c0-.36-.285-.65-.636-.65H.636A.643.643 0 0 0 0 7.65v1.631c0 3.642 2.544 6.888 6.045 7.382v1.387H3.818a.643.643 0 0 0-.636.65v.65c0 .36.285.65.636.65h6.364c.351 0 .636-.29.636-.65v-.65c0-.36-.285-.65-.636-.65H7.955v-1.372C11.363 16.2 14 13.212 14 9.6V7.65c0-.36-.285-.65-.636-.65z",fill:"#FFF","fill-rule":"nonzero"})))}function O(t){let{recordingLengthSeconds:e,i18n:i}=t;const n=(o=e,`${Math.floor(o/60)}:${String(o%60).padStart(2,0)}`);var o;return(0,r.h)("span",{"aria-label":i("recordingLength",{recording_length:n})},n)}const E=t=>{let{currentDeviceId:e,audioSources:i,onChangeSource:n}=t;return(0,r.h)("div",{className:"uppy-Audio-videoSource"},(0,r.h)("select",{className:"uppy-u-reset uppy-Audio-audioSource-select",onChange:t=>{n(t.target.value)}},i.map((t=>(0,r.h)("option",{key:t.deviceId,value:t.deviceId,selected:t.deviceId===e},t.label)))))};var U=0;function M(t){return"__private_"+U+++"_"+t}function z(t){return"function"==typeof t}function T(t){return z(t)?t():t}var D=M("draw");class I{constructor(t,e){void 0===e&&(e={}),Object.defineProperty(this,D,{writable:!0,value:()=>this.draw()});const i=e.canvas||{},r=e.canvasContext||{};this.analyser=null,this.bufferLength=0,this.dataArray=[],this.canvas=t,this.width=T(i.width)||this.canvas.width,this.height=T(i.height)||this.canvas.height,this.canvas.width=this.width,this.canvas.height=this.height,this.canvasContext=this.canvas.getContext("2d"),this.canvasContext.fillStyle=T(r.fillStyle)||"rgb(255, 255, 255)",this.canvasContext.strokeStyle=T(r.strokeStyle)||"rgb(0, 0, 0)",this.canvasContext.lineWidth=T(r.lineWidth)||1,this.onDrawFrame=z(e.onDrawFrame)?e.onDrawFrame:()=>{}}addSource(t){this.streamSource=t,this.audioContext=this.streamSource.context,this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=2048,this.bufferLength=this.analyser.frequencyBinCount,this.source=this.audioContext.createBufferSource(),this.dataArray=new Uint8Array(this.bufferLength),this.analyser.getByteTimeDomainData(this.dataArray),this.streamSource.connect(this.analyser)}draw(){const{analyser:t,dataArray:e,bufferLength:i}=this,r=this.canvasContext,n=this.width,o=this.height;t&&t.getByteTimeDomainData(e),r.fillRect(0,0,n,o),r.beginPath();const s=1*n/i;let a=0;i||r.moveTo(0,this.height/2);for(let l=0;l<i;l++){const t=e[l]/128*(o/2);0===l?r.moveTo(a,t):r.lineTo(a,t),a+=s}r.lineTo(n,o/2),r.stroke(),this.onDrawFrame(this),requestAnimationFrame(function(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}(this,D)[D])}}const N=function(t){let{onSubmit:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button uppy-Audio-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onClick:e,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};const F=function(t){let{onDiscard:e,i18n:i}=t;return(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Audio-button",type:"button",title:i("discardRecordedFile"),"aria-label":i("discardRecordedFile"),onClick:e,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"uppy-c-icon"},(0,r.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,r.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,r.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function B(t){const{stream:e,recordedAudio:i,onStop:n,recording:o,supportsRecording:s,audioSources:a,showAudioSourceDropdown:l,onSubmit:h,i18n:c,onStartRecording:u,onStopRecording:p,onDiscardRecordedAudio:d,recordingLengthSeconds:f}=t,m=w(null),g=w(null);b((()=>()=>{g.current=null,n()}),[n]),b((()=>{if(!i&&(g.current=new I(m.current,{canvas:{width:600,height:600},canvasContext:{lineWidth:2,fillStyle:"rgb(0,0,0)",strokeStyle:"green"}}),g.current.draw(),e)){const t=(new AudioContext).createMediaStreamSource(e);g.current.addSource(t)}}),[i,e]);const v=null!=i,y=!v&&s,S=l&&!v&&a&&a.length>1;return(0,r.h)("div",{className:"uppy-Audio-container"},(0,r.h)("div",{className:"uppy-Audio-audioContainer"},v?(0,r.h)("audio",{className:"uppy-Audio-player",controls:!0,src:i}):(0,r.h)("canvas",{ref:m,className:"uppy-Audio-canvas"})),(0,r.h)("div",{className:"uppy-Audio-footer"},(0,r.h)("div",{className:"uppy-Audio-audioSourceContainer"},S?E(t):null),(0,r.h)("div",{className:"uppy-Audio-buttonContainer"},y&&(0,r.h)(k,{recording:o,onStartRecording:u,onStopRecording:p,i18n:c}),v&&(0,r.h)(N,{onSubmit:h,i18n:c}),v&&(0,r.h)(F,{onDiscard:d,i18n:c})),(0,r.h)("div",{className:"uppy-Audio-recordingLength"},!v&&(0,r.h)(O,{recordingLengthSeconds:f,i18n:c}))))}const H=t=>{const{icon:e,hasAudio:i,i18n:n}=t;return(0,r.h)("div",{className:"uppy-Audio-permissons"},(0,r.h)("div",{className:"uppy-Audio-permissonsIcon"},e()),(0,r.h)("h1",{className:"uppy-Audio-title"},n(i?"allowAudioAccessTitle":"noAudioTitle")),(0,r.h)("p",null,n(i?"allowAudioAccessDescription":"noAudioDescription")))},j={strings:{pluginNameAudio:"Audio",startAudioRecording:"Begin audio recording",stopAudioRecording:"Stop audio recording",allowAudioAccessTitle:"Please allow access to your microphone",allowAudioAccessDescription:"In order to record audio, please allow microphone access for this site.",noAudioTitle:"Microphone Not Available",noAudioDescription:"In order to record audio, please connect a microphone or another audio input device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",recordingLength:"Recording length %{recording_length}",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file"}};function L(){return L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},L.apply(this,arguments)}function q(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var V=0;function W(t){return"__private_"+V+++"_"+t}var K=W("stream"),Y=W("audioActive"),X=W("recordingChunks"),Z=W("recorder"),$=W("capturedMediaFile"),Q=W("mediaDevices"),G=W("supportsUserMedia"),J=W("hasAudioCheck"),tt=W("start"),et=W("startRecording"),it=W("stopRecording"),rt=W("discardRecordedAudio"),nt=W("submit"),ot=W("stop"),st=W("getAudio"),at=W("changeSource"),lt=W("updateSources");class ht extends n.di{constructor(t,e){var i;super(t,e),i=this,Object.defineProperty(this,st,{value:ut}),Object.defineProperty(this,J,{value:ct}),Object.defineProperty(this,K,{writable:!0,value:null}),Object.defineProperty(this,Y,{writable:!0,value:!1}),Object.defineProperty(this,X,{writable:!0,value:null}),Object.defineProperty(this,Z,{writable:!0,value:null}),Object.defineProperty(this,$,{writable:!0,value:null}),Object.defineProperty(this,Q,{writable:!0,value:null}),Object.defineProperty(this,G,{writable:!0,value:null}),Object.defineProperty(this,tt,{writable:!0,value:function(t){if(void 0===t&&(t=null),!q(i,G)[G])return Promise.reject(new Error("Microphone access not supported"));q(i,Y)[Y]=!0,q(i,J)[J]().then((e=>(i.setPluginState({hasAudio:e}),q(i,Q)[Q].getUserMedia({audio:!0}).then((e=>{q(i,K)[K]=e;let r=null;const n=e.getAudioTracks();t&&t.deviceId?n.forEach((e=>{e.getSettings().deviceId===t.deviceId&&(r=e.getSettings().deviceId)})):r=n[0].getSettings().deviceId,q(i,lt)[lt](),i.setPluginState({currentDeviceId:r,audioReady:!0})})).catch((t=>{i.setPluginState({audioReady:!1,cameraError:t}),i.uppy.info(t.message,"error")})))))}}),Object.defineProperty(this,et,{writable:!0,value:()=>{q(this,Z)[Z]=new MediaRecorder(q(this,K)[K]),q(this,X)[X]=[];let t=!1;q(this,Z)[Z].addEventListener("dataavailable",(e=>{q(this,X)[X].push(e.data);const{restrictions:i}=this.uppy.opts;if(q(this,X)[X].length>1&&null!=i.maxFileSize&&!t){const e=q(this,X)[X].reduce(((t,e)=>t+e.size),0),r=3*((e-q(this,X)[X][0].size)/(q(this,X)[X].length-1));e>Math.max(0,i.maxFileSize-r)&&(t=!0,this.uppy.info(this.i18n("recordingStoppedMaxSize"),"warning",4e3),q(this,it)[it]())}})),q(this,Z)[Z].start(500),this.recordingLengthTimer=setInterval((()=>{const t=this.getPluginState().recordingLengthSeconds;this.setPluginState({recordingLengthSeconds:t+1})}),1e3),this.setPluginState({isRecording:!0})}}),Object.defineProperty(this,it,{writable:!0,value:()=>new Promise((t=>{q(this,Z)[Z].addEventListener("stop",(()=>{t()})),q(this,Z)[Z].stop(),clearInterval(this.recordingLengthTimer),this.setPluginState({recordingLengthSeconds:0})})).then((()=>(this.setPluginState({isRecording:!1}),q(this,st)[st]()))).then((t=>{try{q(this,$)[$]=t,this.setPluginState({recordedAudio:URL.createObjectURL(t.data)})}catch(e){e.isRestriction||this.uppy.log(e)}})).then((()=>{q(this,X)[X]=null,q(this,Z)[Z]=null}),(t=>{throw q(this,X)[X]=null,q(this,Z)[Z]=null,t}))}),Object.defineProperty(this,rt,{writable:!0,value:()=>{this.setPluginState({recordedAudio:null}),q(this,$)[$]=null}}),Object.defineProperty(this,nt,{writable:!0,value:()=>{try{q(this,$)[$]&&this.uppy.addFile(q(this,$)[$])}catch(t){t.isRestriction||this.uppy.log(t,"warning")}}}),Object.defineProperty(this,ot,{writable:!0,value:async()=>{if(q(this,K)[K]){q(this,K)[K].getAudioTracks().forEach((t=>t.stop()))}q(this,Z)[Z]&&await new Promise((t=>{q(this,Z)[Z].addEventListener("stop",t,{once:!0}),q(this,Z)[Z].stop(),clearInterval(this.recordingLengthTimer)})),q(this,X)[X]=null,q(this,Z)[Z]=null,q(this,Y)[Y]=!1,q(this,K)[K]=null,this.setPluginState({recordedAudio:null,isRecording:!1,recordingLengthSeconds:0})}}),Object.defineProperty(this,at,{writable:!0,value:t=>{q(this,ot)[ot](),q(this,tt)[tt]({deviceId:t})}}),Object.defineProperty(this,lt,{writable:!0,value:()=>{q(this,Q)[Q].enumerateDevices().then((t=>{this.setPluginState({audioSources:t.filter((t=>"audioinput"===t.kind))})}))}}),q(this,Q)[Q]=navigator.mediaDevices,q(this,G)[G]=null!=q(this,Q)[Q],this.id=this.opts.id||"Audio",this.type="acquirer",this.icon=()=>(0,r.h)("svg",{className:"uppy-DashboardTab-iconAudio","aria-hidden":"true",focusable:"false",width:"32px",height:"32px",viewBox:"0 0 32 32"},(0,r.h)("path",{d:"M21.143 12.297c.473 0 .857.383.857.857v2.572c0 3.016-2.24 5.513-5.143 5.931v2.64h2.572a.857.857 0 110 1.714H12.57a.857.857 0 110-1.714h2.572v-2.64C12.24 21.24 10 18.742 10 15.726v-2.572a.857.857 0 111.714 0v2.572A4.29 4.29 0 0016 20.01a4.29 4.29 0 004.286-4.285v-2.572c0-.474.384-.857.857-.857zM16 6.5a3 3 0 013 3v6a3 3 0 01-6 0v-6a3 3 0 013-3z",fill:"currentcolor","fill-rule":"nonzero"})),this.defaultLocale=j,this.opts={...e},this.i18nInit(),this.title=this.i18n("pluginNameAudio"),this.setPluginState({hasAudio:!1,audioReady:!1,cameraError:null,recordingLengthSeconds:0,audioSources:[],currentDeviceId:null})}render(){q(this,Y)[Y]||q(this,tt)[tt]();const t=this.getPluginState();return t.audioReady&&t.hasAudio?(0,r.h)(B,L({},t,{audioActive:q(this,Y)[Y],onChangeSource:q(this,at)[at],onStartRecording:q(this,et)[et],onStopRecording:q(this,it)[it],onDiscardRecordedAudio:q(this,rt)[rt],onSubmit:q(this,nt)[nt],onStop:q(this,ot)[ot],i18n:this.i18n,showAudioSourceDropdown:this.opts.showAudioSourceDropdown,supportsRecording:"function"==typeof MediaRecorder&&"function"==typeof(null==(e=MediaRecorder.prototype)?void 0:e.start),recording:t.isRecording,stream:q(this,K)[K]})):(0,r.h)(H,{icon:this.icon,i18n:this.i18n,hasAudio:t.hasAudio});var e}install(){this.setPluginState({audioReady:!1,recordingLengthSeconds:0});const{target:t}=this.opts;t&&this.mount(t,this),q(this,Q)[Q]&&(q(this,lt)[lt](),q(this,Q)[Q].ondevicechange=()=>{if(q(this,lt)[lt](),q(this,K)[K]){let t=!0;const{audioSources:e,currentDeviceId:i}=this.getPluginState();e.forEach((e=>{i===e.deviceId&&(t=!1)})),t&&(q(this,ot)[ot](),q(this,tt)[tt]())}})}uninstall(){q(this,K)[K]&&q(this,ot)[ot](),this.unmount()}}function ct(){return q(this,Q)[Q]?q(this,Q)[Q].enumerateDevices().then((t=>t.some((t=>"audioinput"===t.kind)))):Promise.resolve(!1)}function ut(){const t=q(this,X)[X].find((t=>{var e;return(null==(e=t.type)?void 0:e.length)>0})).type,e=(0,o.Z)(t);if(!e)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${t}"`));const i=`audio-${Date.now()}.${e}`,r=new Blob(q(this,X)[X],{type:t}),n={source:this.id,name:i,data:new Blob([r],{type:t}),type:t};return Promise.resolve(n)}ht.VERSION="1.1.0"},9794:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(7709),n=i(7113),o=i(8302),s=i(6400);const a={strings:{pluginNameBox:"Box"}};class l extends r.di{constructor(t,e){super(t,e),this.id=this.opts.id||"Box",n.zt.initPlugin(this,e),this.title=this.opts.title||"Box",this.icon=()=>(0,s.h)("svg",{className:"uppy-DashboardTab-iconBox","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("g",{fill:"currentcolor",fillRule:"nonzero"},(0,s.h)("path",{d:"m16.4 13.5c-1.6 0-3 0.9-3.7 2.2-0.7-1.3-2.1-2.2-3.7-2.2-1 0-1.8 0.3-2.5 0.8v-3.6c-0.1-0.3-0.5-0.7-1-0.7s-0.8 0.4-0.8 0.8v7c0 2.3 1.9 4.2 4.2 4.2 1.6 0 3-0.9 3.7-2.2 0.7 1.3 2.1 2.2 3.7 2.2 2.3 0 4.2-1.9 4.2-4.2 0.1-2.4-1.8-4.3-4.1-4.3m-7.5 6.8c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5m7.5 0c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5"}),(0,s.h)("path",{d:"m27.2 20.6l-2.3-2.8 2.3-2.8c0.3-0.4 0.2-0.9-0.2-1.2s-1-0.2-1.3 0.2l-2 2.4-2-2.4c-0.3-0.4-0.9-0.4-1.3-0.2-0.4 0.3-0.5 0.8-0.2 1.2l2.3 2.8-2.3 2.8c-0.3 0.4-0.2 0.9 0.2 1.2s1 0.2 1.3-0.2l2-2.4 2 2.4c0.3 0.4 0.9 0.4 1.3 0.2 0.4-0.3 0.4-0.8 0.2-1.2"}))),this.provider=new n.zt(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"box",pluginId:this.id}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameBox"),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new o.h(this,{provider:this.provider});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return this.view.getFolder()}render(t){return this.view.render(t)}}l.VERSION="2.1.0"},7113:(t,e,i)=>{"use strict";i.d(e,{zt:()=>C,C$:()=>y,X$:()=>A,sk:()=>N});var r={};i.r(r),i.d(r,{getItem:()=>P,removeItem:()=>x,setItem:()=>S});var n=i(5403);var o=i(5786);class s extends Error{constructor(t,e){void 0===e&&(e={}),super(t),this.cause=e.cause,this.cause&&(0,o.Z)(this.cause,"isNetworkError")&&(this.isNetworkError=this.cause.isNetworkError)}}const a=s;class l extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}const h=l;let c;function u(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var p=0;function d(t){return"__private_"+p+++"_"+t}const f=new Map;var m=d("companionHeaders"),g=d("getUrl"),v=d("request");c=Symbol.for("uppy test: getCompanionHeaders");class y{constructor(t,e){Object.defineProperty(this,v,{value:w}),Object.defineProperty(this,g,{value:b}),Object.defineProperty(this,m,{writable:!0,value:void 0}),this.uppy=t,this.opts=e,this.onReceiveResponse=this.onReceiveResponse.bind(this),u(this,m)[m]=null==e?void 0:e.companionHeaders}setCompanionHeaders(t){u(this,m)[m]=t}[c](){return u(this,m)[m]}get hostname(){const{companion:t}=this.uppy.getState(),e=this.opts.companionUrl;return(t&&t[e]?t[e]:e).replace(/\/$/,"")}async headers(){return{...{Accept:"application/json","Content-Type":"application/json","Uppy-Versions":`@uppy/companion-client=${y.VERSION}`},...u(this,m)[m]}}onReceiveResponse(t){let{headers:e}=t;const i=this.uppy.getState().companion||{},r=this.opts.companionUrl;e.has("i-am")&&e.get("i-am")!==i[r]&&this.uppy.setState({companion:{...i,[r]:e.get("i-am")}})}async preflight(t){const e=f.get(this.hostname);if(null!=e)return e;const i=["accept","content-type","uppy-auth-token"],r=(async()=>{try{const e=(await fetch(u(this,g)[g](t),{method:"OPTIONS"})).headers.get("access-control-allow-headers");if(null==e||"*"===e)return f.set(this.hostname,i),i;this.uppy.log(`[CompanionClient] adding allowed preflight headers to companion cache: ${this.hostname} ${e}`);const r=e.split(",").map((t=>t.trim().toLowerCase()));return f.set(this.hostname,r),r}catch(e){return this.uppy.log(`[CompanionClient] unable to make preflight request ${e}`,"warning"),f.delete(this.hostname),i}})();return f.set(this.hostname,r),r}async preflightAndHeaders(t){const[e,i]=await Promise.all([this.preflight(t),this.headers()]);return Object.fromEntries(Object.entries(i).filter((t=>{let[i]=t;return!!e.includes(i.toLowerCase())||(this.uppy.log(`[CompanionClient] excluding disallowed header ${i}`),!1)})))}async get(t,e){return void 0===e&&(e=void 0),"boolean"==typeof e&&(e={skipPostResponse:e}),u(this,v)[v]({...e,path:t})}async post(t,e,i){return void 0===i&&(i=void 0),"boolean"==typeof i&&(i={skipPostResponse:i}),u(this,v)[v]({...i,path:t,method:"POST",data:e})}async delete(t,e,i){return void 0===e&&(e=void 0),"boolean"==typeof i&&(i={skipPostResponse:i}),u(this,v)[v]({...i,path:t,method:"DELETE",data:e})}}function b(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`}async function w(t){let{path:e,method:i="GET",data:r,skipPostResponse:o,signal:s}=t;try{const t=await this.preflightAndHeaders(e),a=await function(){return fetch(...arguments).catch((t=>{throw"AbortError"===t.name?t:new n.Z(t)}))}(u(this,g)[g](e),{method:i,signal:s,headers:t,credentials:this.opts.companionCookiesRule||"same-origin",body:r?JSON.stringify(r):null});return o||this.onReceiveResponse(a),async function(t){if(401===t.status)throw new h;const e=t.json();if(t.ok)return e;let i=`Failed request with status: ${t.status}. ${t.statusText}`;try{const t=await e;i=t.message?`${i} message: ${t.message}`:i,i=t.requestId?`${i} request-Id: ${t.requestId}`:i}catch{}throw new Error(i)}(a)}catch(l){if(null!=l&&l.isAuthError)throw l;throw new a(`Could not ${i} ${u(this,g)[g](e)}`,{cause:l})}}function S(t,e){return new Promise((i=>{localStorage.setItem(t,e),i()}))}function P(t){return Promise.resolve(localStorage.getItem(t))}function x(t){return new Promise((e=>{localStorage.removeItem(t),e()}))}y.VERSION="3.1.1";class C extends y{constructor(t,e){super(t,e),this.provider=e.provider,this.id=this.provider,this.name=this.opts.name||(t=>t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "))(this.id),this.pluginId=this.opts.pluginId,this.tokenKey=`companion-${this.pluginId}-auth-token`,this.companionKeysParams=this.opts.companionKeysParams,this.preAuthToken=null}async headers(){const[t,e]=await Promise.all([super.headers(),this.getAuthToken()]),i={};return e&&(i["uppy-auth-token"]=e),this.companionKeysParams&&(i["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),{...t,...i}}onReceiveResponse(t){super.onReceiveResponse(t);const e=this.uppy.getPlugin(this.pluginId),i=e.getPluginState().authenticated?401!==t.status:t.status<400;return e.setPluginState({authenticated:i}),t}setAuthToken(t){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,t)}getAuthToken(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}async ensurePreAuth(){if(this.companionKeysParams&&!this.preAuthToken&&(await this.fetchPreAuthToken(),!this.preAuthToken))throw new Error("Could not load authentication data required for third-party login. Please try again later.")}authUrl(t){void 0===t&&(t={});const e=new URLSearchParams(t);return this.preAuthToken&&e.set("uppyPreAuthToken",this.preAuthToken),`${this.hostname}/${this.id}/connect?${e}`}fileUrl(t){return`${this.hostname}/${this.id}/get/${t}`}async fetchPreAuthToken(){if(this.companionKeysParams)try{const t=await this.post(`${this.id}/preauth/`,{params:this.companionKeysParams});this.preAuthToken=t.token}catch(t){this.uppy.log(`[CompanionClient] unable to fetch preAuthToken ${t}`,"warning")}}list(t){return this.get(`${this.id}/list/${t||""}`)}logout(){return this.get(`${this.id}/logout`).then((t=>Promise.all([t,this.uppy.getPlugin(this.pluginId).storage.removeItem(this.tokenKey)]))).then((t=>{let[e]=t;return e}))}static initPlugin(t,e,i){if(t.type="acquirer",t.files=[],i&&(t.opts={...i,...e}),e.serverUrl||e.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(e.companionAllowedHosts){const i=e.companionAllowedHosts;if(!("string"==typeof i||Array.isArray(i)||i instanceof RegExp))throw new TypeError(`${t.id}: the option "companionAllowedHosts" must be one of string, Array, RegExp`);t.opts.companionAllowedHosts=i}else/^(?!https?:\/\/).*$/i.test(e.companionUrl)?t.opts.companionAllowedHosts=`https://${e.companionUrl.replace(/^\/\//,"")}`:t.opts.companionAllowedHosts=new URL(e.companionUrl).origin;t.storage=t.opts.storage||r}}class A extends y{constructor(t,e){super(t,e),this.provider=e.provider,this.id=this.provider,this.name=this.opts.name||(t=>t.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join(" "))(this.id),this.pluginId=this.opts.pluginId}fileUrl(t){return`${this.hostname}/search/${this.id}/get/${t}`}search(t,e){return this.get(`search/${this.id}/list?q=${encodeURIComponent(t)}${e?`&${e}`:""}`)}}var R=i(4800);let _,k;function O(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var E=0;function U(t){return"__private_"+E+++"_"+t}var M=U("queued"),z=U("emitter"),T=U("isOpen"),D=U("socket"),I=U("handleMessage");_=Symbol.for("uppy test: getSocket"),k=Symbol.for("uppy test: getQueued");class N{constructor(t){Object.defineProperty(this,M,{writable:!0,value:[]}),Object.defineProperty(this,z,{writable:!0,value:R()}),Object.defineProperty(this,T,{writable:!0,value:!1}),Object.defineProperty(this,D,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:t=>{try{const e=JSON.parse(t.data);this.emit(e.action,e.payload)}catch(e){console.log(e)}}}),this.opts=t,t&&!1===t.autoOpen||this.open()}get isOpen(){return O(this,T)[T]}[_](){return O(this,D)[D]}[k](){return O(this,M)[M]}open(){O(this,D)[D]=new WebSocket(this.opts.target),O(this,D)[D].onopen=()=>{for(O(this,T)[T]=!0;O(this,M)[M].length>0&&O(this,T)[T];){const t=O(this,M)[M].shift();this.send(t.action,t.payload)}},O(this,D)[D].onclose=()=>{O(this,T)[T]=!1},O(this,D)[D].onmessage=O(this,I)[I]}close(){var t;null==(t=O(this,D)[D])||t.close()}send(t,e){O(this,T)[T]?O(this,D)[D].send(JSON.stringify({action:t,payload:e})):O(this,M)[M].push({action:t,payload:e})}on(t,e){O(this,z)[z].on(t,e)}emit(t,e){O(this,z)[z].emit(t,e)}once(t,e){O(this,z)[z].once(t,e)}}},6009:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(7709),n=i(7113),o=i(8302),s=i(6400);const a={strings:{pluginNameDropbox:"Dropbox"}};class l extends r.di{constructor(t,e){super(t,e),this.id=this.opts.id||"Dropbox",n.zt.initPlugin(this,e),this.title=this.opts.title||"Dropbox",this.icon=()=>(0,s.h)("svg",{className:"uppy-DashboardTab-iconDropbox","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,s.h)("path",{d:"M10.5 7.5L5 10.955l5.5 3.454 5.5-3.454 5.5 3.454 5.5-3.454L21.5 7.5 16 10.955zM10.5 21.319L5 17.864l5.5-3.455 5.5 3.455zM16 17.864l5.5-3.455 5.5 3.455-5.5 3.455zM16 25.925l-5.5-3.455 5.5-3.454 5.5 3.454z",fill:"currentcolor",fillRule:"nonzero"})),this.provider=new n.zt(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"dropbox",pluginId:this.id}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameDropbox"),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new o.h(this,{provider:this.provider});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder()])}render(t){return this.view.render(t)}}l.VERSION="3.1.0"},1276:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var r=i(7709),n=i(7113),o=i(6400),s=i(8302);class a extends s.h{toggleCheckbox(t,e){t.stopPropagation(),t.preventDefault(),e.custom.isSharedDrive||super.toggleCheckbox(t,e)}}const l={strings:{pluginNameGoogleDrive:"Google Drive"}};class h extends r.di{constructor(t,e){super(t,e),this.id=this.opts.id||"GoogleDrive",this.title=this.opts.title||"Google Drive",n.zt.initPlugin(this,e),this.title=this.opts.title||"Google Drive",this.icon=()=>(0,o.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,o.h)("g",{fillRule:"nonzero",fill:"none"},(0,o.h)("path",{d:"M6.663 22.284l.97 1.62c.202.34.492.609.832.804l3.465-5.798H5c0 .378.1.755.302 1.096l1.361 2.278z",fill:"#0066DA"}),(0,o.h)("path",{d:"M16 12.09l-3.465-5.798c-.34.195-.63.463-.832.804l-6.4 10.718A2.15 2.15 0 005 18.91h6.93L16 12.09z",fill:"#00AC47"}),(0,o.h)("path",{d:"M23.535 24.708c.34-.195.63-.463.832-.804l.403-.67 1.928-3.228c.201-.34.302-.718.302-1.096h-6.93l1.474 2.802 1.991 2.996z",fill:"#EA4335"}),(0,o.h)("path",{d:"M16 12.09l3.465-5.798A2.274 2.274 0 0018.331 6h-4.662c-.403 0-.794.11-1.134.292L16 12.09z",fill:"#00832D"}),(0,o.h)("path",{d:"M20.07 18.91h-8.14l-3.465 5.798c.34.195.73.292 1.134.292h12.802c.403 0 .794-.11 1.134-.292L20.07 18.91z",fill:"#2684FC"}),(0,o.h)("path",{d:"M23.497 12.455l-3.2-5.359a2.252 2.252 0 00-.832-.804L16 12.09l4.07 6.82h6.917c0-.377-.1-.755-.302-1.096l-3.188-5.359z",fill:"#FFBA00"}))),this.provider=new n.zt(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"drive",pluginId:this.id}),this.defaultLocale=l,this.i18nInit(),this.title=this.i18n("pluginNameGoogleDrive"),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new a(this,{provider:this.provider});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("root","/")])}render(t){return this.view.render(t)}}h.VERSION="3.1.0"},7304:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(7709),n=i(6400),o=i(3129);class s extends n.wA{constructor(t){super(t),this.granularRotateOnChange=t=>{const{rotationAngle:e,rotationDelta:i}=this.state,r=Number(t.target.value)-i;if(cancelAnimationFrame(this.granularRotateOnInputNextFrame),0!==r){const t=e+r;this.granularRotateOnInputNextFrame=requestAnimationFrame((()=>{this.cropper.rotateTo(t)}))}},this.state={rotationAngle:0,rotationDelta:0}}componentDidMount(){const{opts:t,storeCropperInstance:e}=this.props;this.cropper=new o(this.imgElement,t.cropperOptions),e(this.cropper),t.actions.granularRotate&&this.imgElement.addEventListener("crop",(t=>{const e=t.detail.rotate;this.setState({rotationAngle:e,rotationDelta:(e+405)%90-45})}))}componentWillUnmount(){this.cropper.destroy()}renderGranularRotate(){const{i18n:t}=this.props,{rotationDelta:e,rotationAngle:i}=this.state;return(0,n.h)("label",{"data-microtip-position":"top",role:"tooltip","aria-label":`${i}\xba`,className:"uppy-ImageCropper-rangeWrapper uppy-u-reset"},(0,n.h)("input",{className:"uppy-ImageCropper-range uppy-u-reset",type:"range",onInput:this.granularRotateOnChange,onChange:this.granularRotateOnChange,value:e,min:"-45",max:"44","aria-label":t("rotate")}))}renderRevert(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("revert"),"data-microtip-position":"top",onClick:()=>{this.cropper.reset(),this.cropper.setAspectRatio(0)}},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,n.h)("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"})))}renderRotate(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:()=>this.cropper.rotate(-90),"aria-label":t("rotate"),"data-microtip-position":"top"},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M0 0h24v24H0V0zm0 0h24v24H0V0z",fill:"none"}),(0,n.h)("path",{d:"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z"})))}renderFlip(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("flipHorizontal"),"data-microtip-position":"top",onClick:()=>this.cropper.scaleX(-this.cropper.getData().scaleX||-1)},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,n.h)("path",{d:"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z"})))}renderZoomIn(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("zoomIn"),"data-microtip-position":"top",onClick:()=>this.cropper.zoom(.1)},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",height:"24",viewBox:"0 0 24 24",width:"24"},(0,n.h)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.h)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),(0,n.h)("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})))}renderZoomOut(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("zoomOut"),"data-microtip-position":"top",onClick:()=>this.cropper.zoom(-.1)},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M0 0h24v24H0V0z",fill:"none"}),(0,n.h)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})))}renderCropSquare(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioSquare"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(1)},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,n.h)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})))}renderCropWidescreen(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioLandscape"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(16/9)},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z"}),(0,n.h)("path",{fill:"none",d:"M0 0h24v24H0z"})))}renderCropWidescreenVertical(){const{i18n:t}=this.props;return(0,n.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn","aria-label":t("aspectRatioPortrait"),"data-microtip-position":"top",onClick:()=>this.cropper.setAspectRatio(9/16)},(0,n.h)("svg",{"aria-hidden":"true",className:"uppy-c-icon",width:"24",height:"24",viewBox:"0 0 24 24"},(0,n.h)("path",{d:"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z"}),(0,n.h)("path",{d:"M0 0h24v24H0z",fill:"none"})))}render(){const{currentImage:t,opts:e}=this.props,{actions:i}=e,r=URL.createObjectURL(t.data);return(0,n.h)("div",{className:"uppy-ImageCropper"},(0,n.h)("div",{className:"uppy-ImageCropper-container"},(0,n.h)("img",{className:"uppy-ImageCropper-image",alt:t.name,src:r,ref:t=>{this.imgElement=t}})),(0,n.h)("div",{className:"uppy-ImageCropper-controls"},i.revert&&this.renderRevert(),i.rotate&&this.renderRotate(),i.granularRotate&&this.renderGranularRotate(),i.flip&&this.renderFlip(),i.zoomIn&&this.renderZoomIn(),i.zoomOut&&this.renderZoomOut(),i.cropSquare&&this.renderCropSquare(),i.cropWidescreen&&this.renderCropWidescreen(),i.cropWidescreenVertical&&this.renderCropWidescreenVertical()))}}const a={strings:{revert:"Revert",rotate:"Rotate",zoomIn:"Zoom in",zoomOut:"Zoom out",flipHorizontal:"Flip horizontal",aspectRatioSquare:"Crop square",aspectRatioLandscape:"Crop landscape (16:9)",aspectRatioPortrait:"Crop portrait (9:16)"}};class l extends r.di{constructor(t,e){super(t,e),this.save=()=>{const{currentImage:t}=this.getPluginState();this.cropper.getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions).toBlob((t=>{const{currentImage:e}=this.getPluginState();this.uppy.setFileState(e.id,{data:t,size:t.size,preview:null});const i=this.uppy.getFile(e.id);this.uppy.emit("thumbnail:request",i),this.setPluginState({currentImage:i}),this.uppy.emit("file-editor:complete",i)}),t.type,this.opts.quality)},this.storeCropperInstance=t=>{this.cropper=t},this.selectFile=t=>{this.uppy.emit("file-editor:start",t),this.setPluginState({currentImage:t})},this.id=this.opts.id||"ImageEditor",this.title="Image Editor",this.type="editor",this.defaultLocale=a;this.opts={quality:.8,...e,actions:{revert:!0,rotate:!0,granularRotate:!0,flip:!0,zoomIn:!0,zoomOut:!0,cropSquare:!0,cropWidescreen:!0,cropWidescreenVertical:!0,...e.actions},cropperOptions:{viewMode:1,background:!1,autoCropArea:1,responsive:!0,croppedCanvasOptions:{},...e.cropperOptions}},this.i18nInit()}canEditFile(t){if(!t.type||t.isRemote)return!1;const e=t.type.split("/")[1];return!!/^(jpe?g|gif|png|bmp|webp)$/.test(e)}install(){this.setPluginState({currentImage:null});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){const{currentImage:t}=this.getPluginState();if(t){const e=this.uppy.getFile(t.id);this.uppy.emit("file-editor:cancel",e)}this.unmount()}render(){const{currentImage:t}=this.getPluginState();return null===t||t.isRemote?null:(0,n.h)(s,{currentImage:t,storeCropperInstance:this.storeCropperInstance,save:this.save,opts:this.opts,i18n:this.i18n})}}l.VERSION="2.1.1"},3313:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(6400),n=i(7709),o=i(7113),s=i(8302);const a={strings:{pluginNameInstagram:"Instagram"}};class l extends n.di{constructor(t,e){super(t,e),this.id=this.opts.id||"Instagram",o.zt.initPlugin(this,e),this.icon=()=>(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("defs",null,(0,r.h)("path",{d:"M16.825 5l.483-.001.799.002c1.168.005 1.598.021 2.407.057 1.17.05 1.97.235 2.67.506.725.28 1.34.655 1.951 1.265.613.61.99 1.223 1.273 1.946.273.7.46 1.498.516 2.67l.025.552.008.205c.029.748.037 1.51.042 3.777l.001.846v.703l-.001.398a50.82 50.82 0 01-.058 2.588c-.05 1.17-.235 1.97-.506 2.67a5.394 5.394 0 01-1.265 1.951c-.61.613-1.222.99-1.946 1.273-.699.273-1.498.46-2.668.516-.243.012-.451.022-.656.03l-.204.007c-.719.026-1.512.034-3.676.038l-.847.001h-1.1a50.279 50.279 0 01-2.587-.059c-1.171-.05-1.971-.235-2.671-.506a5.394 5.394 0 01-1.951-1.265 5.385 5.385 0 01-1.272-1.946c-.274-.699-.46-1.498-.517-2.668a88.15 88.15 0 01-.03-.656l-.007-.205c-.026-.718-.034-1.512-.038-3.674v-2.129c.006-1.168.022-1.597.058-2.406.051-1.171.235-1.971.506-2.672a5.39 5.39 0 011.265-1.95 5.381 5.381 0 011.946-1.272c.699-.274 1.498-.462 2.669-.517l.656-.03.204-.007c.718-.026 1.511-.034 3.674-.038zm.678 1.981h-1.226l-.295.001c-2.307.005-3.016.013-3.777.043l-.21.009-.457.02c-1.072.052-1.654.232-2.042.383-.513.2-.879.44-1.263.825a3.413 3.413 0 00-.82 1.267c-.15.388-.33.97-.375 2.043a48.89 48.89 0 00-.056 2.482v.398 1.565c.006 2.937.018 3.285.073 4.444.05 1.073.231 1.654.382 2.043.2.512.44.878.825 1.263.386.383.753.621 1.267.82.388.15.97.328 2.043.374.207.01.388.017.563.024l.208.007a63.28 63.28 0 002.109.026h1.564c2.938-.006 3.286-.019 4.446-.073 1.071-.051 1.654-.232 2.04-.383.514-.2.88-.44 1.264-.825.384-.386.622-.753.82-1.266.15-.389.328-.971.375-2.044.039-.88.054-1.292.057-2.723v-1.15-.572c-.006-2.936-.019-3.284-.074-4.445-.05-1.071-.23-1.654-.382-2.04-.2-.515-.44-.88-.825-1.264a3.405 3.405 0 00-1.267-.82c-.388-.15-.97-.328-2.042-.375a48.987 48.987 0 00-2.535-.056zm-1.515 3.37a5.65 5.65 0 11.021 11.299 5.65 5.65 0 01-.02-11.3zm.004 1.982a3.667 3.667 0 10.015 7.334 3.667 3.667 0 00-.015-7.334zm5.865-3.536a1.32 1.32 0 11.005 2.64 1.32 1.32 0 01-.005-2.64z",id:"a"})),(0,r.h)("g",{fill:"none","fill-rule":"evenodd"},(0,r.h)("mask",{id:"b",fill:"#fff"},(0,r.h)("use",{xlinkHref:"#a"})),(0,r.h)("image",{mask:"url(#b)",x:"4",y:"4",width:"24",height:"24",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALKADAAQAAAABAAAALAAAAAD8buejAAALZklEQVRYCVWZC2LbNhAFCRKykvP0bD1506SxRKIzbwHJoU3jv5h9WICU3P7+6zlG2zZvr8s/rW1tN7U0rMll8aDYufdzbLfc1JHmpv3jpPy8tsO+3O2s/O6YMSjTl/qdCds4mIIG60m8vdq2Z+phm2V4vAb9+o7BbZeuoM0NyYazvTvbvlN1MGjHUAesZ/IWWOsCeF0BOwAK4ITR0WYd/QKHEPv2DEymmorZtiubjOHEMYEzXmC9GMxu+95Kz+kuwxjDBKb8iUoCAdqZoAeyALreW6ZNx9Y4Jz8cLwjTZOEoR+HU05k2RzgP2iafGgfZiEdZbEr94zpX/xkPtDtGAxF+LRcgTsp9CAZg0rnEnXmPqFshY5vLnVWxLXO/bah2sZQgBZppGSe8NbjNPN5kc/WbIYEn8U+jXCOezT4zfgS1eoVEhceVeK74Fe4N6CoYEoLWykzHsd+GMAUqdTTVvvqT1uWqB3lVCLb12/ORAe8/5Zu9mp7lqoEFUCAFDIxqz7i1bq2AY1U9jqq2QK/7DYl+1AeZlAFcEc+U/jkRUqsvCHQ/nyGvjrOl6EuZWRWVGCKUMCkntQ5o+u2AZ3OxakbTcoBZnY0xhgGCUM4Kp1xtBTnBnXM5ASRms/Fs7d9OpX8bXN45pibQY/ML1MmA5G9CINBuCpdftexr6i2c5qd9J441LNJm3zk1GVusJ7v6mPJ7HPxJR0Li/vg9O1XHTEgvsQoSgExU0NnlLF0paK+6d06aOMKE2nCKV0ofNw4WsWmLsWrv6lPLnhGpr9E137QkHOMB/jh/T8MOqOadXarR44zPBW5NvDccnBxVmdK81+7RQ5p6qnQoRDZPh9+xWj0N2XpqxX1HzMty9UlFnKya/h3gulziAsyxwkSmpTIPB8vagKLyktRdDuBEHNGZMm4oCFWgjq31WPHpaC93gGNqpOpP4Ez4spa+nMNvhTWcuPKAJ79fqIxVoUvdjEG9qSy2WhpQlz61yG/gnKEA25IrIOYK6DIsQs2EE9LR/sTKq38Nd1y/X//FXG0QDHkEqSz3EYVV2dhb00rgLPSDcqmrScs55NNOD2zVqKmYnYTFnkACp520dkW5vBxK99BVzr792/iZ+VVo92UkKU2oG5WFTb6mNiA1H2C8KC0E44qaQleR3EQvQNwLrECOVAiSwM5gpF7nvDND0lZvYuQ9JbZfqdTrqCgwMcVrRS0z9QkLu9NWmkgEHb8p2zDRylj9VWA3lXD2vObEdWpT3w5MiFqQ1W/lteG4eipastxv2w+TeTBP0ypK84HiOW9fUzLcjRDwCW2b2VxmnGSKTX6uRSwMnC9YX4l05Mh2uwI+QVWdWUOSTWd5Xjjf7/tPYk2stSh053XTGN5RJMCMSajMcS8Trn3j/E1ajthlxCkmJXVi47PSUsyyq+jyexsayQNuv5GVYJaszprNsQD3RkgYiy49kFl2JlJJxlf8Uu/lpkq7+aWqzEzjr5cTVpFaJvSVr8AKRtiTlVPFk5t1nO30W+o6jrbAk76kxFa/tX+dom4C1wDPk03gqCw8HTBSxx4FHxIA+mh2pM3rKu5SNqBAuOSZnHzsB9JwW7DV/ge8dlVsOh375PvH8YO8EALU1HuecIC6qQgXifNuSx9XAoLaoGIYDjkWFrawX1U1XrknuMFw7QBSPtg79XovmBvwqnDICrhClEO6wgKFj9vPqJWlthUvdgH1DOA8+wFMexzQc5BUS1d1IsdBSjEv4Fe1LgBO1CpFPTpV1JuPSFNt4y/trzbtaUfwBWwM3/6JsrL6MSQYwLKXAm9YJBxsM8992MblZ63Gami0+rnwOMyPykVpQsyl9eYNOfVC6kRBkwaop//LgcAKWivkHF791g0JK5kMmCgKPas2QRkUFQsuTvm6R1946Wg95k764ZRLW59yO5UVGsawwELupCfAbdCuAwvcz5Xk18rIVEdgSRBRgO77R206QdXHuA2goaGiCQ0GmUfN1JlmFayjv0IcKGkfYt4HAj0yuQBRGDjzuS/rTmAf29Gov1S+FF7QBayNcpoBOEsMt3vFcIUC7VxOnE+pxmkgqEzduzwsPykrjBszCusgdarsRIAL6CM/KqsqcAf1vj8P1TXFyN6e5G8ao48fjKfDQJYizIdIfb+Xwp6Z2fE2C7mUfUEzMKqSBp4VUV1A49Sz1M2LzVzahEfyHUAcQNltR0nADYkBvHXDZQo8H9dQvHF7qhjPtSolBJ0A/vaLwdRz5YFFGoWBy8E/4aKcjqimaUBXXnjBpzOZnMlIVXsTVEBBUa+dD0BR0xVopgAD70psY0KjMHpmHB2kApea9o23NS83mpsref5OZet4U/0CMhSEDpwnxB9lVKSfk5djllXRFPizQmKcqMpnyZ3ycPntf96Ym9ChzU8vCQnhgWZ2UuySArw+cVBG4gqNCS6YoSEEziRWVStKUpe4FfCd91V0XA/qgOJuF7FpGjjyQgsFoNDtibp8cm+cyXxbB6zh4pMUO4H06yzsv4E/A6rg/uRJRnMRmrhMDIhyOjABX9CMDFhBFxx19KujjqWeim5PwVFU6IBiewfyk7IPETcg52kjXN7nsbaoEykKf/cjUgVxpTZZVtnqFMgv4FHa8oSOisawinMLHfUBzJcK1j8BeqquedKDtgcgnA4bym4P6gBWYVM3W/pn41ku5L4RElFWtlk5SXHEThhOWDiIyVROlQNM+wyHimlgATI/PPIm4BB8qfqwHnhgL89gzs+Ww1xQb4821SZ/4IwOJiRqH/X9u7Hj08JLSZfawOQcpRzwgk1oBNzzcgLn1FBNHspMENik9OG4awIDaUjw9rKNT1KXPl9neua6sSbkgqfs/CNfBdNfDDhQuL4AKXEXeOgZID91eOiRUnEFOIA5rnTkBU0/IT05gByoq5KBJF4Hym4Pxh3UcxZ7HjdhEhKWURbhavNR9rjLBwk3ryDcrGzfvk9I69b1yhMGWQ4bqMwv/RMSplQkjjVKXzZX8wESVcuB7QG0YUCMjk/aOmWgc/vC4oMCVYfghIGP6MT1zpeUhM1rQzOnGxmFKwTCir1Xaj5vN7T7nDZvnbDGHbCKnwji2zofNsOvbold3zlUtKGosBun3PbJSrrReHEaCQVCIDEMaCCBs+P+AbybkbIhmbNecGwF+E5/L2ECuPKCWsUESQkKnyyJ93TGACk7OrAY9P8XG//fGCoM7DAEUGnj5Mw7aQfelySWOm9iPuFyvrL8rKQR6mM6qdCUDQsfNPVu4yv/HaPOT1e/yDaviMKmTkg/I/F7MUG9OlrmDrBLRVd3c8KBJlPEKoVRcIJuhoQAmZDUkPC00W5OI1dOpQ1F61kFNqr9SmFcaHdBheOaDHF6QZMOP6QyiZ804oj98wLiAMIgcWw4UDYkDAWfR+4d5s0zP2GgUZX04i+NeSgYGokvbDhIZYUWHgd9K8zZzir264NxZUFbsfM1jdqpV2naA48tx6hsvBSabE4IMtlcOGgq8PqCjoly2rw2soqy4RJWQtPZl6PUCU14ZUWENuZV2Honn3f+k6R6wrkqgTStyQ0bFY+XAaafMRFgUlVeXxXFUcpLEYfZz3FrVUzZrOOJK+4B/wnIZ8TGRvb9OB8EUM0w8uNYj/oa9iK9AMoy6gA72o02srMxpAPUD+EDnVEF7P5xw896VyAbFk8MgnpVpR3gfLnt/wECq3rYFvYLcKCpqvcI+/hVl8AumXDeApklDRRKJSS+KOaq1Rgg4igOYtiQK1hJy46TBtDjznDp3iqJff5j0/LfSZbYVdauqXccJ9W+czupp0sU9gMlqkQ52lU1E6tUwoDUukAD6YRpAwqDrAErzA8QCRvXm98KEep0xIdY1CN1ye27IP0IHvvYIW18qGz8S7VWUZuMkUOb3P8DHTl67ur/i1UAAAAASUVORK5CYII="}))),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameInstagram"),this.provider=new o.zt(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionKeysParams:this.opts.companionKeysParams,companionCookiesRule:this.opts.companionCookiesRule,provider:"instagram",pluginId:this.id}),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new s.h(this,{provider:this.provider,viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("recent")])}render(t){return this.view.render(t)}}l.VERSION="3.1.0"},1978:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var r=i(6400),n=i(7709),o=i(7113),s=i(8302);const a={strings:{pluginNameOneDrive:"OneDrive"}};class l extends n.di{constructor(t,e){super(t,e),this.id=this.opts.id||"OneDrive",o.zt.initPlugin(this,e),this.title=this.opts.title||"OneDrive",this.icon=()=>(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("g",{fill:"none",fillRule:"nonzero"},(0,r.h)("path",{d:"M13.39 12.888l4.618 2.747 2.752-1.15a4.478 4.478 0 012.073-.352 6.858 6.858 0 00-5.527-5.04 6.895 6.895 0 00-6.876 2.982l.07-.002a5.5 5.5 0 012.89.815z",fill:"#0364B8"}),(0,r.h)("path",{d:"M13.39 12.887v.001a5.5 5.5 0 00-2.89-.815l-.07.002a5.502 5.502 0 00-4.822 2.964 5.43 5.43 0 00.38 5.62l4.073-1.702 1.81-.757 4.032-1.685 2.105-.88-4.619-2.748z",fill:"#0078D4"}),(0,r.h)("path",{d:"M22.833 14.133a4.479 4.479 0 00-2.073.352l-2.752 1.15.798.475 2.616 1.556 1.141.68 3.902 2.321a4.413 4.413 0 00-.022-4.25 4.471 4.471 0 00-3.61-2.284z",fill:"#1490DF"}),(0,r.h)("path",{d:"M22.563 18.346l-1.141-.68-2.616-1.556-.798-.475-2.105.88L11.87 18.2l-1.81.757-4.073 1.702A5.503 5.503 0 0010.5 23h12.031a4.472 4.472 0 003.934-2.333l-3.902-2.321z",fill:"#28A8EA"}))),this.provider=new o.zt(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule,provider:"onedrive",pluginId:this.id}),this.defaultLocale=a,this.i18nInit(),this.title=this.i18n("pluginNameOneDrive"),this.onFirstRender=this.onFirstRender.bind(this),this.render=this.render.bind(this)}install(){this.view=new s.h(this,{provider:this.provider});const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.view.tearDown(),this.unmount()}onFirstRender(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder()])}render(t){return this.view.render(t)}}l.VERSION="3.1.0"},8302:(t,e,i)=>{"use strict";i.d(e,{h:()=>D,Q:()=>q});var r=i(6400);function n(){return(0,r.h)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},(0,r.h)("g",{fill:"none","fill-rule":"evenodd"},(0,r.h)("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),(0,r.h)("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),(0,r.h)("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),(0,r.h)("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),(0,r.h)("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),(0,r.h)("path",{d:"M4 4h18v18H4z"})))}const o=function(t){const{pluginName:e,pluginIcon:i,i18nArray:o,handleAuth:s}=t,a="Google Drive"===e,l=(0,r.h)("span",{className:"uppy-Provider-authTitleName"},e,(0,r.h)("br",null));return(0,r.h)("div",{className:"uppy-Provider-auth"},(0,r.h)("div",{className:"uppy-Provider-authIcon"},i()),(0,r.h)("div",{className:"uppy-Provider-authTitle"},o("authenticateWithTitle",{pluginName:l})),a?(0,r.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google",onClick:s,"data-uppy-super-focusable":!0},(0,r.h)(n,null),o("signInWithGoogle")):(0,r.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onClick:s,"data-uppy-super-focusable":!0},o("authenticateWith",{pluginName:e})))},s=t=>{const{getFolder:e,title:i,isLast:n}=t;return(0,r.h)(r.HY,null,(0,r.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:e},i),n?"":" / ")},a=t=>{const e=[];return t.showBreadcrumbs&&e.push((t=>{const{getFolder:e,title:i,breadcrumbsIcon:n,directories:o}=t;return(0,r.h)("div",{className:"uppy-Provider-breadcrumbs"},(0,r.h)("div",{className:"uppy-Provider-breadcrumbsIcon"},n),o.map(((t,n)=>(0,r.h)(s,{key:t.id,getFolder:()=>e(t.id),title:0===n?i:t.title,isLast:n+1===o.length}))))})({getFolder:t.getFolder,directories:t.directories,breadcrumbsIcon:t.pluginIcon&&t.pluginIcon(),title:t.title})),e.push((t=>{let{i18n:e,logout:i,username:n}=t;return[(0,r.h)("span",{className:"uppy-ProviderBrowser-user",key:"username"},n),(0,r.h)("button",{type:"button",onClick:i,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},e("logOut"))]})({logout:t.logout,username:t.username,i18n:t.i18n})),e};var l=i(4184),h=i(3454);function c(t){return{...t,type:t.mimeType,extension:t.name?(0,h.Z)(t.name).extension:null}}class u extends r.wA{constructor(t){super(t),this.preventEnterPress=this.preventEnterPress.bind(this)}preventEnterPress(t){13===t.keyCode&&(t.stopPropagation(),t.preventDefault())}render(){const{i18n:t,filterInput:e,filterQuery:i}=this.props;return(0,r.h)("div",{className:"uppy-ProviderBrowser-filter"},(0,r.h)("input",{className:"uppy-u-reset uppy-ProviderBrowser-filterInput",type:"text",placeholder:t("filter"),"aria-label":t("filter"),onKeyUp:this.preventEnterPress,onKeyDown:this.preventEnterPress,onKeyPress:this.preventEnterPress,onInput:t=>i(t),value:e}),(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-filterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},(0,r.h)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),e&&(0,r.h)("button",{className:"uppy-u-reset uppy-ProviderBrowser-filterClose",type:"button","aria-label":t("resetFilter"),title:t("resetFilter"),onClick:i},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},(0,r.h)("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))}}const p=t=>{let{cancel:e,done:i,i18n:n,selected:o}=t;return(0,r.h)("div",{className:"uppy-ProviderBrowser-footer"},(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onClick:i,type:"button"},n("selectX",{smart_count:o})),(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:e,type:"button"},n("cancel")))};function d(){return(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},(0,r.h)("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function f(){return(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},(0,r.h)("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function m(){return(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},(0,r.h)("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),(0,r.h)("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}const g=t=>{const{itemIconString:e}=t;if(null!==e)switch(e){case"file":return(0,r.h)(d,null);case"folder":return(0,r.h)(f,null);case"video":return(0,r.h)(m,null);default:{const{alt:i}=t;return(0,r.h)("img",{src:e,alt:i})}}};const v=function(t){const{className:e,isDisabled:i,restrictionError:n,isChecked:o,title:s,itemIconEl:a,showTitles:l,toggleCheckbox:h,recordShiftKeyPress:c,id:u,children:p}=t;return(0,r.h)("li",{className:e,title:i?null==n?void 0:n.message:null},(0,r.h)("input",{type:"checkbox",className:`uppy-u-reset uppy-ProviderBrowserItem-checkbox ${o?"uppy-ProviderBrowserItem-checkbox--is-checked":""} uppy-ProviderBrowserItem-checkbox--grid`,onChange:h,onKeyDown:c,name:"listitem",id:u,checked:o,disabled:i,"data-uppy-super-focusable":!0}),(0,r.h)("label",{htmlFor:u,"aria-label":s,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},(0,r.h)("span",{className:"uppy-ProviderBrowserItem-inner-relative"},a,l&&s,p)))};const y=function(t){const{className:e,isDisabled:i,restrictionError:n,isCheckboxDisabled:o,isChecked:s,toggleCheckbox:a,recordShiftKeyPress:l,type:h,id:c,itemIconEl:u,title:p,handleFolderClick:d,showTitles:f,i18n:m}=t;return(0,r.h)("li",{className:e,title:i?null==n?void 0:n.message:null},o?null:(0,r.h)("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox "+(s?"uppy-ProviderBrowserItem-checkbox--is-checked":""),onChange:a,onKeyDown:l,name:"listitem",id:c,checked:s,"aria-label":"file"===h?null:m("allFilesFromFolderNamed",{name:p}),disabled:i,"data-uppy-super-focusable":!0}),"file"===h?(0,r.h)("label",{htmlFor:c,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},(0,r.h)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},u),f&&p):(0,r.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:d,"aria-label":m("openFolderNamed",{name:p})},(0,r.h)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},u),f&&(0,r.h)("span",null,p)))};function b(){return b=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},b.apply(this,arguments)}const w=t=>{const{author:e,getItemIcon:i,isChecked:n,isDisabled:o,viewType:s}=t,a=i(),h=l("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--selected":n},{"uppy-ProviderBrowserItem--disabled":o},{"uppy-ProviderBrowserItem--noPreview":"video"===a}),c=(0,r.h)(g,{itemIconString:a});switch(s){case"grid":return(0,r.h)(v,b({},t,{className:h,itemIconEl:c}));case"list":return(0,r.h)(y,b({},t,{className:h,itemIconEl:c}));case"unsplash":return(0,r.h)(v,b({},t,{className:h,itemIconEl:c}),(0,r.h)("a",{href:`${e.url}?utm_source=Companion&utm_medium=referral`,target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author"},e.name));default:throw new Error(`There is no such type ${s}`)}},S="shared-with-me";const P=function(t){const{currentSelection:e,folders:i,files:n,uppyFiles:o,viewType:s,headerComponent:a,showBreadcrumbs:h,isChecked:d,toggleCheckbox:f,recordShiftKeyPress:m,handleScroll:g,showTitles:v,i18n:y,validateRestrictions:b,showFilter:P,filterQuery:x,filterInput:C,getNextFolder:A,cancel:R,done:_,columns:k}=t,O=e.length;return(0,r.h)("div",{className:l("uppy-ProviderBrowser",`uppy-ProviderBrowser-viewType--${s}`)},(0,r.h)("div",{className:"uppy-ProviderBrowser-header"},(0,r.h)("div",{className:l("uppy-ProviderBrowser-headerBar",!h&&"uppy-ProviderBrowser-headerBar--simple")},a)),P&&(0,r.h)(u,{i18n:y,filterQuery:x,filterInput:C}),i.length||n.length?(0,r.h)("div",{className:"uppy-ProviderBrowser-body"},(0,r.h)("ul",{className:"uppy-ProviderBrowser-list",onScroll:g,role:"listbox",tabIndex:"-1"},i.map((t=>{var e;return w({columns:k,showTitles:v,viewType:s,i18n:y,id:t.id,title:t.name,getItemIcon:()=>t.icon,isChecked:d(t),toggleCheckbox:e=>f(e,t),recordShiftKeyPress:m,type:"folder",isDisabled:null==(e=d(t))?void 0:e.loading,isCheckboxDisabled:t.id===S,handleFolderClick:()=>A(t)})})),n.map((t=>{const i=b(c(t),[...o,...e]);return w({id:t.id,title:t.name,author:t.author,getItemIcon:()=>t.icon,isChecked:d(t),toggleCheckbox:e=>f(e,t),recordShiftKeyPress:m,columns:k,showTitles:v,viewType:s,i18n:y,type:"file",isDisabled:i&&!d(t),restrictionError:i})})))):(0,r.h)("div",{className:"uppy-Provider-empty"},y("noFilesFound")),O>0&&(0,r.h)(p,{selected:O,done:_,cancel:R,i18n:y}))},x=t=>{let{i18n:e}=t;return(0,r.h)("div",{className:"uppy-Provider-loading"},(0,r.h)("span",null,e("loading")))};class C extends r.wA{componentWillUnmount(){const{onUnmount:t}=this.props;t()}render(){const{children:t}=this.props;return(0,r.bR)(t)[0]}}var A=i(2792),R=i(3279),_=i(1988);class k{constructor(t){this.plugin=t,this.filterItems=this.filterItems.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.recordShiftKeyPress=this.recordShiftKeyPress.bind(this),this.isChecked=this.isChecked.bind(this),this.loaderWrapper=this.loaderWrapper.bind(this)}filterItems(t){const e=this.plugin.getPluginState();return e.filterInput&&""!==e.filterInput?t.filter((t=>-1!==t.name.toLowerCase().indexOf(e.filterInput.toLowerCase()))):t}recordShiftKeyPress(t){this.isShiftKeyPressed=t.shiftKey}toggleCheckbox(t,e){t.stopPropagation(),t.preventDefault(),t.currentTarget.focus();const{folders:i,files:r}=this.plugin.getPluginState(),n=this.filterItems(i.concat(r));if(this.lastCheckbox&&this.isShiftKeyPressed){const t=n.indexOf(this.lastCheckbox),i=n.indexOf(e),r=t<i?n.slice(t,i+1):n.slice(i,t+1),o=[];for(const e of r){const{uppy:t}=this.plugin,i=t.validateRestrictions(c(e),[...t.getFiles(),...o]);i?t.info({message:i.message},"error",t.opts.infoTimeout):o.push(e)}return void this.plugin.setPluginState({currentSelection:o})}this.lastCheckbox=e;const{currentSelection:o}=this.plugin.getPluginState();this.isChecked(e)?this.plugin.setPluginState({currentSelection:o.filter((t=>t.id!==e.id))}):this.plugin.setPluginState({currentSelection:o.concat([e])})}isChecked(t){const{currentSelection:e}=this.plugin.getPluginState();return e.some((e=>e.id===t.id))}loaderWrapper(t,e,i){t.then((t=>{this.plugin.setPluginState({loading:!1}),e(t)})).catch((t=>{this.plugin.setPluginState({loading:!1}),i(t)})),this.plugin.setPluginState({loading:!0})}}class O{constructor(t,e){this.plugin=t,this.provider=e.provider,this.sharedHandler=new k(t),this.isHandlingScroll=!1,this.preFirstRender=this.preFirstRender.bind(this),this.handleError=this.handleError.bind(this),this.addFile=this.addFile.bind(this),this.clearSelection=this.clearSelection.bind(this),this.cancelPicking=this.cancelPicking.bind(this)}providerFileToId(t){return(0,_.Z)({data:t,name:t.name||t.id,type:t.mimetype})}preFirstRender(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()}shouldHandleScroll(t){const{scrollHeight:e,scrollTop:i,offsetHeight:r}=t.target;return e-(i+r)<50&&!this.isHandlingScroll}clearSelection(){this.plugin.setPluginState({currentSelection:[],filterInput:""})}cancelPicking(){this.clearSelection();const t=this.plugin.uppy.getPlugin("Dashboard");t&&t.hideAllPanels()}handleError(t){const{uppy:e}=this.plugin,i=e.i18n("companionError");e.log(t.toString()),t.isAuthError||e.info({message:i,details:t.toString()},"error",5e3)}addFile(t){const e={id:this.providerFileToId(t),source:this.plugin.id,data:t,name:t.name||t.id,type:t.mimeType,isRemote:!0,meta:{},body:{fileId:t.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:`${this.provider.fileUrl(t.requestPath)}`,body:{fileId:t.id},providerOptions:this.provider.opts,providerName:this.provider.name}},i=(0,A.Z)(e);i&&(0,R.Z)(i)&&(e.preview=t.thumbnail),t.author&&(null!=t.author.name&&(e.meta.authorName=String(t.author.name)),t.author.url&&(e.meta.authorUrl=t.author.url)),this.plugin.uppy.log("Adding remote file");try{return this.plugin.uppy.addFile(e),!0}catch(r){return r.isRestriction||this.plugin.uppy.log(r),!1}}}function E(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var U=0;function M(t){return"__private_"+U+++"_"+t}function z(t){return"string"==typeof t?new RegExp(`^${t}$`):t instanceof RegExp?t:void 0}var T=M("updateFilesAndFolders");class D extends O{constructor(t,e){super(t,e),Object.defineProperty(this,T,{value:I});this.opts={viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0,...e},this.filterQuery=this.filterQuery.bind(this),this.getFolder=this.getFolder.bind(this),this.getNextFolder=this.getNextFolder.bind(this),this.logout=this.logout.bind(this),this.handleAuth=this.handleAuth.bind(this),this.handleScroll=this.handleScroll.bind(this),this.listAllFiles=this.listAllFiles.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:"",isSearchVisible:!1,currentSelection:[]})}tearDown(){}getFolder(t,e){return this.sharedHandler.loaderWrapper(this.provider.list(t),(i=>{let r;const n=this.plugin.getPluginState(),o=n.directories.findIndex((e=>t===e.id));r=-1!==o?n.directories.slice(0,o+1):n.directories.concat([{id:t,title:e}]),this.username=i.username||this.username,E(this,T)[T](i,[],[]),this.plugin.setPluginState({directories:r,filterInput:""})}),this.handleError)}getNextFolder(t){this.getFolder(t.requestPath,t.name),this.lastCheckbox=void 0}logout(){this.provider.logout().then((t=>{if(t.ok){if(!t.revoked){const e=this.plugin.uppy.i18n("companionUnauthorizeHint",{provider:this.plugin.title,url:t.manual_revoke_url});this.plugin.uppy.info(e,"info",7e3)}const e={authenticated:!1,files:[],folders:[],directories:[],filterInput:""};this.plugin.setPluginState(e)}})).catch(this.handleError)}filterQuery(t){const e=this.plugin.getPluginState();this.plugin.setPluginState({...e,filterInput:t?t.target.value:""})}addFolder(t){const e=this.providerFileToId(t),i={...this.plugin.getPluginState().selectedFolders};if(!(e in i)||!i[e].loading)return i[e]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:{...i}}),this.listAllFiles(t.requestPath).then((r=>{let n=0;r.forEach((t=>{const e=this.providerFileToId(t);this.plugin.uppy.checkIfFileAlreadyExists(e)||n++})),n>0&&r.forEach((t=>this.addFile(t)));const o=r.map(this.providerFileToId);let s;i[e]={loading:!1,files:o},this.plugin.setPluginState({selectedFolders:i,filterInput:""}),s=0===n?this.plugin.uppy.i18n("folderAlreadyAdded",{folder:t.name}):r.length?this.plugin.uppy.i18n("folderAdded",{smart_count:n,folder:t.name}):this.plugin.uppy.i18n("emptyFolderAdded"),this.plugin.uppy.info(s)})).catch((t=>{const i={...this.plugin.getPluginState().selectedFolders};delete i[e],this.plugin.setPluginState({selectedFolders:i}),this.handleError(t)}))}async handleAuth(){await this.provider.ensurePreAuth();const t=btoa(JSON.stringify({origin:location.origin})),e=`@uppy/provider-views=${D.VERSION}`,i=this.provider.authUrl({state:t,uppyVersions:e}),r=window.open(i,"_blank"),n=t=>{if(t.source!==r)return void this.plugin.uppy.log("rejecting event from unknown source");var e,i;e=t.origin,i=this.plugin.opts.companionAllowedHosts,(Array.isArray(i)?i.map(z):[z(i)]).some((t=>(null==t?void 0:t.test(e))||(null==t?void 0:t.test(`${e}/`))))&&t.source===r||this.plugin.uppy.log(`rejecting event from ${t.origin} vs allowed pattern ${this.plugin.opts.companionAllowedHosts}`);const o="string"==typeof t.data?JSON.parse(t.data):t.data;if(o.error){this.plugin.uppy.log("auth aborted","warning");const{uppy:t}=this.plugin,e=t.i18n("authAborted");t.info({message:e},"warning",5e3)}else o.token?(r.close(),window.removeEventListener("message",n),this.provider.setAuthToken(o.token),this.preFirstRender()):this.plugin.uppy.log("did not receive token from auth window","error")};window.addEventListener("message",n)}async handleScroll(t){const e=this.nextPagePath||null;if(this.shouldHandleScroll(t)&&e){this.isHandlingScroll=!0;try{const t=await this.provider.list(e),{files:i,folders:r}=this.plugin.getPluginState();E(this,T)[T](t,i,r)}catch(i){this.handleError(i)}finally{this.isHandlingScroll=!1}}}async listAllFiles(t,e){void 0===e&&(e=null),e=e||[];const i=await this.provider.list(t);i.items.forEach((t=>{t.isFolder?this.addFolder(t):e.push(t)}));const r=i.nextPagePath;return r?this.listAllFiles(r,e):e}donePicking(){const{currentSelection:t}=this.plugin.getPluginState(),e=t.map((t=>t.isFolder?this.addFolder(t):this.addFile(t)));this.sharedHandler.loaderWrapper(Promise.all(e),(()=>{this.clearSelection()}),(()=>{}))}render(t,e){var i=this;void 0===e&&(e={});const{authenticated:n,didFirstRender:s}=this.plugin.getPluginState();s||this.preFirstRender();const l={...this.opts,...e},{files:h,folders:c,filterInput:u,loading:p,currentSelection:d}=this.plugin.getPluginState(),{isChecked:f,toggleCheckbox:m,recordShiftKeyPress:g,filterItems:v}=this.sharedHandler,y=""!==u,b={showBreadcrumbs:l.showBreadcrumbs,getFolder:this.getFolder,directories:this.plugin.getPluginState().directories,pluginIcon:this.plugin.icon,title:this.plugin.title,logout:this.logout,username:this.username,i18n:this.plugin.uppy.i18n},w={isChecked:f,toggleCheckbox:m,recordShiftKeyPress:g,currentSelection:d,files:y?v(h):h,folders:y?v(c):c,username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this.sharedHandler.filterItems,filterQuery:this.filterQuery,logout:this.logout,handleScroll:this.handleScroll,listAllFiles:this.listAllFiles,done:this.donePicking,cancel:this.cancelPicking,headerComponent:a(b),title:this.plugin.title,viewType:l.viewType,showTitles:l.showTitles,showFilter:l.showFilter,showBreadcrumbs:l.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){return i.plugin.uppy.validateRestrictions(...arguments)}};return p?(0,r.h)(C,{onUnmount:this.clearSelection},(0,r.h)(x,{i18n:this.plugin.uppy.i18n})):n?(0,r.h)(C,{onUnmount:this.clearSelection},(0,r.h)(P,w)):(0,r.h)(C,{onUnmount:this.clearSelection},(0,r.h)(o,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,i18nArray:this.plugin.uppy.i18nArray}))}}function I(t,e,i){this.nextPagePath=t.nextPagePath,t.items.forEach((t=>{t.isFolder?i.push(t):e.push(t)})),this.plugin.setPluginState({folders:i,files:e})}D.VERSION="3.1.0";const N=t=>{let e,{i18n:i,search:n}=t;const o=()=>{e.value&&n(e.value)};return(0,r.h)("div",{className:"uppy-SearchProvider"},(0,r.h)("input",{className:"uppy-u-reset uppy-c-textInput uppy-SearchProvider-input",type:"search","aria-label":i("enterTextToSearch"),placeholder:i("enterTextToSearch"),onKeyUp:t=>{13===t.keyCode&&o()},ref:t=>{e=t},"data-uppy-super-focusable":!0}),(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-SearchProvider-searchButton",type:"button",onClick:o},i("searchImages")))},F=t=>{const{searchTerm:e,i18n:i,search:n}=t;return(0,r.h)("div",{class:"uppy-ProviderBrowser-search"},(0,r.h)("input",{class:"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:i("search"),"aria-label":i("search"),value:e,onKeyUp:t=>{13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),n(t.target.value))},"data-uppy-super-focusable":!0}),(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-c-icon uppy-ProviderBrowser-searchIcon",width:"12",height:"12",viewBox:"0 0 12 12"},(0,r.h)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})))};function B(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var H=0;function j(t){return"__private_"+H+++"_"+t}var L=j("updateFilesAndInputMode");class q extends O{constructor(t,e){super(t,e),Object.defineProperty(this,L,{value:V});this.opts={viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1,...e},this.search=this.search.bind(this),this.triggerSearchInput=this.triggerSearchInput.bind(this),this.addFile=this.addFile.bind(this),this.handleScroll=this.handleScroll.bind(this),this.donePicking=this.donePicking.bind(this),this.render=this.render.bind(this),this.plugin.setPluginState({isInputMode:!0,files:[],folders:[],directories:[],filterInput:"",currentSelection:[],searchTerm:null})}tearDown(){}clearSelection(){this.plugin.setPluginState({currentSelection:[],isInputMode:!0,files:[],searchTerm:null})}search(t){const{searchTerm:e}=this.plugin.getPluginState();if(!t||t!==e)return this.sharedHandler.loaderWrapper(this.provider.search(t),(t=>{B(this,L)[L](t,[])}),this.handleError)}triggerSearchInput(){this.plugin.setPluginState({isInputMode:!0})}async handleScroll(t){const e=this.nextPageQuery||null;if(this.shouldHandleScroll(t)&&e){this.isHandlingScroll=!0;try{const{files:t,searchTerm:i}=this.plugin.getPluginState(),r=await this.provider.search(i,e);B(this,L)[L](r,t)}catch(i){this.handleError(i)}finally{this.isHandlingScroll=!1}}}donePicking(){const{currentSelection:t}=this.plugin.getPluginState(),e=t.map((t=>this.addFile(t)));this.sharedHandler.loaderWrapper(Promise.all(e),(()=>{this.clearSelection()}),(()=>{}))}render(t,e){var i=this;void 0===e&&(e={});const{didFirstRender:n,isInputMode:o,searchTerm:s}=this.plugin.getPluginState();n||this.preFirstRender();const a={...this.opts,...e},{files:l,folders:h,filterInput:c,loading:u,currentSelection:p}=this.plugin.getPluginState(),{isChecked:d,toggleCheckbox:f,filterItems:m}=this.sharedHandler,g=""!==c,v={isChecked:d,toggleCheckbox:f,currentSelection:p,files:g?m(l):l,folders:g?m(h):h,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,headerComponent:F({search:this.search,i18n:this.plugin.uppy.i18n,searchTerm:s}),title:this.plugin.title,viewType:a.viewType,showTitles:a.showTitles,showFilter:a.showFilter,showBreadcrumbs:a.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){return i.plugin.uppy.validateRestrictions(...arguments)}};return u?(0,r.h)(C,{onUnmount:this.clearSelection},(0,r.h)(x,{i18n:this.plugin.uppy.i18n})):o?(0,r.h)(C,{onUnmount:this.clearSelection},(0,r.h)(N,{search:this.search,i18n:this.plugin.uppy.i18n})):(0,r.h)(C,{onUnmount:this.clearSelection},(0,r.h)(P,v))}}function V(t,e){this.nextPageQuery=t.nextPageQuery,t.items.forEach((t=>{e.push(t)})),this.plugin.setPluginState({isInputMode:!1,files:e,searchTerm:t.searchedFor})}q.VERSION="3.1.0"},2435:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var r=i(6400),n=i(7709),o=i(7817);const s=()=>(0,r.h)("svg",{className:"uppy-DashboardTab-iconScreenRec","aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("g",{fill:"currentcolor",fillRule:"evenodd"},(0,r.h)("path",{d:"M24.182 9H7.818C6.81 9 6 9.742 6 10.667v10c0 .916.81 1.666 1.818 1.666h4.546V24h7.272v-1.667h4.546c1 0 1.809-.75 1.809-1.666l.009-10C26 9.742 25.182 9 24.182 9zM24 21H8V11h16v10z"}),(0,r.h)("circle",{cx:"16",cy:"16",r:"2"})));function a(t){let{recording:e,onStartRecording:i,onStopRecording:n,i18n:o}=t;return e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video uppy-ScreenCapture-button--stop-rec",type:"button",title:o("stopCapturing"),"aria-label":o("stopCapturing"),onClick:n,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--video",type:"button",title:o("startCapturing"),"aria-label":o("startCapturing"),onClick:i,"data-uppy-super-focusable":!0},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,r.h)("circle",{cx:"50",cy:"50",r:"40"})))}function l(t){let{recording:e,recordedVideo:i,onSubmit:n,i18n:o}=t;return i&&!e?(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-ScreenCapture-button uppy-ScreenCapture-button--submit",type:"button",title:o("submitRecordedFile"),"aria-label":o("submitRecordedFile"),onClick:n,"data-uppy-super-focusable":!0},(0,r.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,r.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"}))):null}class h extends r.wA{constructor(t){super(t),this.state={elapsedTime:0},this.wrapperStyle={width:"100%",height:"100%",display:"flex"},this.overlayStyle={position:"absolute",width:"100%",height:"100%",background:"black",opacity:.7},this.infoContainerStyle={marginLeft:"auto",marginRight:"auto",marginTop:"auto",marginBottom:"auto",zIndex:1,color:"white"},this.infotextStyle={marginLeft:"auto",marginRight:"auto",marginBottom:"1rem",fontSize:"1.5rem"},this.timeStyle={display:"block",fontWeight:"bold",marginLeft:"auto",marginRight:"auto",fontSize:"3rem",fontFamily:"Courier New"}}startTimer(){this.timerTick(),this.timerRunning=!0}resetTimer(){clearTimeout(this.timer),this.setState({elapsedTime:0}),this.timerRunning=!1}timerTick(){this.timer=setTimeout((()=>{this.setState((t=>({elapsedTime:t.elapsedTime+1}))),this.timerTick()}),1e3)}fmtMSS(t){return(t-(t%=60))/60+(t>9?":":":0")+t}render(){const{recording:t,i18n:e}={...this.props},{elapsedTime:i}=this.state,n=this.fmtMSS(i);return t&&!this.timerRunning&&this.startTimer(),!t&&this.timerRunning&&this.resetTimer(),t?(0,r.h)("div",{style:this.wrapperStyle},(0,r.h)("div",{style:this.overlayStyle}),(0,r.h)("div",{style:this.infoContainerStyle},(0,r.h)("div",{style:this.infotextStyle},e("recording")),(0,r.h)("div",{style:this.timeStyle},n))):null}}const c=h,u=t=>{let{streamActive:e,i18n:i}=t;return e?(0,r.h)("div",{title:i("streamActive"),"aria-label":i("streamActive"),className:"uppy-ScreenCapture-icon--stream uppy-ScreenCapture-icon--streamActive"},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24"},(0,r.h)("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),(0,r.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.h)("path",{d:"M1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm18-7H5v1.63c3.96 1.28 7.09 4.41 8.37 8.37H19V7zM1 10v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11zm20-7H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))):(0,r.h)("div",{title:i("streamPassive"),"aria-label":i("streamPassive"),className:"uppy-ScreenCapture-icon--stream"},(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"24",height:"24",viewBox:"0 0 24 24"},(0,r.h)("path",{d:"M0 0h24v24H0z",opacity:".1",fill:"none"}),(0,r.h)("path",{d:"M0 0h24v24H0z",fill:"none"}),(0,r.h)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v3h2V5h18v14h-7v2h7c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM1 18v3h3c0-1.66-1.34-3-3-3zm0-4v2c2.76 0 5 2.24 5 5h2c0-3.87-3.13-7-7-7zm0-4v2c4.97 0 9 4.03 9 9h2c0-6.08-4.93-11-11-11z"})))};function p(){return p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},p.apply(this,arguments)}class d extends r.wA{componentWillUnmount(){const{onStop:t}=this.props;t()}render(){const{recording:t,stream:e,recordedVideo:i}=this.props,n={playsinline:!0};return(t||!i&&!t)&&(n.muted=!0,n.autoplay=!0,n.srcObject=e),i&&!t&&(n.muted=!1,n.controls=!0,n.src=i,this.videoElement&&(this.videoElement.srcObject=void 0)),(0,r.h)("div",{className:"uppy uppy-ScreenCapture-container"},(0,r.h)("div",{className:"uppy-ScreenCapture-videoContainer"},(0,r.h)(u,this.props),(0,r.h)("video",p({ref:t=>{this.videoElement=t},className:"uppy-ScreenCapture-video"},n)),(0,r.h)(c,this.props)),(0,r.h)("div",{className:"uppy-ScreenCapture-buttonContainer"},(0,r.h)(a,this.props),(0,r.h)(l,this.props)))}}const f=d,m={strings:{startCapturing:"Begin screen capturing",stopCapturing:"Stop screen capturing",submitRecordedFile:"Submit recorded file",streamActive:"Stream active",streamPassive:"Stream passive",micDisabled:"Microphone access denied by user",recording:"Recording"}};function g(){return g=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},g.apply(this,arguments)}class v extends n.di{constructor(t,e){super(t,e),this.mediaDevices=window.MediaRecorder&&navigator.mediaDevices,this.protocol="https:"===location.protocol?"https":"http",this.id=this.opts.id||"ScreenCapture",this.title=this.opts.title||"Screencast",this.type="acquirer",this.icon=s,this.defaultLocale=m;this.opts={displayMediaConstraints:{video:{width:1280,height:720,frameRate:{ideal:3,max:5},cursor:"motion",displaySurface:"monitor"}},userMediaConstraints:{audio:!0},preferredVideoMimeType:"video/webm",...e},this.i18nInit(),this.install=this.install.bind(this),this.setPluginState=this.setPluginState.bind(this),this.render=this.render.bind(this),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this.startRecording=this.startRecording.bind(this),this.stopRecording=this.stopRecording.bind(this),this.submit=this.submit.bind(this),this.streamInterrupted=this.streamInactivated.bind(this),this.captureActive=!1,this.capturedMediaFile=null}install(){if(!window.MediaRecorder||!(null==(t=navigator.mediaDevices)?void 0:t.getDisplayMedia))return this.uppy.log("Screen recorder access is not supported","warning"),null;var t;this.setPluginState({streamActive:!1,audioStreamActive:!1});const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.videoStream&&this.stop(),this.unmount()}start(){return this.mediaDevices?(this.captureActive=!0,this.selectAudioStreamSource(),this.selectVideoStreamSource().then((t=>{!1===t&&this.parent&&this.parent.hideAllPanels&&(this.parent.hideAllPanels(),this.captureActive=!1)}))):Promise.reject(new Error("Screen recorder access not supported"))}selectVideoStreamSource(){return this.videoStream?new Promise((t=>t(this.videoStream))):this.mediaDevices.getDisplayMedia(this.opts.displayMediaConstraints).then((t=>(this.videoStream=t,this.videoStream.addEventListener("inactive",(()=>{this.streamInactivated()})),this.setPluginState({streamActive:!0}),t))).catch((t=>(this.setPluginState({screenRecError:t}),this.userDenied=!0,setTimeout((()=>{this.userDenied=!1}),1e3),!1)))}selectAudioStreamSource(){return this.audioStream?new Promise((t=>t(this.audioStream))):this.mediaDevices.getUserMedia(this.opts.userMediaConstraints).then((t=>(this.audioStream=t,this.setPluginState({audioStreamActive:!0}),t))).catch((t=>("NotAllowedError"===t.name&&(this.uppy.info(this.i18n("micDisabled"),"error",5e3),this.uppy.log(this.i18n("micDisabled"),"warning")),!1)))}startRecording(){const t={};this.capturedMediaFile=null,this.recordingChunks=[];const{preferredVideoMimeType:e}=this.opts;this.selectVideoStreamSource().then((i=>{e&&MediaRecorder.isTypeSupported(e)&&(0,o.Z)(e)&&(t.mimeType=e);const r=[i.getVideoTracks()[0]];this.audioStream&&r.push(this.audioStream.getAudioTracks()[0]),this.outputStream=new MediaStream(r),this.recorder=new MediaRecorder(this.outputStream,t),this.recorder.addEventListener("dataavailable",(t=>{this.recordingChunks.push(t.data)})),this.recorder.start(),this.setPluginState({recording:!0})})).catch((t=>{this.uppy.log(t,"error")}))}streamInactivated(){const{recordedVideo:t,recording:e}={...this.getPluginState()};t||e?e&&(this.uppy.log("Capture stream inactive \u2014 stop recording"),this.stopRecording()):this.parent&&this.parent.hideAllPanels&&this.parent.hideAllPanels(),this.videoStream=null,this.audioStream=null,this.setPluginState({streamActive:!1,audioStreamActive:!1})}stopRecording(){return new Promise((t=>{this.recorder.addEventListener("stop",(()=>{t()})),this.recorder.stop()})).then((()=>(this.setPluginState({recording:!1}),this.getVideo()))).then((t=>{this.capturedMediaFile=t,this.setPluginState({recordedVideo:URL.createObjectURL(t.data)})})).then((()=>{this.recordingChunks=null,this.recorder=null}),(t=>{throw this.recordingChunks=null,this.recorder=null,t}))}submit(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(t){t.isRestriction||this.uppy.log(t,"warning")}}stop(){this.videoStream&&(this.videoStream.getVideoTracks().forEach((t=>{t.stop()})),this.videoStream.getAudioTracks().forEach((t=>{t.stop()})),this.videoStream=null),this.audioStream&&(this.audioStream.getAudioTracks().forEach((t=>{t.stop()})),this.audioStream.getVideoTracks().forEach((t=>{t.stop()})),this.audioStream=null),this.outputStream&&(this.outputStream.getAudioTracks().forEach((t=>{t.stop()})),this.outputStream.getVideoTracks().forEach((t=>{t.stop()})),this.outputStream=null),this.setPluginState({recordedVideo:null}),this.captureActive=!1}getVideo(){const t=this.recordingChunks[0].type,e=(0,o.Z)(t);if(!e)return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type "${t}"`));const i=`screencap-${Date.now()}.${e}`,r=new Blob(this.recordingChunks,{type:t}),n={source:this.id,name:i,data:new Blob([r],{type:t}),type:t};return Promise.resolve(n)}render(){const t=this.getPluginState();return t.streamActive||this.captureActive||this.userDenied||this.start(),(0,r.h)(f,g({},t,{onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onStop:this.stop,onSubmit:this.submit,i18n:this.i18n,stream:this.videoStream}))}}v.VERSION="3.1.0"},6376:(t,e,i)=>{"use strict";i.d(e,{Z:()=>je});var r=i(8647);const n="3.7.5",o=n,s="function"==typeof atob,a="function"==typeof btoa,l="function"==typeof Buffer,h="function"==typeof TextDecoder?new TextDecoder:void 0,c="function"==typeof TextEncoder?new TextEncoder:void 0,u=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),p=(t=>{let e={};return t.forEach(((t,i)=>e[t]=i)),e})(u),d=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,f=String.fromCharCode.bind(String),m="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),g=t=>t.replace(/=/g,"").replace(/[+\/]/g,(t=>"+"==t?"-":"_")),v=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),y=t=>{let e,i,r,n,o="";const s=t.length%3;for(let a=0;a<t.length;){if((i=t.charCodeAt(a++))>255||(r=t.charCodeAt(a++))>255||(n=t.charCodeAt(a++))>255)throw new TypeError("invalid character found");e=i<<16|r<<8|n,o+=u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}return s?o.slice(0,s-3)+"===".substring(s):o},b=a?t=>btoa(t):l?t=>Buffer.from(t,"binary").toString("base64"):y,w=l?t=>Buffer.from(t).toString("base64"):t=>{let e=[];for(let i=0,r=t.length;i<r;i+=4096)e.push(f.apply(null,t.subarray(i,i+4096)));return b(e.join(""))},S=(t,e=!1)=>e?g(w(t)):w(t),P=t=>{if(t.length<2)return(e=t.charCodeAt(0))<128?t:e<2048?f(192|e>>>6)+f(128|63&e):f(224|e>>>12&15)+f(128|e>>>6&63)+f(128|63&e);var e=65536+1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320);return f(240|e>>>18&7)+f(128|e>>>12&63)+f(128|e>>>6&63)+f(128|63&e)},x=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=t=>t.replace(x,P),A=l?t=>Buffer.from(t,"utf8").toString("base64"):c?t=>w(c.encode(t)):t=>b(C(t)),R=(t,e=!1)=>e?g(A(t)):A(t),_=t=>R(t,!0),k=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,O=t=>{switch(t.length){case 4:var e=((7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3))-65536;return f(55296+(e>>>10))+f(56320+(1023&e));case 3:return f((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return f((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},E=t=>t.replace(k,O),U=t=>{if(t=t.replace(/\s+/g,""),!d.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(3&t.length));let e,i,r,n="";for(let o=0;o<t.length;)e=p[t.charAt(o++)]<<18|p[t.charAt(o++)]<<12|(i=p[t.charAt(o++)])<<6|(r=p[t.charAt(o++)]),n+=64===i?f(e>>16&255):64===r?f(e>>16&255,e>>8&255):f(e>>16&255,e>>8&255,255&e);return n},M=s?t=>atob(v(t)):l?t=>Buffer.from(t,"base64").toString("binary"):U,z=l?t=>m(Buffer.from(t,"base64")):t=>m(M(t).split("").map((t=>t.charCodeAt(0)))),T=t=>z(I(t)),D=l?t=>Buffer.from(t,"base64").toString("utf8"):h?t=>h.decode(z(t)):t=>E(M(t)),I=t=>v(t.replace(/[-_]/g,(t=>"-"==t?"+":"/"))),N=t=>D(I(t)),F=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),B=function(){const t=(t,e)=>Object.defineProperty(String.prototype,t,F(e));t("fromBase64",(function(){return N(this)})),t("toBase64",(function(t){return R(this,t)})),t("toBase64URI",(function(){return R(this,!0)})),t("toBase64URL",(function(){return R(this,!0)})),t("toUint8Array",(function(){return T(this)}))},H=function(){const t=(t,e)=>Object.defineProperty(Uint8Array.prototype,t,F(e));t("toBase64",(function(t){return S(this,t)})),t("toBase64URI",(function(){return S(this,!0)})),t("toBase64URL",(function(){return S(this,!0)}))},j={version:n,VERSION:o,atob:M,atobPolyfill:U,btoa:b,btoaPolyfill:y,fromBase64:N,toBase64:R,encode:R,encodeURI:_,encodeURL:_,utob:C,btou:E,decode:N,isValid:t=>{if("string"!=typeof t)return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},fromUint8Array:S,toUint8Array:T,extendString:B,extendUint8Array:H,extendBuiltins:()=>{B(),H()}};var L=i(4564),q=i.n(L);function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function W(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function K(t){var e=Z();return function(){var i,r=Q(t);if(e){var n=Q(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(t,e){if(e&&("object"===V(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function Y(t){var e="function"==typeof Map?new Map:void 0;return Y=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return X(t,arguments,Q(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),$(r,t)},Y(t)}function X(t,e,i){return X=Z()?Reflect.construct.bind():function(t,e,i){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return i&&$(n,i.prototype),n},X.apply(null,arguments)}function Z(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function $(t,e){return $=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$(t,e)}function Q(t){return Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Q(t)}const G=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$(t,e)}(o,t);var e,i,r,n=K(o);function o(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=n.call(this,t)).originalRequest=r,e.originalResponse=s,e.causingError=i,null!=i&&(t+=", caused by ".concat(i.toString())),null!=r){var a=r.getHeader("X-Request-ID")||"n/a",l=r.getMethod(),h=r.getURL(),c=s?s.getStatus():"n/a",u=s?s.getBody()||"":"n/a";t+=", originated from request (method: ".concat(l,", url: ").concat(h,", response code: ").concat(c,", response text: ").concat(u,", request id: ").concat(a,")")}return e.message=t,e}return e=o,i&&W(e.prototype,i),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(Y(Error));var J=!1;function tt(t){J&&console.log(t)}function et(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var r,n,o=[],s=!0,a=!1;try{for(i=i.call(t);!(s=(r=i.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(l){a=!0,n=l}finally{try{s||null==i.return||i.return()}finally{if(a)throw n}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return it(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function rt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function nt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(i),!0).forEach((function(e){ot(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):rt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function ot(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function st(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var at={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},lt=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"resume"in i&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=i,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=e,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var e,i,r;return e=t,i=[{key:"findPreviousUploads",value:function(){var t=this;return this.options.fingerprint(this.file,this.options).then((function(e){return t._urlStorage.findUploadsByFingerprint(e)}))}},{key:"resumeFromPreviousUpload",value:function(t){this.url=t.uploadUrl||null,this._parallelUploadUrls=t.parallelUploadUrls||null,this._urlStorageKey=t.urlStorageKey}},{key:"start",value:function(){var t=this,e=this.file;if(e)if(this.options.endpoint||this.options.uploadUrl||this.url){var i=this.options.retryDelays;if(null==i||"[object Array]"===Object.prototype.toString.call(i)){if(this.options.parallelUploads>1)for(var r=0,n=["uploadUrl","uploadSize","uploadLengthDeferred"];r<n.length;r++){var o=n[r];if(this.options[o])return void this._emitError(new Error("tus: cannot use the ".concat(o," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(e,this.options).then((function(i){return tt(null==i?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(i)),t._fingerprint=i,t._source?t._source:t.options.fileReader.openFile(e,t.options.chunkSize)})).then((function(e){if(t._source=e,t.options.uploadLengthDeferred)t._size=null;else if(null!=t.options.uploadSize){if(t._size=Number(t.options.uploadSize),Number.isNaN(t._size))return void t._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(t._size=t._source.size,null==t._size)return void t._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));t.options.parallelUploads>1||null!=t._parallelUploadUrls?t._startParallelUpload():t._startSingleUpload()})).catch((function(e){t._emitError(e)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var e,i=this,r=this._size,n=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=null!==(e=this.options.parallelUploadBoundaries)&&void 0!==e?e:function(t,e){for(var i=Math.floor(t/e),r=[],n=0;n<e;n++)r.push({start:i*n,end:i*(n+1)});return r[e-1].end=t,r}(this._source.size,o);this._parallelUploadUrls&&s.forEach((function(t,e){t.uploadUrl=i._parallelUploadUrls[e]||null})),this._parallelUploadUrls=new Array(s.length);var a,l=s.map((function(e,o){var a=0;return i._source.slice(e.start,e.end).then((function(l){var h=l.value;return new Promise((function(l,c){var u=nt(nt({},i.options),{},{uploadUrl:e.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:nt(nt({},i.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:l,onError:c,onProgress:function(t){n=n-a+t,a=t,i._emitProgress(n,r)},onUploadUrlAvailable:function(){i._parallelUploadUrls[o]=p.url,i._parallelUploadUrls.filter((function(t){return Boolean(t)})).length===s.length&&i._saveUploadInUrlStorage()}}),p=new t(h,u);p.start(),i._parallelUploads.push(p)}))}))}));Promise.all(l).then((function(){(a=i._openRequest("POST",i.options.endpoint)).setHeader("Upload-Concat","final;".concat(i._parallelUploadUrls.join(" ")));var t=ht(i.options.metadata);return""!==t&&a.setHeader("Upload-Metadata",t),i._sendRequest(a,null)})).then((function(t){if(ct(t.getStatus(),200)){var e=t.getHeader("Location");null!=e?(i.url=ft(i.options.endpoint,e),tt("Created upload at ".concat(i.url)),i._emitSuccess()):i._emitHttpError(a,t,"tus: invalid or missing Location header")}else i._emitHttpError(a,t,"tus: unexpected response while creating upload")})).catch((function(t){i._emitError(t)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?(tt("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(tt("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(tt("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(e){var i=this;return null!=this._parallelUploads&&this._parallelUploads.forEach((function(t){t.abort(e)})),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),e&&null!=this.url?t.terminate(this.url,this.options).then((function(){return i._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(t,e,i,r){this._emitError(new G(i,r,t,e))}},{key:"_emitError",value:function(t){var e=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),dt(t,this._retryAttempt,this.options))){var i=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){e.start()}),i))}if("function"!=typeof this.options.onError)throw t;this.options.onError(t)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(t,e){"function"==typeof this.options.onProgress&&this.options.onProgress(t,e)}},{key:"_emitChunkComplete",value:function(t,e,i){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(t,e,i)}},{key:"_createUpload",value:function(){var t=this;if(this.options.endpoint){var e=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?e.setHeader("Upload-Defer-Length",1):e.setHeader("Upload-Length",this._size);var i,r=ht(this.options.metadata);""!==r&&e.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,i=this._addChunkToRequest(e)):i=this._sendRequest(e,null),i.then((function(i){if(ct(i.getStatus(),200)){var r=i.getHeader("Location");if(null!=r){if(t.url=ft(t.options.endpoint,r),tt("Created upload at ".concat(t.url)),"function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),0===t._size)return t._emitSuccess(),void t._source.close();t._saveUploadInUrlStorage().then((function(){t.options.uploadDataDuringCreation?t._handleUploadResponse(e,i):(t._offset=0,t._performUpload())}))}else t._emitHttpError(e,i,"tus: invalid or missing Location header")}else t._emitHttpError(e,i,"tus: unexpected response while creating upload")})).catch((function(i){t._emitHttpError(e,null,"tus: failed to create upload",i)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var t=this,e=this._openRequest("HEAD",this.url);this._sendRequest(e,null).then((function(i){var r=i.getStatus();if(!ct(r,200))return 423===r?void t._emitHttpError(e,i,"tus: upload is currently locked; retry later"):(ct(r,400)&&t._removeFromUrlStorage(),t.options.endpoint?(t.url=null,void t._createUpload()):void t._emitHttpError(e,i,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var n=parseInt(i.getHeader("Upload-Offset"),10);if(Number.isNaN(n))t._emitHttpError(e,i,"tus: invalid or missing offset value");else{var o=parseInt(i.getHeader("Upload-Length"),10);!Number.isNaN(o)||t.options.uploadLengthDeferred?("function"==typeof t.options.onUploadUrlAvailable&&t.options.onUploadUrlAvailable(),t._saveUploadInUrlStorage().then((function(){if(n===o)return t._emitProgress(o,o),void t._emitSuccess();t._offset=n,t._performUpload()}))):t._emitHttpError(e,i,"tus: invalid or missing length value")}})).catch((function(i){t._emitHttpError(e,null,"tus: failed to resume upload",i)}))}},{key:"_performUpload",value:function(){var t,e=this;this._aborted||(this.options.overridePatchMethod?(t=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):t=this._openRequest("PATCH",this.url),t.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(t).then((function(i){ct(i.getStatus(),200)?e._handleUploadResponse(t,i):e._emitHttpError(t,i,"tus: unexpected response while uploading chunk")})).catch((function(i){e._aborted||e._emitHttpError(t,null,"tus: failed to upload chunk at offset ".concat(e._offset),i)})))}},{key:"_addChunkToRequest",value:function(t){var e=this,i=this._offset,r=this._offset+this.options.chunkSize;return t.setProgressHandler((function(t){e._emitProgress(i+t,e._size)})),t.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(i,r).then((function(i){var r=i.value,n=i.done;return e.options.uploadLengthDeferred&&n&&(e._size=e._offset+(r&&r.size?r.size:0),t.setHeader("Upload-Length",e._size)),null===r?e._sendRequest(t):(e._emitProgress(e._offset,e._size),e._sendRequest(t,r))}))}},{key:"_handleUploadResponse",value:function(t,e){var i=parseInt(e.getHeader("Upload-Offset"),10);if(Number.isNaN(i))this._emitHttpError(t,e,"tus: invalid or missing offset value");else{if(this._emitProgress(i,this._size),this._emitChunkComplete(i-this._offset,i,this._size),this._offset=i,i===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(t,e){var i=ut(t,e,this.options);return this._req=i,i}},{key:"_removeFromUrlStorage",value:function(){var t=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(e){t._emitError(e)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var t=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var e={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?e.parallelUploadUrls=this._parallelUploadUrls:e.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,e).then((function(e){t._urlStorageKey=e}))}},{key:"_sendRequest",value:function(t){return pt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],r=[{key:"terminate",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=ut("DELETE",e,i);return pt(r,null,i).then((function(t){if(204!==t.getStatus())throw new G("tus: unexpected response while terminating upload",null,r,t)})).catch((function(n){if(n instanceof G||(n=new G("tus: failed to terminate upload",n,r,null)),!dt(n,0,i))throw n;var o=i.retryDelays[0],s=i.retryDelays.slice(1),a=nt(nt({},i),{},{retryDelays:s});return new Promise((function(t){return setTimeout(t,o)})).then((function(){return t.terminate(e,a)}))}))}}],i&&st(e.prototype,i),r&&st(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ht(t){return Object.entries(t).map((function(t){var e=et(t,2),i=e[0],r=e[1];return"".concat(i," ").concat(j.encode(String(r)))})).join(",")}function ct(t,e){return t>=e&&t<e+100}function ut(t,e,i){var r=i.httpStack.createRequest(t,e);r.setHeader("Tus-Resumable","1.0.0");var n=i.headers||{};if(Object.entries(n).forEach((function(t){var e=et(t,2),i=e[0],n=e[1];r.setHeader(i,n)})),i.addRequestId){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));r.setHeader("X-Request-ID",o)}return r}function pt(t,e,i){return("function"==typeof i.onBeforeRequest?Promise.resolve(i.onBeforeRequest(t)):Promise.resolve()).then((function(){return t.send(e).then((function(e){return("function"==typeof i.onAfterResponse?Promise.resolve(i.onAfterResponse(t,e)):Promise.resolve()).then((function(){return e}))}))}))}function dt(t,e,i){if(null==i.retryDelays||e>=i.retryDelays.length||null==t.originalRequest)return!1;if(i&&"function"==typeof i.onShouldRetry)return i.onShouldRetry(t,e,i);var r,n=t.originalResponse?t.originalResponse.getStatus():0;return(!ct(n,400)||409===n||423===n)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function ft(t,e){return new(q())(e,t).toString()}lt.defaultOptions=at;const mt=lt;function gt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,r;return e=t,(i=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(t){return Promise.resolve([])}},{key:"removeUpload",value:function(t){return Promise.resolve()}},{key:"addUpload",value:function(t,e){return Promise.resolve(null)}}])&&gt(e.prototype,i),r&&gt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var bt=!1;try{bt="localStorage"in window;var wt="tusSupport",St=localStorage.getItem(wt);localStorage.setItem(wt,St),null===St&&localStorage.removeItem(wt)}catch(Le){if(Le.code!==Le.SECURITY_ERR&&Le.code!==Le.QUOTA_EXCEEDED_ERR)throw Le;bt=!1}var Pt=bt,xt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,r;return e=t,i=[{key:"findAllUploads",value:function(){var t=this._findEntries("tus::");return Promise.resolve(t)}},{key:"findUploadsByFingerprint",value:function(t){var e=this._findEntries("tus::".concat(t,"::"));return Promise.resolve(e)}},{key:"removeUpload",value:function(t){return localStorage.removeItem(t),Promise.resolve()}},{key:"addUpload",value:function(t,e){var i=Math.round(1e12*Math.random()),r="tus::".concat(t,"::").concat(i);return localStorage.setItem(r,JSON.stringify(e)),Promise.resolve(r)}},{key:"_findEntries",value:function(t){for(var e=[],i=0;i<localStorage.length;i++){var r=localStorage.key(i);if(0===r.indexOf(t))try{var n=JSON.parse(localStorage.getItem(r));n.urlStorageKey=r,e.push(n)}catch(Le){}}return e}}],i&&yt(e.prototype,i),r&&yt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ct(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function At(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rt(t,e,i){return e&&At(t.prototype,e),i&&At(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var _t=function(){function t(){Ct(this,t)}return Rt(t,[{key:"createRequest",value:function(t,e){return new kt(t,e)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),t}(),kt=function(){function t(e,i){Ct(this,t),this._xhr=new XMLHttpRequest,this._xhr.open(e,i,!0),this._method=e,this._url=i,this._headers={}}return Rt(t,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(t,e){this._xhr.setRequestHeader(t,e),this._headers[t]=e}},{key:"getHeader",value:function(t){return this._headers[t]}},{key:"setProgressHandler",value:function(t){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(e){e.lengthComputable&&t(e.loaded)})}},{key:"send",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(i,r){t._xhr.onload=function(){i(new Ot(t._xhr))},t._xhr.onerror=function(t){r(t)},t._xhr.send(e)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}(),Ot=function(){function t(e){Ct(this,t),this._xhr=e}return Rt(t,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(t){return this._xhr.getResponseHeader(t)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),t}();const Et=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};const Ut=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};function Mt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._file=e,this.size=e.size}var e,i,r;return e=t,(i=[{key:"slice",value:function(t,e){if(Ut())return i=this._file.slice(t,e),new Promise((function(t,e){var r=new FileReader;r.onload=function(){var e=new Uint8Array(r.result);t({value:e})},r.onerror=function(t){e(t)},r.readAsArrayBuffer(i)}));var i,r=this._file.slice(t,e);return Promise.resolve({value:r})}},{key:"close",value:function(){}}])&&Mt(e.prototype,i),r&&Mt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Tt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dt(t){return void 0===t?0:void 0!==t.size?t.size:t.length}var It=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._buffer=void 0,this._bufferOffset=0,this._reader=e,this._done=!1}var e,i,r;return e=t,(i=[{key:"slice",value:function(t,e){return t<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(t,e)}},{key:"_readUntilEnoughDataOrDone",value:function(t,e){var i=this,r=e<=this._bufferOffset+Dt(this._buffer);if(this._done||r){var n=this._getDataFromBuffer(t,e),o=null==n&&this._done;return Promise.resolve({value:n,done:o})}return this._reader.read().then((function(r){var n=r.value;return r.done?i._done=!0:void 0===i._buffer?i._buffer=n:i._buffer=function(t,e){if(t.concat)return t.concat(e);if(t instanceof Blob)return new Blob([t,e],{type:t.type});if(t.set){var i=new t.constructor(t.length+e.length);return i.set(t),i.set(e,t.length),i}throw new Error("Unknown data type")}(i._buffer,n),i._readUntilEnoughDataOrDone(t,e)}))}},{key:"_getDataFromBuffer",value:function(t,e){t>this._bufferOffset&&(this._buffer=this._buffer.slice(t-this._bufferOffset),this._bufferOffset=t);var i=0===Dt(this._buffer);return this._done&&i?null:this._buffer.slice(0,e-t)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&Tt(e.prototype,i),r&&Tt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Nt(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ft=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i,r;return e=t,(i=[{key:"openFile",value:function(t,e){return Et()&&t&&void 0!==t.uri?(i=t.uri,new Promise((function(t,e){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var e=r.response;t(e)},r.onerror=function(t){e(t)},r.open("GET",i),r.send()}))).then((function(t){return new zt(t)})).catch((function(t){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(t))})):"function"==typeof t.slice&&void 0!==t.size?Promise.resolve(new zt(t)):"function"==typeof t.read?(e=Number(e),Number.isFinite(e)?Promise.resolve(new It(t,e)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var i}}])&&Nt(e.prototype,i),r&&Nt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Bt(t){return Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bt(t)}function Ht(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jt(t,e){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jt(t,e)}function Lt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Le){return!1}}();return function(){var i,r=qt(t);if(e){var n=qt(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return function(t,e){if(e&&("object"===Bt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,i)}}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}function Vt(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function Wt(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Vt(Object(i),!0).forEach((function(e){Kt(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Vt(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function Kt(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Yt=Wt(Wt({},mt.defaultOptions),{},{httpStack:new _t,fileReader:new Ft,urlStorage:Pt?new xt:new vt,fingerprint:function(t,e){return Et()?Promise.resolve(function(t,e){var i=t.exif?function(t){var e=0;if(0===t.length)return e;for(var i=0;i<t.length;i++){e=(e<<5)-e+t.charCodeAt(i),e&=e}return e}(JSON.stringify(t.exif)):"noexif";return["tus-rn",t.name||"noname",t.size||"nosize",i,e.endpoint].join("/")}(t,e)):Promise.resolve(["tus-br",t.name,t.type,t.size,t.lastModified,e.endpoint].join("-"))}}),Xt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jt(t,e)}(o,t);var e,i,r,n=Lt(o);function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e=Wt(Wt({},Yt),e),n.call(this,t,e)}return e=o,r=[{key:"terminate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=Wt(Wt({},Yt),e),mt.terminate(t,e)}}],(i=null)&&Ht(e.prototype,i),r&&Ht(e,r),Object.defineProperty(e,"prototype",{writable:!1}),o}(mt),Zt=window,$t=Zt.XMLHttpRequest,Qt=Zt.Blob,Gt=($t&&Qt&&Qt.prototype.slice,i(7113));const Jt=i(3096)((function(t,e,i){const{progress:r,bytesUploaded:n,bytesTotal:o}=e;r&&(t.uppy.log(`Upload progress: ${r}`),t.uppy.emit("upload-progress",i,{uploader:t,bytesUploaded:n,bytesTotal:o}))}),300,{leading:!0,trailing:!0});function te(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var ee=0;function ie(t){return"__private_"+ee+++"_"+t}var re=ie("emitter"),ne=ie("events");class oe{constructor(t){Object.defineProperty(this,re,{writable:!0,value:void 0}),Object.defineProperty(this,ne,{writable:!0,value:[]}),te(this,re)[re]=t}on(t,e){return te(this,ne)[ne].push([t,e]),te(this,re)[re].on(t,e)}remove(){for(const[t,e]of te(this,ne)[ne].splice(0))te(this,re)[re].off(t,e)}}var se=i(5403);const ae=function(t){return!!t&&(0!==t.readyState&&4!==t.readyState||0===t.status)};function le(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var he=0;function ce(t){return"__private_"+he+++"_"+t}function ue(t){if(null!=t){const e=()=>this.abort(t.reason);t.addEventListener("abort",e,{once:!0});const i=()=>{t.removeEventListener("abort",e)};this.then(i,i)}return this}var pe=ce("activeRequests"),de=ce("queuedHandlers"),fe=ce("paused"),me=ce("pauseTimer"),ge=ce("downLimit"),ve=ce("upperLimit"),ye=ce("rateLimitingTimer"),be=ce("call"),we=ce("queueNext"),Se=ce("next"),Pe=ce("queue"),xe=ce("dequeue"),Ce=ce("resume"),Ae=ce("increaseLimit");class Re{constructor(t){Object.defineProperty(this,xe,{value:Ue}),Object.defineProperty(this,Pe,{value:Ee}),Object.defineProperty(this,Se,{value:Oe}),Object.defineProperty(this,we,{value:ke}),Object.defineProperty(this,be,{value:_e}),Object.defineProperty(this,pe,{writable:!0,value:0}),Object.defineProperty(this,de,{writable:!0,value:[]}),Object.defineProperty(this,fe,{writable:!0,value:!1}),Object.defineProperty(this,me,{writable:!0,value:void 0}),Object.defineProperty(this,ge,{writable:!0,value:1}),Object.defineProperty(this,ve,{writable:!0,value:void 0}),Object.defineProperty(this,ye,{writable:!0,value:void 0}),Object.defineProperty(this,Ce,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,Ae,{writable:!0,value:()=>{if(le(this,fe)[fe])le(this,ye)[ye]=setTimeout(le(this,Ae)[Ae],0);else{le(this,ge)[ge]=this.limit,this.limit=Math.ceil((le(this,ve)[ve]+le(this,ge)[ge])/2);for(let t=le(this,ge)[ge];t<=this.limit;t++)le(this,we)[we]();le(this,ve)[ve]-le(this,ge)[ge]>3?le(this,ye)[ye]=setTimeout(le(this,Ae)[Ae],2e3):le(this,ge)[ge]=Math.floor(le(this,ge)[ge]/2)}}}),this.limit="number"!=typeof t||0===t?1/0:t}run(t,e){return!le(this,fe)[fe]&&le(this,pe)[pe]<this.limit?le(this,be)[be](t):le(this,Pe)[Pe](t,e)}wrapPromiseFunction(t,e){var i=this;return function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];let s;const a=new Promise(((r,o)=>{s=i.run((()=>{let e,i;try{i=Promise.resolve(t(...n))}catch(a){i=Promise.reject(a)}return i.then((t=>{e?o(e):(s.done(),r(t))}),(t=>{e?o(e):(s.done(),o(t))})),t=>{e=function(t){return new Error("Cancelled",{cause:t})}(t)}}),e)}));return a.abort=t=>{s.abort(t)},a.abortOn=ue,a}}resume(){le(this,fe)[fe]=!1,clearTimeout(le(this,me)[me]);for(let t=0;t<this.limit;t++)le(this,we)[we]()}pause(t){void 0===t&&(t=null),le(this,fe)[fe]=!0,clearTimeout(le(this,me)[me]),null!=t&&(le(this,me)[me]=setTimeout(le(this,Ce)[Ce],t))}rateLimit(t){clearTimeout(le(this,ye)[ye]),this.pause(t),this.limit>1&&Number.isFinite(this.limit)&&(le(this,ve)[ve]=this.limit-1,this.limit=le(this,ge)[ge],le(this,ye)[ye]=setTimeout(le(this,Ae)[Ae],t))}get isPaused(){return le(this,fe)[fe]}}function _e(t){le(this,pe)[pe]+=1;let e,i=!1;try{e=t()}catch(r){throw le(this,pe)[pe]-=1,r}return{abort:t=>{i||(i=!0,le(this,pe)[pe]-=1,e(t),le(this,we)[we]())},done:()=>{i||(i=!0,le(this,pe)[pe]-=1,le(this,we)[we]())}}}function ke(){queueMicrotask((()=>le(this,Se)[Se]()))}function Oe(){if(le(this,fe)[fe]||le(this,pe)[pe]>=this.limit)return;if(0===le(this,de)[de].length)return;const t=le(this,de)[de].shift(),e=le(this,be)[be](t.fn);t.abort=e.abort,t.done=e.done}function Ee(t,e){void 0===e&&(e={});const i={fn:t,priority:e.priority||0,abort:()=>{le(this,xe)[xe](i)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},r=le(this,de)[de].findIndex((t=>i.priority>t.priority));return-1===r?le(this,de)[de].push(i):le(this,de)[de].splice(r,0,i),i}function Ue(t){const e=le(this,de)[de].indexOf(t);-1!==e&&le(this,de)[de].splice(e,1)}Symbol("__queue");var Me=i(5786);function ze(t){return(e,i)=>{if("undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)||"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return Yt.fingerprint(e,i);const r=["tus",t.id,i.endpoint].join("-");return Promise.resolve(r)}}function Te(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var De=0;function Ie(t){return"__private_"+De+++"_"+t}const Ne={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1};var Fe=Ie("retryDelayIterator"),Be=Ie("queueRequestSocketToken"),He=Ie("requestSocketToken");class je extends r.Z{constructor(t,e){var i,r;super(t,e),Object.defineProperty(this,Fe,{writable:!0,value:void 0}),Object.defineProperty(this,Be,{writable:!0,value:void 0}),Object.defineProperty(this,He,{writable:!0,value:async t=>{const e=new(t.remote.providerOptions.provider?Gt.zt:Gt.C$)(this.uppy,t.remote.providerOptions),i={...this.opts};t.tus&&Object.assign(i,t.tus);return(await e.post(t.remote.url,{...t.remote.body,endpoint:i.endpoint,uploadUrl:i.uploadUrl,protocol:"tus",size:t.data.size,headers:i.headers,metadata:t.meta})).token}}),this.type="uploader",this.id=this.opts.id||"Tus",this.title="Tus";const n={useFastRemoteRetry:!0,limit:20,retryDelays:Ne.retryDelays,withCredentials:!1};if(this.opts={...n,...e},void 0===(null==e?void 0:e.allowedMetaFields)&&"metaFields"in this.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in e)throw new Error("The `autoRetry` option was deprecated and has been removed.");this.requests=null!=(i=this.opts.rateLimitedQueue)?i:new Re(this.opts.limit),Te(this,Fe)[Fe]=null==(r=this.opts.retryDelays)?void 0:r.values(),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null),this.uploaderSockets=Object.create(null),this.handleResetProgress=this.handleResetProgress.bind(this),this.handleUpload=this.handleUpload.bind(this),Te(this,Be)[Be]=this.requests.wrapPromiseFunction(Te(this,He)[He],{priority:-1})}handleResetProgress(){const t={...this.uppy.getState().files};Object.keys(t).forEach((e=>{if(t[e].tus&&t[e].tus.uploadUrl){const i={...t[e].tus};delete i.uploadUrl,t[e]={...t[e],tus:i}}})),this.uppy.setState({files:t})}resetUploaderReferences(t,e){if(void 0===e&&(e={}),this.uploaders[t]){const i=this.uploaders[t];i.abort(),e.abort&&i.abort(!0),this.uploaders[t]=null}this.uploaderEvents[t]&&(this.uploaderEvents[t].remove(),this.uploaderEvents[t]=null),this.uploaderSockets[t]&&(this.uploaderSockets[t].close(),this.uploaderSockets[t]=null)}upload(t){var e=this;return this.resetUploaderReferences(t.id),new Promise(((i,r)=>{let n,o,s;this.uppy.emit("upload-started",t);const a={...this.opts,...t.tus||{}};"function"==typeof a.headers&&(a.headers=a.headers(t));const l={...Ne,...a};l.fingerprint=ze(t),l.onBeforeRequest=e=>{let i;if(e.getUnderlyingObject().withCredentials=!!a.withCredentials,"function"==typeof a.onBeforeRequest&&(i=a.onBeforeRequest(e,t)),(0,Me.Z)(n,"shouldBeRequeued")){if(!n.shouldBeRequeued)return Promise.reject();let e;const r=new Promise((t=>{e=t}));return n=this.requests.run((()=>(t.isPaused&&n.abort(),e(),()=>{}))),Promise.all([r,i])}return i},l.onError=e=>{var i;this.uppy.log(e);const o=e.originalRequest?e.originalRequest.getUnderlyingObject():null;ae(o)&&(e=new se.Z(e,o)),this.resetUploaderReferences(t.id),null==(i=n)||i.abort(),this.uppy.emit("upload-error",t,e),r(e)},l.onProgress=(e,i)=>{this.onReceiveUploadUrl(t,s.url),this.uppy.emit("upload-progress",t,{uploader:this,bytesUploaded:e,bytesTotal:i})},l.onSuccess=()=>{const e={uploadURL:s.url};this.resetUploaderReferences(t.id),n.done(),this.uppy.emit("upload-success",t,e),s.url&&this.uppy.log(`Download ${s.file.name} from ${s.url}`),i(s)};const h=t=>{var e;const i=null==t||null==(e=t.originalResponse)?void 0:e.getStatus();if(429===i){if(!this.requests.isPaused){var r;const t=null==(r=Te(this,Fe)[Fe])?void 0:r.next();if(null==t||t.done)return!1;this.requests.rateLimit(t.value)}}else{if(i>400&&i<500&&409!==i)return!1;"undefined"!=typeof navigator&&!1===navigator.onLine&&(this.requests.isPaused||(this.requests.pause(),window.addEventListener("online",(()=>{this.requests.resume()}),{once:!0})))}return n.abort(),n={shouldBeRequeued:!0,abort(){this.shouldBeRequeued=!1},done(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};null!=a.onShouldRetry?l.onShouldRetry=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return a.onShouldRetry(...e,h)}:l.onShouldRetry=h;const c=(t,e,i)=>{(0,Me.Z)(t,e)&&!(0,Me.Z)(t,i)&&(t[i]=t[e])},u={};(Array.isArray(a.allowedMetaFields)?a.allowedMetaFields:Object.keys(t.meta)).forEach((e=>{u[e]=t.meta[e]})),c(u,"type","filetype"),c(u,"name","filename"),l.metadata=u,s=new Xt(t.data,l),this.uploaders[t.id]=s,this.uploaderEvents[t.id]=new oe(this.uppy),o=()=>(t.isPaused||s.start(),()=>{}),s.findPreviousUploads().then((e=>{const i=e[0];i&&(this.uppy.log(`[Tus] Resuming upload of ${t.id} started at ${i.creationTime}`),s.resumeFromPreviousUpload(i))})),n=this.requests.run(o),this.onFileRemove(t.id,(e=>{n.abort(),this.resetUploaderReferences(t.id,{abort:!!s.url}),i(`upload ${e} was removed`)})),this.onPause(t.id,(t=>{n.abort(),t?s.abort():n=this.requests.run(o)})),this.onPauseAll(t.id,(()=>{n.abort(),s.abort()})),this.onCancelAll(t.id,(function(r){let{reason:o}=void 0===r?{}:r;"user"===o&&(n.abort(),e.resetUploaderReferences(t.id,{abort:!!s.url})),i(`upload ${t.id} was canceled`)})),this.onResumeAll(t.id,(()=>{n.abort(),t.error&&s.abort(),n=this.requests.run(o)}))})).catch((e=>{throw this.uppy.emit("upload-error",t,e),e}))}async uploadRemote(t){this.resetUploaderReferences(t.id),t.progress.uploadStarted&&t.isRestored||this.uppy.emit("upload-started",t);try{if(t.serverToken)return this.connectToServerSocket(t);const e=await Te(this,Be)[Be](t);if(!this.uppy.getState().files[t.id])return;return this.uppy.setFileState(t.id,{serverToken:e}),this.connectToServerSocket(this.uppy.getFile(t.id))}catch(e){throw this.uppy.emit("upload-error",t,e),e}}connectToServerSocket(t){var e=this;return new Promise(((i,r)=>{const n=t.serverToken,o=function(t){const e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(t)[1];return`${/^http:\/\//i.test(t)?"ws":"wss"}://${e}`}(t.remote.companionUrl),s=new Gt.sk({target:`${o}/api/${n}`});let a;this.uploaderSockets[t.id]=s,this.uploaderEvents[t.id]=new oe(this.uppy),this.onFileRemove(t.id,(()=>{a.abort(),s.send("cancel",{}),this.resetUploaderReferences(t.id),i(`upload ${t.id} was removed`)})),this.onPause(t.id,(t=>{t?(a.abort(),s.send("pause",{})):(a.abort(),a=this.requests.run((()=>(s.send("resume",{}),()=>{}))))})),this.onPauseAll(t.id,(()=>{a.abort(),s.send("pause",{})})),this.onCancelAll(t.id,(function(r){let{reason:n}=void 0===r?{}:r;"user"===n&&(a.abort(),s.send("cancel",{}),e.resetUploaderReferences(t.id)),i(`upload ${t.id} was canceled`)})),this.onResumeAll(t.id,(()=>{a.abort(),t.error&&s.send("pause",{}),a=this.requests.run((()=>(s.send("resume",{}),()=>{})))})),this.onRetry(t.id,(()=>{s.isOpen&&(s.send("pause",{}),s.send("resume",{}))})),this.onRetryAll(t.id,(()=>{s.isOpen&&(s.send("pause",{}),s.send("resume",{}))})),s.on("progress",(e=>Jt(this,e,t))),s.on("error",(e=>{const{message:i}=e.error,n=Object.assign(new Error(i),{cause:e.error});this.opts.useFastRemoteRetry?s.close():(this.resetUploaderReferences(t.id),this.uppy.setFileState(t.id,{serverToken:null})),this.uppy.emit("upload-error",t,n),a.done(),r(n)})),s.on("success",(e=>{const r={uploadURL:e.url};this.uppy.emit("upload-success",t,r),this.resetUploaderReferences(t.id),a.done(),i()})),a=this.requests.run((()=>(t.isPaused&&s.send("pause",{}),()=>{})))}))}onReceiveUploadUrl(t,e){const i=this.uppy.getFile(t.id);i&&(i.tus&&i.tus.uploadUrl===e||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(i.id,{tus:{...i.tus,uploadUrl:e}})))}onFileRemove(t,e){this.uploaderEvents[t].on("file-removed",(i=>{t===i.id&&e(i.id)}))}onPause(t,e){this.uploaderEvents[t].on("upload-pause",((i,r)=>{t===i&&e(r)}))}onRetry(t,e){this.uploaderEvents[t].on("upload-retry",(i=>{t===i&&e()}))}onRetryAll(t,e){this.uploaderEvents[t].on("retry-all",(()=>{this.uppy.getFile(t)&&e()}))}onPauseAll(t,e){this.uploaderEvents[t].on("pause-all",(()=>{this.uppy.getFile(t)&&e()}))}onCancelAll(t,e){var i=this;this.uploaderEvents[t].on("cancel-all",(function(){i.uppy.getFile(t)&&e(...arguments)}))}onResumeAll(t,e){this.uploaderEvents[t].on("resume-all",(()=>{this.uppy.getFile(t)&&e()}))}uploadFiles(t){return function(t){const e=[],i=[];function r(t){e.push(t)}function n(t){i.push(t)}return Promise.all(t.map((t=>t.then(r,n)))).then((()=>({successful:e,failed:i})))}(t.map(((e,i)=>{const r=i+1,n=t.length;return"error"in e&&e.error?Promise.reject(new Error(e.error)):e.isRemote?(e.progress.uploadStarted&&e.isRestored||this.uppy.emit("upload-started",e),this.uploadRemote(e,r,n)):(e.progress.uploadStarted&&e.isRestored||this.uppy.emit("upload-started",e),this.upload(e,r,n))})))}handleUpload(t){if(0===t.length)return this.uppy.log("[Tus] No files to upload"),Promise.resolve();0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");const e=t.map((t=>this.uppy.getFile(t)));return this.uploadFiles(e).then((()=>null))}install(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!0}}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress)}uninstall(){this.uppy.setState({capabilities:{...this.uppy.getState().capabilities,resumableUploads:!1}}),this.uppy.removeUploader(this.handleUpload)}}je.VERSION="3.0.5"},4235:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var r=i(6400),n=i(7709),o=i(7113),s=i(8302);class a extends n.di{constructor(t,e){if(super(t,e),this.id=this.opts.id||"Unsplash",this.title=this.opts.title||"Unsplash",o.zt.initPlugin(this,e,{}),this.icon=()=>(0,r.h)("svg",{className:"uppy-DashboardTab-iconUnsplash",viewBox:"0 0 32 32",height:"32",width:"32","aria-hidden":"true"},(0,r.h)("g",{fill:"currentcolor"},(0,r.h)("path",{d:"M46.575 10.883v-9h12v9zm12 5h10v18h-32v-18h10v9h12z"}),(0,r.h)("path",{d:"M13 12.5V8h6v4.5zm6 2.5h5v9H8v-9h5v4.5h6z"}))),!this.opts.companionUrl)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");this.hostname=this.opts.companionUrl,this.provider=new o.X$(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule,provider:"unsplash",pluginId:this.id})}install(){this.view=new s.Q(this,{provider:this.provider,viewType:"unsplash"});const{target:t}=this.opts;t&&this.mount(t,this)}onFirstRender(){}render(t){return this.view.render(t)}uninstall(){this.unmount()}}a.VERSION="3.1.0"},7986:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var r=i(6400),n=i(7709),o=i(7113),s=i(7581);function a(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var l=0;function h(t){return"__private_"+l+++"_"+t}var c=h("handleKeyPress"),u=h("handleSubmit");class p extends r.wA{constructor(){super(...arguments),Object.defineProperty(this,c,{writable:!0,value:t=>{13===t.keyCode&&a(this,u)[u]()}}),Object.defineProperty(this,u,{writable:!0,value:()=>{const{addFile:t}=this.props;t(this.input.value.trim())}})}componentDidMount(){this.input.value=""}render(){const{i18n:t}=this.props;return(0,r.h)("div",{className:"uppy-Url"},(0,r.h)("input",{className:"uppy-u-reset uppy-c-textInput uppy-Url-input",type:"text","aria-label":t("enterUrlToImport"),placeholder:t("enterUrlToImport"),onKeyUp:a(this,c)[c],ref:t=>{this.input=t},"data-uppy-super-focusable":!0}),(0,r.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"button",onClick:a(this,u)[u]},t("import")))}}const d=p;function f(t,e,i){const r=(0,s.Z)(t.items);let n;switch(e){case"paste":if(r.some((t=>"file"===t.kind)))return;n=r.filter((t=>"string"===t.kind&&"text/plain"===t.type));break;case"drop":n=r.filter((t=>"string"===t.kind&&"text/uri-list"===t.type));break;default:throw new Error(`isDropOrPaste must be either 'drop' or 'paste', but it's ${e}`)}n.forEach((t=>{t.getAsString((t=>i(t)))}))}const m={strings:{import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it\u2019s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}};function g(){return(0,r.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,r.h)("path",{d:"M23.637 15.312l-2.474 2.464a3.582 3.582 0 01-.577.491c-.907.657-1.897.986-2.968.986a4.925 4.925 0 01-3.959-1.971c-.248-.329-.164-.902.165-1.149.33-.247.907-.164 1.155.164 1.072 1.478 3.133 1.724 4.618.656a.642.642 0 00.33-.328l2.473-2.463c1.238-1.313 1.238-3.366-.082-4.597a3.348 3.348 0 00-4.618 0l-1.402 1.395a.799.799 0 01-1.154 0 .79.79 0 010-1.15l1.402-1.394a4.843 4.843 0 016.843 0c2.062 1.805 2.144 5.007.248 6.896zm-8.081 5.664l-1.402 1.395a3.348 3.348 0 01-4.618 0c-1.319-1.23-1.319-3.365-.082-4.596l2.475-2.464.328-.328c.743-.492 1.567-.739 2.475-.657.906.165 1.648.574 2.143 1.314.248.329.825.411 1.155.165.33-.248.412-.822.165-1.15-.825-1.068-1.98-1.724-3.216-1.888-1.238-.247-2.556.082-3.628.902l-.495.493-2.474 2.464c-1.897 1.969-1.814 5.09.083 6.977.99.904 2.226 1.396 3.463 1.396s2.473-.492 3.463-1.395l1.402-1.396a.79.79 0 000-1.15c-.33-.328-.908-.41-1.237-.082z",fill:"#FF753E","fill-rule":"nonzero"}))}function v(t){const{pathname:e}=new URL(t);return e.substring(e.lastIndexOf("/")+1)}class y extends n.di{constructor(t,e){super(t,e),this.id=this.opts.id||"Url",this.title=this.opts.title||"Link",this.type="acquirer",this.icon=()=>(0,r.h)(g,null),this.defaultLocale=m;if(this.opts={...e},this.i18nInit(),this.hostname=this.opts.companionUrl,!this.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");this.getMeta=this.getMeta.bind(this),this.addFile=this.addFile.bind(this),this.handleRootDrop=this.handleRootDrop.bind(this),this.handleRootPaste=this.handleRootPaste.bind(this),this.client=new o.C$(t,{companionUrl:this.opts.companionUrl,companionHeaders:this.opts.companionHeaders,companionCookiesRule:this.opts.companionCookiesRule})}getMeta(t){return this.client.post("url/meta",{url:t}).then((t=>{if(t.error)throw this.uppy.log("[URL] Error:"),this.uppy.log(t.error),new Error("Failed to fetch the file");return t}))}async addFile(t,e){void 0===e&&(e=void 0);const i=function(t){return/^[a-z0-9]+:\/\//.test(t)?t:"http://"+t}(t);if(!function(t){if(!t)return!1;const e=t.match(/^([a-z0-9]+):\/\//)[1];return"http"===e||"https"===e}(i))return this.uppy.log(`[URL] Incorrect URL entered: ${i}`),void this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3);try{const t=await this.getMeta(i),n={meta:e,source:this.id,name:v(i),type:t.type,data:{size:t.size},isRemote:!0,body:{url:i},remote:{companionUrl:this.opts.companionUrl,url:`${this.hostname}/url/get`,body:{fileId:i,url:i},providerOptions:this.client.opts}};this.uppy.log("[Url] Adding remote file");try{return this.uppy.addFile(n)}catch(r){return r.isRestriction||this.uppy.log(r),r}}catch(r){return this.uppy.log(r),this.uppy.info({message:this.i18n("failedToFetch"),details:r},"error",4e3),r}}handleRootDrop(t){f(t.dataTransfer,"drop",(t=>{this.uppy.log(`[URL] Adding file from dropped url: ${t}`),this.addFile(t)}))}handleRootPaste(t){f(t.clipboardData,"paste",(t=>{this.uppy.log(`[URL] Adding file from pasted url: ${t}`),this.addFile(t)}))}render(){return(0,r.h)(d,{i18n:this.i18n,addFile:this.addFile})}install(){const{target:t}=this.opts;t&&this.mount(t,this)}uninstall(){this.unmount()}}y.VERSION="3.2.0",y.prototype.canHandleRootDrop=function(t){return(0,s.Z)(t.dataTransfer.items).filter((t=>"string"===t.kind&&"text/uri-list"===t.type)).length>0}},5403:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});class r extends Error{constructor(t,e){void 0===e&&(e=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=t,this.isNetworkError=!0,this.request=e}}const n=r}}]);