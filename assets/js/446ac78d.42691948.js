"use strict";(self.webpackChunkuppy_io=self.webpackChunkuppy_io||[]).push([[1269],{85849:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>c,frontMatter:()=>t,metadata:()=>r,toc:()=>d});var o=i(85893),a=i(11151);const t={title:"\ud83c\udf84 Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more",date:new Date("2021-12-15T00:00:00.000Z"),authors:["aduh95","arturi","mifi","murderlon"],image:"https://uppy.io/img/blog/2.1-2.3/audio-cover.jpg",published:!0,slug:"2021/12/2.1-2.3"},s=void 0,r={permalink:"/blog/2021/12/2.1-2.3",editUrl:"https://github.com/transloadit/uppy.io/tree/main/blog/2021-12-2.1-2.3.md",source:"@site/blog/2021-12-2.1-2.3.md",title:"\ud83c\udf84 Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more",description:"Last Christmas, we gave you Uppy 1.24, but",date:"2021-12-15T00:00:00.000Z",formattedDate:"December 15, 2021",tags:[],readingTime:5.075,hasTruncateMarker:!0,authors:[{email:"antoine@transloadit.com",name:"Antoine du Hamel",id:"aduh95",tagline:"Developer",imageURL:"https://github.com/aduh95.png",key:"aduh95"},{email:"artur@transloadit.com",name:"Artur Paikin",id:"artur",tagline:"Developer",imageURL:"https://github.com/arturi.png",key:"arturi"},{email:"mikael@transloadit.com",name:"Mikael Finstad",id:"mikael",tagline:"Developer",imageURL:"https://github.com/mifi.png",key:"mifi"},{email:"merlijn@transloadit.com",name:"Merlijn Vos",id:"merlijn",tagline:"Developer",imageURL:"https://github.com/murderlon.png",key:"murderlon"}],frontMatter:{title:"\ud83c\udf84 Uppy 2.1-2.3: Audio plugin, fast and efficient streaming for Companion, production-ready Unsplash, and more",date:"2021-12-15T00:00:00.000Z",authors:["aduh95","arturi","mifi","murderlon"],image:"https://uppy.io/img/blog/2.1-2.3/audio-cover.jpg",published:!0,slug:"2021/12/2.1-2.3"},unlisted:!1,prevItem:{title:"Uppy 2.4-2.7: Image Compressor, Transloadit Rate Limiting, ESM",permalink:"/blog/2022/03/2.4-2.7"},nextItem:{title:"Uppy 2.0.0: smaller, faster, modular plugins, Preact X, stricter types, and much more",permalink:"/blog/2021/08/2.0"}},l={authorsImageUrls:[void 0,void 0,void 0,void 0]},d=[{value:"Audio plugin",id:"audio-plugin",level:2},{value:"<code>@uppy/unsplash</code> is now production ready",id:"uppyunsplash-is-now-production-ready",level:2},{value:"New streaming interface for Companion",id:"new-streaming-interface-for-companion",level:2},{value:"Status Bar error state improvements",id:"status-bar-error-state-improvements",level:2},{value:"Internal housekeeping",id:"internal-housekeeping",level:2},{value:"Yarn v3 instead of npm",id:"yarn-v3-instead-of-npm",level:3},{value:"Refactor locale scripts &amp; generate types and docs",id:"refactor-locale-scripts--generate-types-and-docs",level:3},{value:"Automated release scripts",id:"automated-release-scripts",level:3},{value:"And more",id:"and-more",level:2}];function p(e){const n={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",source:"source",strong:"strong",ul:"ul",video:"video",...(0,a.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["Last Christmas, we gave you ",(0,o.jsx)(n.a,{href:"https://uppy.io/blog/2020/12/1.24/",children:"Uppy 1.24"}),", but\nthis very next year, we\u2019ll take it away (since it\u2019s outdated by now) and give\nyou a brand-new Uppy 2.3 \ud83c\udf81!"]}),"\n",(0,o.jsxs)(n.p,{children:["After the ",(0,o.jsx)(n.a,{href:"https://uppy.io/blog/2021/08/2.0/",children:"release"})," of our latest major\nversion, 2.0.0, we\u2019ve been busy with many things. First of all is the\nlong-awaited Audio plugin to record and upload live audio directly. We then\nworked on adding a fast and efficient streaming interface to Companion and made\nUnsplash production ready. Housekeeping was also part of the job: we made Status\nBar improvements, moved from npm to Yarn 3, did some refactoring, and updated\ndependencies."]}),"\n",(0,o.jsx)(n.p,{children:"Last but not least, we got the issue count down from around 110 since 2.0.0 to\naround 45 now."}),"\n",(0,o.jsx)(n.h2,{id:"audio-plugin",children:"Audio plugin"}),"\n",(0,o.jsxs)(n.p,{children:["Uppy now has a new ",(0,o.jsx)(n.code,{children:"@uppy/audio"})," plugin for recording audio memos, sounds,\njingling bells, Christmas carols, and all your holiday cheer. Check it out on\nthe ",(0,o.jsx)(n.a,{href:"https://uppy.io/examples/dashboard/",children:"demo page"}),"."]}),"\n",(0,o.jsxs)(n.video,{alt:"Audio plugin demo",muted:!0,autoPlay:!0,loop:!0,children:["\n  ",(0,o.jsx)(n.source,{src:"/img/blog/2.1-2.3/audio-demo.mp4",type:"video/mp4"}),"\n  Your browser does not support the video tag: https://uppy.io/img/blog/2.1-2.3/audio-demo.mp4\n"]}),"\n",(0,o.jsxs)(n.h2,{id:"uppyunsplash-is-now-production-ready",children:[(0,o.jsx)(n.code,{children:"@uppy/unsplash"})," is now production ready"]}),"\n",(0,o.jsxs)(n.p,{children:["The Unsplash plugin has received an update, providing attribution to the image\nauthors and adding some polish to make it look better. Being fully brand\ncompliant with Unsplash means it\u2019s now production ready. You can demo the plugin\non the ",(0,o.jsx)(n.a,{href:"https://uppy.io/examples/dashboard",children:"website"})," or read the\n",(0,o.jsx)(n.a,{href:"https://uppy.io/docs/unsplash/",children:"docs"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"new-streaming-interface-for-companion",children:"New streaming interface for Companion"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://uppy.io/docs/companion/",children:"Companion"})," handles the server-to-server communication between your\nserver and file storage providers such as Google Drive, Dropbox, Instagram, and\nthe like. This bypasses the client (so a 5 GB video isn\u2019t eating into your\nusers\u2019 data plans) and files are directly uploaded to the final destination.\nCompanion is made to be effortlessly integrate-able with Uppy."]}),"\n",(0,o.jsx)(n.p,{children:"It used to work by downloading the requested file from a remote provider on the\nserver to then start uploading it to the destination. This did the job, but it\u2019s\nwasn\u2019t ideal."}),"\n",(0,o.jsxs)(n.p,{children:["We now built streaming support into Companion, which means the download and\nupload can happen simultaneously. This can result in ",(0,o.jsx)(n.strong,{children:"two times faster\nuploads"}),", because we no longer have to wait for files to finish downloading\nbefore starting the upload process. It\u2019s especially useful for large files and\nremoves the need for a lot of storage space on the server, as data will be\nbuffered in memory."]}),"\n",(0,o.jsxs)(n.p,{children:["You can enable this by setting ",(0,o.jsx)(n.code,{children:"streamingUpload"})," in the Companion\n",(0,o.jsx)(n.a,{href:"https://uppy.io/docs/companion/#Options",children:"options"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"NOTE:"})," Streaming is turned off by default. Do not turn it on yet if you\u2019re\nusing TUS for uploads, due to\n",(0,o.jsx)(n.a,{href:"https://github.com/tus/tus-js-client/issues/275",children:"this tus-js-client bug"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Interested in using Companion? You can use Transloadit-hosted Companion on every\n",(0,o.jsx)(n.a,{href:"https://transloadit.com/pricing/",children:"Plan"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"status-bar-error-state-improvements",children:"Status Bar error state improvements"}),"\n",(0,o.jsx)(n.p,{children:"The Status Bar plugin would get confused about upload errors in Uppy, and we\u2019ve\naddressed this:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["The error state is now shown in case of only ",(0,o.jsx)(n.em,{children:"one"})," failed file instead of\n",(0,o.jsx)(n.em,{children:"all"})," failed files. The plugin used to get stuck in the uploading state when a\nsingle file failed."]}),"\n",(0,o.jsx)(n.li,{children:"Added \u201cX of X files uploaded\u201d below \u201cUpload failed\u201d for extra context."}),"\n",(0,o.jsx)(n.li,{children:"Improved the error details button styling in the Status Bar and the file info\ncard."}),"\n",(0,o.jsx)(n.li,{children:"Status Bar state is set to complete if the user manually removes the failed\nfiles."}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{alt:"status bar improvements screenshot",src:i(36339).Z+"",width:"1200",height:"879"})}),"\n",(0,o.jsx)(n.h2,{id:"internal-housekeeping",children:"Internal housekeeping"}),"\n",(0,o.jsx)(n.h3,{id:"yarn-v3-instead-of-npm",children:"Yarn v3 instead of npm"}),"\n",(0,o.jsx)(n.p,{children:"We\u2019ve switched the Uppy repo to Yarn 3 to improve package install performance.\nWith our complex dependency graph and over thirty packages in a monorepo, we are\nseeing install times reduced by more than a few minutes!"}),"\n",(0,o.jsxs)(n.p,{children:["We are using ",(0,o.jsx)(n.a,{href:"https://github.com/nodejs/corepack",children:"Corepack"})," to make sure all\nUppy contributors are using the same version of Yarn. If you are an Uppy\ncontributor, please run the following commands to enable Corepack:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sh",children:"corepack -v || npm i -g corepack # install Corepack if not already installed\nyarn -v || corepack enable # install Yarn through Corepack if not already installed\nyarn || corepack yarn install # install npm dependencies using yarn\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://github.com/transloadit/uppy/pull/3237",children:"View the PR"})}),"\n",(0,o.jsx)(n.h3,{id:"refactor-locale-scripts--generate-types-and-docs",children:"Refactor locale scripts & generate types and docs"}),"\n",(0,o.jsxs)(n.p,{children:["This is an internal change, but important nonetheless. Our locales now live in a\nseparate ",(0,o.jsx)(n.code,{children:"locale.js"})," file for every plugin instead of ",(0,o.jsx)(n.code,{children:"this.defaultLocale"})," in\nthe class. The docs and types are automatically updated when we add or remove\nnew locale strings."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://github.com/transloadit/uppy/pull/3276",children:"View the PR"}),"."]}),"\n",(0,o.jsx)(n.h3,{id:"automated-release-scripts",children:"Automated release scripts"}),"\n",(0,o.jsx)(n.p,{children:"A lot of things need to happen when we\u2019re publishing a new release. A complete\nredo of the automation script is now available for quick and secure releases."}),"\n",(0,o.jsx)(n.p,{children:"Here are some highlights:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Releaser runs ",(0,o.jsx)(n.code,{children:"yarn release"})," and will get a series of\n",(0,o.jsx)(n.a,{href:"https://github.com/terkelg/prompts",children:"prompts"})," to set up a release."]}),"\n",(0,o.jsx)(n.li,{children:"A changelog will be generated."}),"\n",(0,o.jsx)(n.li,{children:"The contributions table will be updated."}),"\n",(0,o.jsx)(n.li,{children:"GitHub Actions will create a release candidate pull request."}),"\n",(0,o.jsx)(n.li,{children:"When approved, GitHub Actions automatically merges, publishes to the npm\npublic registry, and creates CDN bundles."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://github.com/transloadit/uppy/pull/3304",children:"View the PR"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"and-more",children:"And more"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"google-drive: plugin has been updated for brand compliance (#3178)"}),"\n",(0,o.jsx)(n.li,{children:"google-drive: sort Google Drive list by name #3069"}),"\n",(0,o.jsxs)(n.li,{children:["status-bar: now shows all details on mobile when ",(0,o.jsx)(n.code,{children:"showProgressDetails"})," is\n",(0,o.jsx)(n.code,{children:"true"})," (#3174)"]}),"\n",(0,o.jsxs)(n.li,{children:["core: move ",(0,o.jsx)(n.code,{children:"Uppy"})," class to its own module (#3225)"]}),"\n",(0,o.jsxs)(n.li,{children:["angular: fix component crash by loosening ",(0,o.jsx)(n.code,{children:"package.json"})," version constraints\n(#3210)"]}),"\n",(0,o.jsx)(n.li,{children:"drop-target: exposed events (#3238)"}),"\n",(0,o.jsxs)(n.li,{children:["companion: add ",(0,o.jsx)(n.code,{children:"maxFileSize"})," option in companion for safety #3159"]}),"\n",(0,o.jsx)(n.li,{children:"companion: new AWS S3 multipart presigned URL batching endpoint #3056"}),"\n",(0,o.jsx)(n.li,{children:"companion: improve CORS default headers #3167"}),"\n",(0,o.jsxs)(n.li,{children:["companion: use GET instead of HEAD for ",(0,o.jsx)(n.code,{children:"getURLMeta"})," for better server\ncompatibility (especially signed S3 URLs) #3048"]}),"\n",(0,o.jsxs)(n.li,{children:["companion: deprecate missing ",(0,o.jsx)(n.code,{children:"uploadUrls"})," option (will be required in the\nfuture) #3182"]}),"\n",(0,o.jsx)(n.li,{children:"companion: close window on auth callback error and show error to user #3143"}),"\n",(0,o.jsx)(n.li,{children:"companion: cut off length of file names to avoid AWS error #3048"}),"\n",(0,o.jsxs)(n.li,{children:["companion: safely escape ",(0,o.jsx)(n.code,{children:"<script>"})," injected code in Companion\u2019s send-token.js\n#3101"]}),"\n",(0,o.jsx)(n.li,{children:"companion: upgrade aws-sdk #3334"}),"\n",(0,o.jsx)(n.li,{children:"companion: improve logging #3103"}),"\n",(0,o.jsx)(n.li,{children:"companion: change Provider/SearchProvider API to async and use streams instead\n#3159"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"Happy Holidays from the Uppy team! Enjoy Christmas and New Year, stay safe, take\na walk outside. See you in 2022!"})]})}function c(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(p,{...e})}):p(e)}},36339:(e,n,i)=>{i.d(n,{Z:()=>o});const o=i.p+"assets/images/status-bar-improvements-b57b432fbbd9ad9b7efad2690877f1f5.jpg"},11151:(e,n,i)=>{i.d(n,{Z:()=>r,a:()=>s});var o=i(67294);const a={},t=o.createContext(a);function s(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);