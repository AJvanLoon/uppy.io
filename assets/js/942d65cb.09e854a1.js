"use strict";(self.webpackChunkuppy_io=self.webpackChunkuppy_io||[]).push([[4518],{12661:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>t,metadata:()=>a,toc:()=>l});var r=n(74848),o=n(28453);const t={title:"Uppy 0.24: Refreshed Dashboard, StatusBar and Provider UI, revamped XHR Response Handling",date:new Date("2018-04-17T00:00:00.000Z"),authors:["arturi"],image:"https://uppy.io/img/blog/0.24/uppy-screenshot.jpg",published:!0,slug:"2018/04/0.24"},i=void 0,a={permalink:"/blog/2018/04/0.24",editUrl:"https://github.com/transloadit/uppy.io/tree/main/blog/2018-04-0.24.md",source:"@site/blog/2018-04-0.24.md",title:"Uppy 0.24: Refreshed Dashboard, StatusBar and Provider UI, revamped XHR Response Handling",description:"Uppy 0.24.2 brings a refreshed UI in the Dashboard and StatusBar plugins, a",date:"2018-04-17T00:00:00.000Z",tags:[],readingTime:5.86,hasTruncateMarker:!0,authors:[{email:"artur@transloadit.com",name:"Artur Paikin",id:"artur",tagline:"Developer",imageURL:"https://github.com/arturi.png",key:"arturi"}],frontMatter:{title:"Uppy 0.24: Refreshed Dashboard, StatusBar and Provider UI, revamped XHR Response Handling",date:"2018-04-17T00:00:00.000Z",authors:["arturi"],image:"https://uppy.io/img/blog/0.24/uppy-screenshot.jpg",published:!0,slug:"2018/04/0.24"},unlisted:!1,prevItem:{title:"Uppy 0.25: Drag & Drop Links Urls & Images, Improved File Selecting in Providers, Interactive Components In i18n",permalink:"/blog/2018/06/0.25"},nextItem:{title:"Uppy 0.23: Import from Url, refactored thumbnail generation, XHR bundle",permalink:"/blog/2018/02/0.23"}},d={authorsImageUrls:[void 0]},l=[{value:"Refreshed Dashboard and Providers",id:"refreshed-dashboard-and-providers",level:2},{value:"A Cleaner StatusBar",id:"a-cleaner-statusbar",level:2},{value:"XHR Response Handling",id:"xhr-response-handling",level:2},{value:"Powered by Uppy",id:"powered-by-uppy",level:2},{value:"Server News",id:"server-news",level:2},{value:"Docs",id:"docs",level:2},{value:"Other Fixes &amp; Improvements",id:"other-fixes--improvements",level:2}];function p(e){const s={a:"a",code:"code",em:"em",h2:"h2",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.p,{children:["Uppy 0.24.2 brings a refreshed UI in the Dashboard and StatusBar plugins, a\nsynchronous ",(0,r.jsx)(s.code,{children:"addFile()"})," method, a cancel button, style protections,\ndocumentation on writing your own Uppy plugin, revamped XHR response handling\nand tons of bugfixes."]}),"\n",(0,r.jsx)(s.h2,{id:"refreshed-dashboard-and-providers",children:"Refreshed Dashboard and Providers"}),"\n",(0,r.jsx)(s.p,{children:"As always, we are trying to simplify and improve the UI of Uppy plugins. In this\nrelease, Dashboard\u2019s design has been refreshed, check this out:"}),"\n",(0,r.jsx)(s.img,{className:"border",src:"/img/blog/0.24/dashboard-main.jpg"}),"\n",(0,r.jsx)(s.img,{className:"border",src:"/img/blog/0.24/uppy-screenshot.jpg"}),"\n",(0,r.jsx)(s.p,{children:"Meta editing screen:"}),"\n",(0,r.jsx)(s.img,{className:"border",src:"/img/blog/0.24/dashboard-meta-edit.jpg"}),"\n",(0,r.jsx)(s.p,{children:"Camera screen:"}),"\n",(0,r.jsx)(s.img,{className:"border",src:"/img/blog/0.24/import-from-camera.jpg"}),"\n",(0,r.jsx)(s.p,{children:"Import from URL (Link):"}),"\n",(0,r.jsx)(s.img,{className:"border",src:"/img/blog/0.24/import-from-url.jpg"}),"\n",(0,r.jsxs)(s.p,{children:["And more, check out the\n",(0,r.jsx)(s.a,{href:"https://uppy.io/examples/dashboard/",children:"Dashboard example page"}),"."]}),"\n",(0,r.jsx)(s.h2,{id:"a-cleaner-statusbar",children:"A Cleaner StatusBar"}),"\n",(0,r.jsx)(s.p,{children:"The StatusBar plugin used to show a lot of progress details. This has been\nsimplified so that by default it will only show a percentage:"}),"\n",(0,r.jsx)(s.img,{src:"/img/blog/0.24/statusbar-2.jpg"}),"\n",(0,r.jsxs)(s.p,{children:["But there\u2019s an option ",(0,r.jsx)(s.code,{children:"showProgressDetails: true"})," for both the StatusBar and\nDashboard (which passes it to StatusBar included in the Dashboard) to bring back\nthis detailed information, spread over two lines:"]}),"\n",(0,r.jsx)(s.img,{src:"/img/blog/0.24/statusbar-1.jpg"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"uppy.use(StatusBar, { ..., showProgressDetails: true })\n\n// or\n\nuppy.use(Dashboard, { ..., showProgressDetails: true })\n"})}),"\n",(0,r.jsx)(s.p,{children:"We\u2019ve also added a handy \u201ccancel\u201d button, which will cancel everything in\nprogress regardless of the type of the upload (wether uppy-server or local\npowered, and wether tus-resumable or old school XHR/form uploads)."}),"\n",(0,r.jsx)(s.h2,{id:"xhr-response-handling",children:"XHR Response Handling"}),"\n",(0,r.jsxs)(s.p,{children:["When the upload completes (regardless of whether it succeeded), a ",(0,r.jsx)(s.code,{children:"response"})," key\ngets added to the file. ",(0,r.jsx)(s.code,{children:"file.response"})," contains a ",(0,r.jsx)(s.code,{children:"status"})," and ",(0,r.jsx)(s.code,{children:"data"}),"\nproperties. ",(0,r.jsx)(s.code,{children:"data"})," is the result of the ",(0,r.jsx)(s.code,{children:"getResponseData()"})," option. The\n",(0,r.jsx)(s.code,{children:"getResponseData()"})," function's signature is now:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"getResponseData (responseText, response) { }\n"})}),"\n",(0,r.jsxs)(s.p,{children:["This is what the default JSON parsing implementation looks like in the\n",(0,r.jsx)(s.code,{children:"XHRUpload"})," plugin, but you can override it with your own:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-js",children:"getResponseData (responseText, response) {\n  let parsedResponse = {}\n  try {\n    parsedResponse = JSON.parse(responseText)\n  } catch (err) {\n    console.log(err)\n  }\n\n  return parsedResponse\n}\n"})}),"\n",(0,r.jsxs)(s.p,{children:["The ",(0,r.jsx)(s.code,{children:"responseText"})," is the XHR endpoint response as a string. For uploads from\nthe user's device, ",(0,r.jsx)(s.code,{children:"response"})," is the\n",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest",children:"XMLHttpRequest"}),"\nobject."]}),"\n",(0,r.jsxs)(s.p,{children:["When uploading files from remote providers such as Dropbox or Instagram, Uppy\nServer sends upload response data to the client. This is made available in the\n",(0,r.jsx)(s.code,{children:"getResponseData()"})," option as well. The ",(0,r.jsx)(s.code,{children:"response"})," object from Uppy Server\ncontains some properties named after their\n",(0,r.jsx)(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest",children:"XMLHttpRequest"}),"\ncounterparts:"]}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"response.responseText"})," - the XHR endpoint response as a string;"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"response.status"})," - the HTTP status code;"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"response.statusText"})," - the HTTP status text;"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.code,{children:"response.headers"})," - an object mapping lowercase header names to their values."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"powered-by-uppy",children:"Powered by Uppy"}),"\n",(0,r.jsxs)(s.p,{children:["Uppy is provided free for the world forever. In return, we ask that you consider\nkeeping a tiny tasteful Uppy logo at the bottom of the Dashboard, so that more\npeople can discover and enjoy Uppy. This ",(0,r.jsx)(s.em,{children:"really helps"})," to grow our community\nwhich will result in more issues reported, more contributors, more features\nrequested, more PRs merged, and a better Uppy for you to use tomorrow, for free,\nforever."]}),"\n",(0,r.jsxs)(s.p,{children:["If you don't want to do this indefinitely, consider doing this initially, just\nto help us reach critical mass and get our ",(0,r.jsx)(s.em,{children:"perpetuum mobile"})," going."]}),"\n",(0,r.jsxs)(s.p,{children:["But, Uppy is also free as in freedom. And so if you can't help our cause, set\n",(0,r.jsx)(s.code,{children:"proudlyDisplayPoweredByUppy"})," to ",(0,r.jsx)(s.code,{children:"false"})," to hide te Uppy logo."]}),"\n",(0,r.jsx)(s.img,{src:"/img/blog/0.24/powered-by-1.jpg"}),"\n",(0,r.jsx)(s.h2,{id:"server-news",children:"Server News"}),"\n",(0,r.jsx)(s.p,{children:"We occasionally get questions about the required servers for Uppy. Uppy does not\nrequire special servers. You can use Uppy for free in the browser and let it\nupload to your existing Apache/Nginx server. Sprinkle a few lines of HTML/JS and\nthat's it."}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"If you want integration with Instagram"})," Dropbox and friends, you'll need to\nrun an 'Uppy Server' in the datacenter to help with OAuth secrecy and fetching\nlarge files and uploading those, bypassing the client. No fun to have several\ngigabytes pass through your mobile tubes - best let the datacenters sort this\nout among themselves. That's what Uppy Server is for."]}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"If you want resumable uploads"}),", you'll need a ",(0,r.jsx)(s.a,{href:"https://tus.io/",children:"https://tus.io/"})," speaking\nserver."]}),"\n",(0,r.jsxs)(s.p,{children:["You can run these optional servers yourself, or use the hosted variants provided\nby our company ",(0,r.jsx)(s.a,{href:"https://transloadit.com/",children:"Transloadit"})," for \ud83d\udcb8. Transloadit also\nadds a wide range of encoding/processing features."]}),"\n",(0,r.jsx)(s.p,{children:"Now that that's sorted out, let's see what we improved on the Uppy Server side!\nWe tackled a number of security issues:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Fixed security vulnerability in transient dependency\n",(0,r.jsx)(s.a,{href:"https://github.com/transloadit/uppy-server/issues/70",children:"#70"})]}),"\n",(0,r.jsx)(s.li,{children:"Auto-generate tmp download file name to avoid Path traversal"}),"\n",(0,r.jsx)(s.li,{children:"Namespace redis key storage/lookup to avoid collisions"}),"\n",(0,r.jsx)(s.li,{children:"Validate callback redirect url after completing OAuth"}),"\n",(0,r.jsx)(s.li,{children:"Reduce the permission level required by Google Drive"}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Other non-security improvements are:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Auto-generate Server secret if none is provided on startup"}),"\n",(0,r.jsx)(s.li,{children:"We implemented a more standard logger for Uppy Server"}),"\n",(0,r.jsxs)(s.li,{children:["Added an example project to run Uppy Server on Serverless,\n",(0,r.jsx)(s.a,{href:"https://github.com/transloadit/uppy-server/tree/master/examples/serverless",children:"see"}),"."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"docs",children:"Docs"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"Uppy Server docs now point to a detailed write-up on how to run Uppy Server on\nKubernetes (#706 / @kiloreux)"}),"\n",(0,r.jsx)(s.li,{children:"An Uppy Server custom provider example has been added, so now it\u2019s easier\ncreate your own custom providers."}),"\n",(0,r.jsx)(s.li,{children:"Added more useful events, i18n strings, fixed typos, and other polish."}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"other-fixes--improvements",children:"Other Fixes & Improvements"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["\u26a0\ufe0f ",(0,r.jsx)(s.strong,{children:"breaking"})," ",(0,r.jsx)(s.code,{children:"addFile()"}),", ",(0,r.jsx)(s.code,{children:"onBeforeFileAdded()"})," and ",(0,r.jsx)(s.code,{children:"onBeforeUpload()"})," are\nnow synchronous and have to return nothing or file objects to proceed, or\nfalse to abort; please check out the update docs for details:\n",(0,r.jsx)(s.a,{href:"https://uppy.io/docs/uppy/#onBeforeFileAdded",children:"onBeforeFileAdded()"})," and\n",(0,r.jsx)(s.a,{href:"https://uppy.io/docs/uppy/#onBeforeUpload",children:"onBeforeUpload()"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["\u26a0\ufe0f ",(0,r.jsx)(s.strong,{children:"breaking"})," Most events now emit the whole ",(0,r.jsx)(s.code,{children:"file"})," object instead of a\n",(0,r.jsx)(s.code,{children:"fileId"}),". So you can access ",(0,r.jsx)(s.code,{children:"file.name"})," right away, for example, so you no\nlonger have to fish for the file using its id."]}),"\n",(0,r.jsxs)(s.li,{children:["\u26a0\ufe0f ",(0,r.jsx)(s.strong,{children:"breaking"})," We\u2019ve added ",(0,r.jsx)(s.code,{children:"postcss-safe-important"})," to our style build step,\nso now 90% of rules got ",(0,r.jsx)(s.code,{children:"!important"})," declaration added to them. This is done\nto prevent page styles (especially global ones like from Bootstrap) from\nleaking into the Uppy widget. There are other solutions we are looking into,\nlike iFrames and WebComponents, this is an experiment. Keep in mind that to\noverride Uppy styles, you now have to also use ",(0,r.jsx)(s.code,{children:"!important"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["dashboard: \u26a0\ufe0f ",(0,r.jsx)(s.strong,{children:"breaking"})," ",(0,r.jsx)(s.code,{children:"maxWidth"}),", ",(0,r.jsx)(s.code,{children:"maxHeight"})," options have been converted\nto ",(0,r.jsx)(s.code,{children:"width"})," and ",(0,r.jsx)(s.code,{children:"height"}),", because this makes more sense, ",(0,r.jsx)(s.code,{children:"maxWidth"})," and\n",(0,r.jsx)(s.code,{children:"maxHeight"})," are actually ",(0,r.jsx)(s.code,{children:"100%"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["There is now an option ",(0,r.jsx)(s.code,{children:"showLinkToFileUploadResult: false"})," to disable linking\nto the upload result in Dashboard UI."]}),"\n",(0,r.jsx)(s.li,{children:"We are now using the image time and date as a file name in Instagram, instead\nof a generic file id."}),"\n",(0,r.jsx)(s.li,{children:"The URL plugin now checks for HTTP(S) protocol, and adds HTTP by default if no\nprotocol is present."}),"\n",(0,r.jsxs)(s.li,{children:["It\u2019s now possible to override ",(0,r.jsx)(s.code,{children:"<DashboardModal />"})," React component\u2019s target\nprop."]}),"\n",(0,r.jsxs)(s.li,{children:["Provider views now have ",(0,r.jsx)(s.code,{children:"showFilter"})," and ",(0,r.jsx)(s.code,{children:"showBreadcrumbs"})," options, those are\n",(0,r.jsx)(s.code,{children:"false"})," for the Instagram plugin, for example."]}),"\n",(0,r.jsxs)(s.li,{children:["Uppy Server to Client communication has been refactored into ",(0,r.jsx)(s.code,{children:"Provider"})," and\n",(0,r.jsx)(s.code,{children:"Request"})," modules. ",(0,r.jsx)(s.code,{children:"Request"})," can be used when a simple request needs to be\nmade to Uppy Server, like in the URL plugin. ",(0,r.jsx)(s.code,{children:"Provider"})," is used for more\ncomplex implementations shared between Google Drive and Instagram, for\nexample."]}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["Finally, we\u2019ve added a Transloadit example to the website,\n",(0,r.jsx)(s.a,{href:"https://uppy.io/examples/transloadit/",children:"check it out"}),"."]}),"\n",(0,r.jsx)(s.p,{children:"Have fun,"}),"\n",(0,r.jsx)(s.p,{children:"The Uppy Team"})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>a});var r=n(96540);const o={},t=r.createContext(o);function i(e){const s=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);